#! /bin/sh

# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.13 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_default_prefix=/usr/local/apache2
ac_help="$ac_help
  --enable-layout=LAYOUT"
ac_help="$ac_help
  --with-included-apr     Use bundled copies of APR/APR-Util"
ac_help="$ac_help
  --with-apr=PATH         prefix for installed APR or the full path to 
                             apr-config"
ac_help="$ac_help
  --with-apr-util=PATH    prefix for installed APU or the full path to 
                             apu-config"
ac_help="$ac_help
  --with-pcre=PATH        Use external PCRE library"
ac_help="$ac_help
  --with-port=PORT        Port on which to listen (default is 80)"
ac_help="$ac_help
  --with-sslport=SSLPORT  Port on which to securelisten (default is 443)"
ac_help="$ac_help
  --enable-v4-mapped      Allow IPv6 sockets to handle IPv4 connections"
ac_help="$ac_help
  --enable-exception-hook Enable fatal exception hook"
ac_help="$ac_help
  --enable-maintainer-mode Turn on debugging and compile time warnings"
ac_help="$ac_help
  --enable-pie            Build httpd as a Position Independent Executable"
ac_help="$ac_help
  --enable-modules=MODULE-LIST Space-separated list of modules to enable | "all" | "most""
ac_help="$ac_help
  --enable-mods-shared=MODULE-LIST Space-separated list of shared modules to enable | "all" | "most""
ac_help="$ac_help
  --disable-authn-file    file-based authentication control"
ac_help="$ac_help
  --enable-authn-dbm      DBM-based authentication control"
ac_help="$ac_help
  --enable-authn-anon     anonymous user authentication control"
ac_help="$ac_help
  --enable-authn-dbd      SQL-based authentication control"
ac_help="$ac_help
  --disable-authn-default authentication backstopper"
ac_help="$ac_help
  --enable-authn-alias    auth provider alias"
ac_help="$ac_help
  --disable-authz-host    host-based authorization control"
ac_help="$ac_help
  --disable-authz-groupfile 'require group' authorization control"
ac_help="$ac_help
  --disable-authz-user    'require user' authorization control"
ac_help="$ac_help
  --enable-authz-dbm      DBM-based authorization control"
ac_help="$ac_help
  --enable-authz-owner    'require file-owner' authorization control"
ac_help="$ac_help
  --enable-authnz-ldap    LDAP based authentication"
ac_help="$ac_help
  --disable-authz-default authorization control backstopper"
ac_help="$ac_help
  --disable-auth-basic    basic authentication"
ac_help="$ac_help
  --enable-auth-digest    RFC2617 Digest authentication"
ac_help="$ac_help
  --enable-isapi          isapi extension support"
ac_help="$ac_help
  --enable-file-cache     File cache"
ac_help="$ac_help
  --enable-cache          dynamic file caching"
ac_help="$ac_help
  --enable-disk-cache     disk caching module"
ac_help="$ac_help
  --enable-mem-cache      memory caching module"
ac_help="$ac_help
  --enable-dbd            Apache DBD Framework"
ac_help="$ac_help
  --enable-bucketeer      buckets manipulation filter"
ac_help="$ac_help
  --enable-dumpio         I/O dump filter"
ac_help="$ac_help
  --enable-echo           ECHO server"
ac_help="$ac_help
  --enable-example        example and demo module"
ac_help="$ac_help
  --enable-case-filter    example uppercase conversion filter"
ac_help="$ac_help
  --enable-case-filter-in example uppercase conversion input filter"
ac_help="$ac_help
  --enable-ext-filter     external filter module"
ac_help="$ac_help
  --disable-include       Server Side Includes"
ac_help="$ac_help
  --disable-filter        Smart Filtering"
ac_help="$ac_help
  --enable-substitute     response content rewrite-like filtering"
ac_help="$ac_help
  --disable-charset-lite  character set translation"
ac_help="$ac_help
  --enable-charset-lite   character set translation"
ac_help="$ac_help
  --enable-deflate        Deflate transfer encoding support"
ac_help="$ac_help
  --with-z=DIR            use a specific zlib library"
ac_help="$ac_help
  --enable-ldap           LDAP caching and connection pooling services"
ac_help="$ac_help
  --disable-log-config    logging configuration"
ac_help="$ac_help
  --enable-log-forensic   forensic logging"
ac_help="$ac_help
  --enable-logio          input and output logging"
ac_help="$ac_help
  --disable-env           clearing/setting of ENV vars"
ac_help="$ac_help
  --enable-mime-magic     automagically determining MIME type"
ac_help="$ac_help
  --enable-cern-meta      CERN-type meta files"
ac_help="$ac_help
  --enable-expires        Expires header control"
ac_help="$ac_help
  --enable-headers        HTTP header control"
ac_help="$ac_help
  --enable-ident          RFC 1413 identity check"
ac_help="$ac_help
  --enable-usertrack      user-session tracking"
ac_help="$ac_help
  --enable-unique-id      per-request unique ids"
ac_help="$ac_help
  --disable-setenvif      basing ENV vars on headers"
ac_help="$ac_help
  --enable-version        determining httpd version in config files"
ac_help="$ac_help
  --enable-proxy          Apache proxy module"
ac_help="$ac_help
  --enable-proxy-connect  Apache proxy CONNECT module"
ac_help="$ac_help
  --enable-proxy-ftp      Apache proxy FTP module"
ac_help="$ac_help
  --enable-proxy-http     Apache proxy HTTP module"
ac_help="$ac_help
  --enable-proxy-ajp      Apache proxy AJP module"
ac_help="$ac_help
  --enable-proxy-balancer Apache proxy BALANCER module"
ac_help="$ac_help
  --enable-ssl            SSL/TLS support (mod_ssl)"
ac_help="$ac_help
  --with-sslc=DIR         RSA SSL-C SSL/TLS toolkit"
ac_help="$ac_help
  --with-ssl=DIR          OpenSSL SSL/TLS toolkit"
ac_help="$ac_help
  --enable-distcache      Select distcache support in mod_ssl"
ac_help="$ac_help
  --enable-optional-hook-export example optional hook exporter"
ac_help="$ac_help
  --enable-optional-hook-import example optional hook importer"
ac_help="$ac_help
  --enable-optional-fn-import example optional function importer"
ac_help="$ac_help
  --enable-optional-fn-export example optional function exporter"
ac_help="$ac_help
  --with-mpm=MPM          Choose the process model for Apache to use.
                          MPM={beos|event|worker|prefork|mpmt_os2}"
ac_help="$ac_help
  --enable-static-support Build a statically linked version of the support binaries"
ac_help="$ac_help
  --enable-static-htpasswd Build a statically linked version of htpasswd"
ac_help="$ac_help
  --enable-static-htdigest Build a statically linked version of htdigest"
ac_help="$ac_help
  --enable-static-rotatelogs Build a statically linked version of rotatelogs"
ac_help="$ac_help
  --enable-static-logresolve Build a statically linked version of logresolve"
ac_help="$ac_help
  --enable-static-htdbm   Build a statically linked version of htdbm"
ac_help="$ac_help
  --enable-static-ab      Build a statically linked version of ab"
ac_help="$ac_help
  --enable-static-checkgid Build a statically linked version of checkgid"
ac_help="$ac_help
  --enable-static-htcacheclean Build a statically linked version of htcacheclean"
ac_help="$ac_help
  --enable-static-httxt2dbm Build a statically linked version of httxt2dbm"
ac_help="$ac_help
  --enable-http           HTTP protocol handling"
ac_help="$ac_help
  --disable-mime          mapping of file-extension to MIME"
ac_help="$ac_help
  --with-module=module-type:module-file Enable module-file in the modules/<module-type> directory."
ac_help="$ac_help
  --enable-dav            WebDAV protocol handling"
ac_help="$ac_help
  --disable-status        process/thread monitoring"
ac_help="$ac_help
  --disable-autoindex     directory listing"
ac_help="$ac_help
  --disable-asis          as-is filetypes"
ac_help="$ac_help
  --enable-info           server information"
ac_help="$ac_help
  --enable-suexec         set uid and gid for spawned processes"
ac_help="$ac_help
  --disable-cgid          CGI scripts"
ac_help="$ac_help
  --enable-cgi            CGI scripts"
ac_help="$ac_help
  --disable-cgi           CGI scripts"
ac_help="$ac_help
  --enable-cgid           CGI scripts"
ac_help="$ac_help
  --enable-dav-fs         DAV provider for the filesystem"
ac_help="$ac_help
  --enable-dav-lock       DAV provider for generic locking"
ac_help="$ac_help
  --enable-vhost-alias    mass virtual hosting module"
ac_help="$ac_help
  --disable-negotiation   content negotiation"
ac_help="$ac_help
  --disable-dir           directory request handling"
ac_help="$ac_help
  --enable-imagemap       server-side imagemaps"
ac_help="$ac_help
  --disable-actions       Action triggering on requests"
ac_help="$ac_help
  --enable-speling        correct common URL misspellings"
ac_help="$ac_help
  --disable-userdir       mapping of requests to user-specific directories"
ac_help="$ac_help
  --disable-alias         mapping of requests to different filesystem parts"
ac_help="$ac_help
  --enable-rewrite        rule based URL manipulation"
ac_help="$ac_help
  --enable-so             DSO capability"
ac_help="$ac_help
  --with-program-name     alternate executable name"
ac_help="$ac_help
  --with-suexec-bin       Path to suexec binary"
ac_help="$ac_help
  --with-suexec-caller    User allowed to call SuExec"
ac_help="$ac_help
  --with-suexec-userdir   User subdirectory"
ac_help="$ac_help
  --with-suexec-docroot   SuExec root directory"
ac_help="$ac_help
  --with-suexec-uidmin    Minimal allowed UID"
ac_help="$ac_help
  --with-suexec-gidmin    Minimal allowed GID"
ac_help="$ac_help
  --with-suexec-logfile   Set the logfile"
ac_help="$ac_help
  --with-suexec-safepath  Set the safepath"
ac_help="$ac_help
  --with-suexec-umask     umask for suexec'd process"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
# Maximum number of lines to put in a shell here document.
ac_max_here_lines=12

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.13"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=ABOUT_APACHE

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi




ac_aux_dir=
for ac_dir in build $srcdir/build; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in build $srcdir/build" 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.













 











































































































# Check whether --enable-layout or --disable-layout was given.
if test "${enable_layout+set}" = set; then
  enableval="$enable_layout"
  
  LAYOUT=$enableval

fi


if test -z "$LAYOUT"; then
  LAYOUT="Apache"
fi

  if test ! -f $srcdir/config.layout; then
    echo "** Error: Layout file $srcdir/config.layout not found"
    echo "** Error: Cannot use undefined layout '$LAYOUT'"
    exit 1
  fi
  # Catch layout names including a slash which will otherwise
  # confuse the heck out of the sed script.
  case $LAYOUT in
  */*) 
    echo "** Error: $LAYOUT is not a valid layout name"
    exit 1 ;;
  esac
  pldconf=./config.pld
  
  sed -e "1s/[ 	]*<[lL]ayout[ 	]*$LAYOUT[ 	]*>[ 	]*//;1t" \
      -e "1,/[ 	]*<[lL]ayout[ 	]*$LAYOUT[ 	]*>[ 	]*/d" \
      -e '/[ 	]*<\/Layout>[ 	]*/,$d' \
      -e "s/^[ 	]*//g" \
      -e "s/:[ 	]*/=\'/g" \
      -e "s/[ 	]*$/'/g" \
      $srcdir/config.layout > $pldconf
  layout_name=$LAYOUT
  if test ! -s $pldconf; then
    echo "** Error: unable to find layout $layout_name"
    exit 1
  fi
  . $pldconf
  rm $pldconf
  for var in prefix exec_prefix bindir sbindir libexecdir mandir \
             sysconfdir datadir includedir localstatedir runtimedir \
             logfiledir libdir installbuilddir libsuffix errordir iconsdir htdocsdir cgidir; do
    eval "val=\"\$$var\""
    case $val in
      *+)
        val=`echo $val | sed -e 's;\+$;;'`
        eval "$var=\"\$val\""
        autosuffix=yes
        ;;
      *)
        autosuffix=no
        ;;
    esac
    val=`echo $val | sed -e 's:\(.\)/*$:\1:'`
    val=`echo $val | sed -e 's:[\$]\([a-z_]*\):$\1:g'`
    if test "$autosuffix" = "yes"; then
      if echo $val | grep apache >/dev/null; then
        addtarget=no
      else
        addtarget=yes
      fi
      if test "$addtarget" = "yes"; then
        val="$val/apache2"
      fi
    fi
    eval "$var='$val'"
  done
  


echo $ac_n "checking for chosen layout""... $ac_c" 1>&6
echo "configure:987: checking for chosen layout" >&5
echo "$ac_t""$layout_name" 1>&6



ac_prev=
# Retrieve the command-line arguments.  The eval is needed because
# the arguments are quoted to preserve accuracy.
eval "set x $ac_configure_args"
shift
for ac_option
do
  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  ac_optarg=`expr "x$ac_option" : 'x[^=]*=\(.*\)'`

  case $ac_option in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  esac
done

# Be sure to have absolute paths.
for ac_var in exec_prefix prefix
do
  eval ac_val=$`echo $ac_var`
  case $ac_val in
    [\\/$]* | ?:[\\/]* | NONE | '' ) ;;
    *)  { echo "configure: error: expected an absolute path for --$ac_var: $ac_val" 1>&2; exit 1; };;
  esac
done




  
  
ap_last=
ap_cur="$exec_prefix"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_exec_prefix="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_exec_prefix"
  

  
ap_stripped=`echo $exp_exec_prefix | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_exec_prefix" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_exec_prefix="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_exec_prefix="$exp_exec_prefix"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_exec_prefix"
  


  
  
ap_last=
ap_cur="$bindir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_bindir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_bindir"
  

  
ap_stripped=`echo $exp_bindir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_bindir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_bindir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_bindir="$exp_bindir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_bindir"
  


  
  
ap_last=
ap_cur="$sbindir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_sbindir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_sbindir"
  

  
ap_stripped=`echo $exp_sbindir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_sbindir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_sbindir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_sbindir="$exp_sbindir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_sbindir"
  


  
  
ap_last=
ap_cur="$libdir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_libdir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_libdir"
  

  
ap_stripped=`echo $exp_libdir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_libdir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_libdir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_libdir="$exp_libdir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_libdir"
  


  
  
ap_last=
ap_cur="$libexecdir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_libexecdir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_libexecdir"
  

  
ap_stripped=`echo $exp_libexecdir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_libexecdir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_libexecdir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_libexecdir="$exp_libexecdir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_libexecdir"
  


  
  
ap_last=
ap_cur="$mandir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_mandir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_mandir"
  

  
ap_stripped=`echo $exp_mandir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_mandir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_mandir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_mandir="$exp_mandir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_mandir"
  


  
  
ap_last=
ap_cur="$sysconfdir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_sysconfdir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_sysconfdir"
  

  
ap_stripped=`echo $exp_sysconfdir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_sysconfdir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_sysconfdir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_sysconfdir="$exp_sysconfdir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_sysconfdir"
  


  
  
ap_last=
ap_cur="$datadir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_datadir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_datadir"
  

  
ap_stripped=`echo $exp_datadir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_datadir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_datadir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_datadir="$exp_datadir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_datadir"
  


  
  
ap_last=
ap_cur="$installbuilddir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_installbuilddir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_installbuilddir"
  

  
ap_stripped=`echo $exp_installbuilddir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_installbuilddir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_installbuilddir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_installbuilddir="$exp_installbuilddir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_installbuilddir"
  


  
  
ap_last=
ap_cur="$errordir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_errordir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_errordir"
  

  
ap_stripped=`echo $exp_errordir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_errordir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_errordir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_errordir="$exp_errordir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_errordir"
  


  
  
ap_last=
ap_cur="$iconsdir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_iconsdir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_iconsdir"
  

  
ap_stripped=`echo $exp_iconsdir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_iconsdir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_iconsdir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_iconsdir="$exp_iconsdir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_iconsdir"
  


  
  
ap_last=
ap_cur="$htdocsdir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_htdocsdir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_htdocsdir"
  

  
ap_stripped=`echo $exp_htdocsdir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_htdocsdir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_htdocsdir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_htdocsdir="$exp_htdocsdir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_htdocsdir"
  


  
  
ap_last=
ap_cur="$manualdir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_manualdir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_manualdir"
  

  
ap_stripped=`echo $exp_manualdir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_manualdir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_manualdir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_manualdir="$exp_manualdir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_manualdir"
  


  
  
ap_last=
ap_cur="$cgidir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_cgidir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_cgidir"
  

  
ap_stripped=`echo $exp_cgidir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_cgidir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_cgidir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_cgidir="$exp_cgidir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_cgidir"
  


  
  
ap_last=
ap_cur="$includedir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_includedir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_includedir"
  

  
ap_stripped=`echo $exp_includedir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_includedir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_includedir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_includedir="$exp_includedir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_includedir"
  


  
  
ap_last=
ap_cur="$localstatedir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_localstatedir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_localstatedir"
  

  
ap_stripped=`echo $exp_localstatedir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_localstatedir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_localstatedir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_localstatedir="$exp_localstatedir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_localstatedir"
  


  
  
ap_last=
ap_cur="$runtimedir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_runtimedir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_runtimedir"
  

  
ap_stripped=`echo $exp_runtimedir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_runtimedir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_runtimedir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_runtimedir="$exp_runtimedir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_runtimedir"
  


  
  
ap_last=
ap_cur="$logfiledir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_logfiledir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_logfiledir"
  

  
ap_stripped=`echo $exp_logfiledir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_logfiledir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_logfiledir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_logfiledir="$exp_logfiledir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_logfiledir"
  


  
  
ap_last=
ap_cur="$proxycachedir"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
exp_proxycachedir="${ap_cur}"

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_proxycachedir"
  

  
ap_stripped=`echo $exp_proxycachedir | sed -e "s#^${prefix}##"`
# check if the stripping was successful
if test "x$exp_proxycachedir" != "x${ap_stripped}"; then
    # it was, so strip of any leading slashes
    rel_proxycachedir="`echo ${ap_stripped} | sed -e 's#^/*##'`"
else
    # it wasn't so return the original
    rel_proxycachedir="$exp_proxycachedir"
fi

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rel_proxycachedir"
  





  apr_ste_save_CPPFLAGS="$CPPFLAGS"


  apr_ste_save_CFLAGS="$CFLAGS"


  apr_ste_save_CXXFLAGS="$CXXFLAGS"


  apr_ste_save_LDFLAGS="$LDFLAGS"


  apr_ste_save_LIBS="$LIBS"


  apr_ste_save_INCLUDES="$INCLUDES"



  rm -f config.nice
  cat >config.nice<<EOF
#! /bin/sh
#
# Created by configure

EOF
  if test -n "$CC"; then
    echo "CC=\"$CC\"; export CC" >> config.nice
  fi
  if test -n "$CFLAGS"; then
    echo "CFLAGS=\"$CFLAGS\"; export CFLAGS" >> config.nice
  fi
  if test -n "$CPPFLAGS"; then
    echo "CPPFLAGS=\"$CPPFLAGS\"; export CPPFLAGS" >> config.nice
  fi
  if test -n "$LDFLAGS"; then
    echo "LDFLAGS=\"$LDFLAGS\"; export LDFLAGS" >> config.nice
  fi
  if test -n "$LTFLAGS"; then
    echo "LTFLAGS=\"$LTFLAGS\"; export LTFLAGS" >> config.nice
  fi
  if test -n "$LIBS"; then
    echo "LIBS=\"$LIBS\"; export LIBS" >> config.nice
  fi
  if test -n "$INCLUDES"; then
    echo "INCLUDES=\"$INCLUDES\"; export INCLUDES" >> config.nice
  fi
  if test -n "$NOTEST_CFLAGS"; then
    echo "NOTEST_CFLAGS=\"$NOTEST_CFLAGS\"; export NOTEST_CFLAGS" >> config.nice
  fi
  if test -n "$NOTEST_CPPFLAGS"; then
    echo "NOTEST_CPPFLAGS=\"$NOTEST_CPPFLAGS\"; export NOTEST_CPPFLAGS" >> config.nice
  fi
  if test -n "$NOTEST_LDFLAGS"; then
    echo "NOTEST_LDFLAGS=\"$NOTEST_LDFLAGS\"; export NOTEST_LDFLAGS" >> config.nice
  fi
  if test -n "$NOTEST_LIBS"; then
    echo "NOTEST_LIBS=\"$NOTEST_LIBS\"; export NOTEST_LIBS" >> config.nice
  fi

  # Retrieve command-line arguments.
  eval "set x $0 $ac_configure_args"
  shift

  for arg
  do
    
ap_last=
ap_cur="$arg"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
arg="${ap_cur}"

    echo "\"$arg\" \\" >> config.nice
  done
  echo '"$@"' >> config.nice
  chmod +x config.nice


nl='
'

  echo $ac_n "checking for working mkdir -p""... $ac_c" 1>&6
echo "configure:1791: checking for working mkdir -p" >&5
if eval "test \"`echo '$''{'ac_cv_mkdir_p'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    test -d conftestdir && rm -rf conftestdir
    mkdir -p conftestdir/somedir >/dev/null 2>&1
    if test -d conftestdir/somedir; then
      ac_cv_mkdir_p=yes
    else
      ac_cv_mkdir_p=no
    fi
    rm -rf conftestdir
  
fi

echo "$ac_t""$ac_cv_mkdir_p" 1>&6
  if test "$ac_cv_mkdir_p" = "yes"; then
      mkdir_p="mkdir -p"
  else
      mkdir_p="$top_srcdir/build/mkdir.sh"
  fi





# Do some error checking and defaulting for the host and target type.
# The inputs are:
#    configure --host=HOST --target=TARGET --build=BUILD NONOPT
#
# The rules are:
# 1. You are not allowed to specify --host, --target, and nonopt at the
#    same time.
# 2. Host defaults to nonopt.
# 3. If nonopt is not specified, then host defaults to the current host,
#    as determined by config.guess.
# 4. Target and build default to nonopt.
# 5. If nonopt is not specified, then target and build default to host.

# The aliases save the names the user supplied, while $host etc.
# will get canonicalized.
case $host---$target---$nonopt in
NONE---*---* | *---NONE---* | *---*---NONE) ;;
*) { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; } ;;
esac


# Make sure we can run config.sub.
if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6
echo "configure:1845: checking host system type" >&5

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$host" 1>&6

echo $ac_n "checking target system type""... $ac_c" 1>&6
echo "configure:1866: checking target system type" >&5

target_alias=$target
case "$target_alias" in
NONE)
  case $nonopt in
  NONE) target_alias=$host_alias ;;
  *) target_alias=$nonopt ;;
  esac ;;
esac

target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$target" 1>&6

echo $ac_n "checking build system type""... $ac_c" 1>&6
echo "configure:1884: checking build system type" >&5

build_alias=$build
case "$build_alias" in
NONE)
  case $nonopt in
  NONE) build_alias=$host_alias ;;
  *) build_alias=$nonopt ;;
  esac ;;
esac

build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$build" 1>&6

test "$host_alias" != "$target_alias" &&
  test "$program_prefix$program_suffix$program_transform_name" = \
    NONENONEs,x,x, &&
  program_prefix=${target_alias}-


orig_prefix="$prefix"

echo $ac_n "${nl}Configuring Apache Portable Runtime library ...${nl}"

# Check whether --with-included-apr or --without-included-apr was given.
if test "${with_included_apr+set}" = set; then
  withval="$with_included_apr"
  :
fi


# Only APR 1.x is supported.
apr_version=1

if test "x$with_included_apr" = "xyes"; then
   apr_found=reconfig
   apr_config="$srcdir/srclib/apr/apr-${apr_version}-config"
else 
   
  apr_found="no"

  if test "$target_os" = "os2-emx"; then
    # Scripts don't pass test -x on OS/2
    TEST_X="test -f"
  else
    TEST_X="test -x"
  fi

  acceptable_majors="${apr_version}"

  apr_temp_acceptable_apr_config=""
  for apr_temp_major in $acceptable_majors
  do
    case $apr_temp_major in
      0)
      apr_temp_acceptable_apr_config="$apr_temp_acceptable_apr_config apr-config"
      ;;
      *)
      apr_temp_acceptable_apr_config="$apr_temp_acceptable_apr_config apr-$apr_temp_major-config"
      ;;
    esac
  done

  echo $ac_n "checking for APR""... $ac_c" 1>&6
echo "configure:1951: checking for APR" >&5
  # Check whether --with-apr or --without-apr was given.
if test "${with_apr+set}" = set; then
  withval="$with_apr"
  
    if test "$withval" = "no" || test "$withval" = "yes"; then
      { echo "configure: error: --with-apr requires a directory or file to be provided" 1>&2; exit 1; }
    fi

    for apr_temp_apr_config_file in $apr_temp_acceptable_apr_config
    do
      for lookdir in "$withval/bin" "$withval"
      do
        if $TEST_X "$lookdir/$apr_temp_apr_config_file"; then
          apr_config="$lookdir/$apr_temp_apr_config_file"
          
          apr_found="yes"
          break 2
        fi
      done
    done

    if test "$apr_found" != "yes" && $TEST_X "$withval" && $withval --help > /dev/null 2>&1 ; then
      apr_config="$withval"
      apr_found="yes"
    fi

            if test "$apr_found" != "yes"; then
      { echo "configure: error: the --with-apr parameter is incorrect. It must specify an install prefix, a build directory, or an apr-config file." 1>&2; exit 1; }
    fi
  
else
  
        if test -n "1" && test "1" = "1"; then
      for apr_temp_apr_config_file in $apr_temp_acceptable_apr_config
      do
        if $apr_temp_apr_config_file --help > /dev/null 2>&1 ; then
          apr_config="$apr_temp_apr_config_file"
          
          apr_found="yes"
          break
        else
                    for lookdir in /usr /usr/local /usr/local/apr /opt/apr; do
            if $TEST_X "$lookdir/bin/$apr_temp_apr_config_file"; then
              apr_config="$lookdir/bin/$apr_temp_apr_config_file"
              
              apr_found="yes"
              break 2
            fi
          done
        fi
      done
    fi
        if test "$apr_found" = "no" && test -d ""$srcdir/srclib/apr""; then
      apr_temp_abs_srcdir="`cd "$srcdir/srclib/apr" && pwd`"
      apr_found="reconfig"
      apr_bundled_major="`sed -n '/#define.*APR_MAJOR_VERSION/s/^[^0-9]*\([0-9]*\).*$/\1/p' \""$srcdir/srclib/apr"/include/apr_version.h\"`"
      case $apr_bundled_major in
        "")
          { echo "configure: error: failed to find major version of bundled APR" 1>&2; exit 1; }
        ;;
        0)
          apr_temp_apr_config_file="apr-config"
        ;;
        *)
          apr_temp_apr_config_file="apr-$apr_bundled_major-config"
        ;;
      esac
      if test -n ""./srclib/apr""; then
        apr_config=""./srclib/apr"/$apr_temp_apr_config_file"
      else
        apr_config=""$srcdir/srclib/apr"/$apr_temp_apr_config_file"
      fi
    fi
  
fi


  echo "$ac_t""$apr_found" 1>&6

fi

if test "$apr_found" = "no"; then
  { echo "configure: error: APR not found.  Please read the documentation." 1>&2; exit 1; }
fi

if test "$apr_found" = "reconfig"; then
  
  # save our work to this point; this allows the sub-package to use it
  cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache


  echo "configuring package in srclib/apr now"
  ac_popdir=`pwd`
  apr_config_subdirs="srclib/apr"
  test -d srclib/apr || $mkdir_p srclib/apr
  ac_abs_srcdir=`(cd $srcdir/srclib/apr && pwd)`
  cd srclib/apr

      # A "../" for each directory in /$config_subdirs.
      ac_dots=`echo $apr_config_subdirs|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

  # Make the cache file pathname absolute for the subdirs
  # required to correctly handle subdirs that might actually
  # be symlinks
  case "$cache_file" in
  /*) # already absolute
    ac_sub_cache_file=$cache_file ;;
  *)  # Was relative path.
    ac_sub_cache_file="$ac_popdir/$cache_file" ;;
  esac

  
  apr_configure_args=
  apr_sep=
  for apr_configure_arg in $ac_configure_args
  do
    case "$apr_configure_arg" in
      --enable-layout=*|\'--enable-layout=*)
        continue ;;
    esac
    apr_configure_args="$apr_configure_args$apr_sep'$apr_configure_arg'"
    apr_sep=" "
  done
  

  # autoconf doesn't add --silent to ac_configure_args; explicitly pass it
  test "x$silent" = "xyes" && apr_configure_args="$apr_configure_args --silent"

              if eval $SHELL $ac_abs_srcdir/configure $apr_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_abs_srcdir $apache_apr_flags --prefix=$prefix --exec-prefix=$exec_prefix --libdir=$libdir --includedir=$includedir --bindir=$bindir --datadir=$datadir --with-installbuilddir=$installbuilddir
  then :
    echo "srclib/apr configured properly"
  else
    echo "configure failed for srclib/apr"
    exit 1
  fi

  cd $ac_popdir

  # grab any updates from the sub-package
  if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi


    AP_BUILD_SRCLIB_DIRS="apr $AP_BUILD_SRCLIB_DIRS"
  AP_CLEAN_SRCLIB_DIRS="$AP_CLEAN_SRCLIB_DIRS apr"
fi


  if test -z "$CC"; then
    test "x$silent" != "xyes" && echo "  setting CC to \"`$apr_config --cc`\""
    CC="`$apr_config --cc`"
  fi


  if test -z "$CPP"; then
    test "x$silent" != "xyes" && echo "  setting CPP to \"`$apr_config --cpp`\""
    CPP="`$apr_config --cpp`"
  fi


  if test "x$CFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CFLAGS to \"`$apr_config --cflags`\""
    CFLAGS="`$apr_config --cflags`"
  else
    apr_addto_bugger="`$apr_config --cflags`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CFLAGS"
        CFLAGS="$CFLAGS $i"
      fi
    done
  fi


  if test "x$CPPFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CPPFLAGS to \"`$apr_config --cppflags`\""
    CPPFLAGS="`$apr_config --cppflags`"
  else
    apr_addto_bugger="`$apr_config --cppflags`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CPPFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CPPFLAGS"
        CPPFLAGS="$CPPFLAGS $i"
      fi
    done
  fi


  if test "x$LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"`$apr_config --ldflags`\""
    LDFLAGS="`$apr_config --ldflags`"
  else
    apr_addto_bugger="`$apr_config --ldflags`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
        LDFLAGS="$LDFLAGS $i"
      fi
    done
  fi

SHLIBPATH_VAR=`$apr_config --shlib-path-var`
APR_BINDIR=`$apr_config --bindir`
APR_INCLUDEDIR=`$apr_config --includedir`
APR_VERSION=`$apr_config --version`
APR_CONFIG="$APR_BINDIR/apr-`echo ${APR_VERSION} | sed 's,\..*,,'`-config"

echo $ac_n "${nl}Configuring Apache Portable Runtime Utility library...${nl}"

# Only APR-util 1.x is supported.
apu_version=1

if test "x$with_included_apr" = "xyes"; then
   apu_found=reconfig
   apu_config="${srcdir}/srclib/apr-util/apu-${apu_version}-config"
else 
   
  apu_found="no"

  if test "$target_os" = "os2-emx"; then
    # Scripts don't pass test -x on OS/2
    TEST_X="test -f"
  else
    TEST_X="test -x"
  fi

  acceptable_majors="${apu_version}"

  apu_temp_acceptable_apu_config=""
  for apu_temp_major in $acceptable_majors
  do
    case $apu_temp_major in
      0)
      apu_temp_acceptable_apu_config="$apu_temp_acceptable_apu_config apu-config"
      ;;
      *)
      apu_temp_acceptable_apu_config="$apu_temp_acceptable_apu_config apu-$apu_temp_major-config"
      ;;
    esac
  done

  echo $ac_n "checking for APR-util""... $ac_c" 1>&6
echo "configure:2265: checking for APR-util" >&5
  # Check whether --with-apr-util or --without-apr-util was given.
if test "${with_apr_util+set}" = set; then
  withval="$with_apr_util"
  
    if test "$withval" = "no" || test "$withval" = "yes"; then
      { echo "configure: error: --with-apr-util requires a directory or file to be provided" 1>&2; exit 1; }
    fi

    for apu_temp_apu_config_file in $apu_temp_acceptable_apu_config
    do
      for lookdir in "$withval/bin" "$withval"
      do
        if $TEST_X "$lookdir/$apu_temp_apu_config_file"; then
          apu_config="$lookdir/$apu_temp_apu_config_file"
          
          apu_found="yes"
          break 2
        fi
      done
    done

    if test "$apu_found" != "yes" && $TEST_X "$withval" && $withval --help > /dev/null 2>&1 ; then
      apu_config="$withval"
      apu_found="yes"
    fi

            if test "$apu_found" != "yes"; then
      { echo "configure: error: the --with-apr-util parameter is incorrect. It must specify an install prefix, a build directory, or an apu-config file." 1>&2; exit 1; }
    fi
  
else
  
    if test -n "1" && test "1" = "1"; then
      for apu_temp_apu_config_file in $apu_temp_acceptable_apu_config
      do
        if $apu_temp_apu_config_file --help > /dev/null 2>&1 ; then
          apu_config="$apu_temp_apu_config_file" 
          
          apu_found="yes"
          break
        else
                    for lookdir in /usr /usr/local /usr/local/apr /opt/apr; do
            if $TEST_X "$lookdir/bin/$apu_temp_apu_config_file"; then
              apu_config="$lookdir/bin/$apu_temp_apu_config_file"
              
              apu_found="yes"
              break 2
            fi
          done
        fi
      done
    fi
        if test "$apu_found" = "no" && test -d ""$srcdir/srclib/apr-util""; then
      apu_temp_abs_srcdir="`cd "$srcdir/srclib/apr-util" && pwd`"
      apu_found="reconfig"
      apu_bundled_major="`sed -n '/#define.*APU_MAJOR_VERSION/s/^[^0-9]*\([0-9]*\).*$/\1/p' \""$srcdir/srclib/apr-util"/include/apu_version.h\"`"
      case $apu_bundled_major in
        "")
          { echo "configure: error: failed to find major version of bundled APU" 1>&2; exit 1; }
        ;;
        0)
          apu_temp_apu_config_file="apu-config"
        ;;
        *)
          apu_temp_apu_config_file="apu-$apu_bundled_major-config"
        ;;
      esac
      if test -n ""./srclib/apr-util""; then
        apu_config=""./srclib/apr-util"/$apu_temp_apu_config_file"
      else
        apu_config=""$srcdir/srclib/apr-util"/$apu_temp_apu_config_file"
      fi
    fi
  
fi


  echo "$ac_t""$apu_found" 1>&6

fi

if test "$apu_found" = "no"; then
  { echo "configure: error: APR-util not found.  Please read the documentation." 1>&2; exit 1; }
fi

# Catch some misconfigurations:
case ${apr_found}.${apu_found} in
reconfig.yes)
  { echo "configure: error: Cannot use an external APR-util with the bundled APR" 1>&2; exit 1; }
  ;;
yes.reconfig)
  { echo "configure: error: Cannot use an external APR with the bundled APR-util" 1>&2; exit 1; }
  ;;
esac  

if test "$apu_found" = "reconfig"; then
  
  # save our work to this point; this allows the sub-package to use it
  cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache


  echo "configuring package in srclib/apr-util now"
  ac_popdir=`pwd`
  apr_config_subdirs="srclib/apr-util"
  test -d srclib/apr-util || $mkdir_p srclib/apr-util
  ac_abs_srcdir=`(cd $srcdir/srclib/apr-util && pwd)`
  cd srclib/apr-util

      # A "../" for each directory in /$config_subdirs.
      ac_dots=`echo $apr_config_subdirs|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

  # Make the cache file pathname absolute for the subdirs
  # required to correctly handle subdirs that might actually
  # be symlinks
  case "$cache_file" in
  /*) # already absolute
    ac_sub_cache_file=$cache_file ;;
  *)  # Was relative path.
    ac_sub_cache_file="$ac_popdir/$cache_file" ;;
  esac

  
  apr_configure_args=
  apr_sep=
  for apr_configure_arg in $ac_configure_args
  do
    case "$apr_configure_arg" in
      --enable-layout=*|\'--enable-layout=*)
        continue ;;
    esac
    apr_configure_args="$apr_configure_args$apr_sep'$apr_configure_arg'"
    apr_sep=" "
  done
  

  # autoconf doesn't add --silent to ac_configure_args; explicitly pass it
  test "x$silent" = "xyes" && apr_configure_args="$apr_configure_args --silent"

              if eval $SHELL $ac_abs_srcdir/configure $apr_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_abs_srcdir --with-apr=../apr --prefix=$prefix --exec-prefix=$exec_prefix --libdir=$libdir --includedir=$includedir --bindir=$bindir
  then :
    echo "srclib/apr-util configured properly"
  else
    echo "configure failed for srclib/apr-util"
    exit 1
  fi

  cd $ac_popdir

  # grab any updates from the sub-package
  if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi


    AP_BUILD_SRCLIB_DIRS="$AP_BUILD_SRCLIB_DIRS apr-util"
  AP_CLEAN_SRCLIB_DIRS="apr-util $AP_CLEAN_SRCLIB_DIRS"
fi


  if test "x$LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"`$apu_config --ldflags`\""
    LDFLAGS="`$apu_config --ldflags`"
  else
    apr_addto_bugger="`$apu_config --ldflags`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
        LDFLAGS="$LDFLAGS $i"
      fi
    done
  fi

APU_BINDIR=`$apu_config --bindir`
APU_INCLUDEDIR=`$apu_config --includedir`
APU_VERSION=`$apu_config --version`
APU_CONFIG="$APU_BINDIR/apu-`echo ${APU_VERSION} | sed 's,\..*,,'`-config"

# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2502: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2532: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2583: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2615: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 2626 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:2631: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2657: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:2662: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2671: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:2690: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:2722: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 2737 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2743: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 2754 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2760: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 2771 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2777: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6


if test "x${cache_file}" = "x/dev/null"; then
  # Likewise, ensure that CC and CPP are passed through to the pcre
  # configure script iff caching is disabled (the autoconf 2.5x default).
  export CC; export CPP
fi

abs_srcdir=`(cd $srcdir && pwd)`
abs_builddir=`pwd`

# Check whether --with-pcre or --without-pcre was given.
if test "${with_pcre+set}" = set; then
  withval="$with_pcre"
  :
fi


case $with_pcre in
yes) # Extract the first word of "pcre-config", so it can be a program name with args.
set dummy pcre-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2822: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PCRE_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PCRE_CONFIG" in
  /*)
  ac_cv_path_PCRE_CONFIG="$PCRE_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PCRE_CONFIG="$PCRE_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PCRE_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PCRE_CONFIG" && ac_cv_path_PCRE_CONFIG="false"
  ;;
esac
fi
PCRE_CONFIG="$ac_cv_path_PCRE_CONFIG"
if test -n "$PCRE_CONFIG"; then
  echo "$ac_t""$PCRE_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
 /*) if test -d "$with_pcre" && test -x "$with_pcre/bin/pcre-config"; then
       PCRE_CONFIG=$with_pcre/bin/pcre-config
     elif test -x "$with_pcre"; then
       PCRE_CONFIG=$with_pcre
     fi

     if $PCRE_CONFIG --version >/dev/null 2>&1; then :; else
       { echo "configure: error: Did not find pcre-config script at $PCRE_CONFIG" 1>&2; exit 1; }
     fi
     ;;
*) PCRE_CONFIG=false ;;
esac

if test "$PCRE_CONFIG" != "false"; then
  AC_MSG_NOTICE(Using external PCRE library from $PCRE_CONFIG)
  
  if test "x$CFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CFLAGS to \"`$PCRE_CONFIG --cflags`\""
    CFLAGS="`$PCRE_CONFIG --cflags`"
  else
    apr_addto_bugger="`$PCRE_CONFIG --cflags`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CFLAGS"
        CFLAGS="$CFLAGS $i"
      fi
    done
  fi

  
  if test "x$LIBS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LIBS to \"`$PCRE_CONFIG --libs`\""
    LIBS="`$PCRE_CONFIG --libs`"
  else
    apr_addto_bugger="`$PCRE_CONFIG --libs`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LIBS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LIBS"
        LIBS="$LIBS $i"
      fi
    done
  fi

else
  # Build the bundled PCRE
  AC_MSG_NOTICE(Configuring PCRE regular expression library)

  
  # save our work to this point; this allows the sub-package to use it
  cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache


  echo "configuring package in srclib/pcre now"
  ac_popdir=`pwd`
  apr_config_subdirs="srclib/pcre"
  test -d srclib/pcre || $mkdir_p srclib/pcre
  ac_abs_srcdir=`(cd $srcdir/srclib/pcre && pwd)`
  cd srclib/pcre

      # A "../" for each directory in /$config_subdirs.
      ac_dots=`echo $apr_config_subdirs|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`

  # Make the cache file pathname absolute for the subdirs
  # required to correctly handle subdirs that might actually
  # be symlinks
  case "$cache_file" in
  /*) # already absolute
    ac_sub_cache_file=$cache_file ;;
  *)  # Was relative path.
    ac_sub_cache_file="$ac_popdir/$cache_file" ;;
  esac

  apr_configure_args=$ac_configure_args

  # autoconf doesn't add --silent to ac_configure_args; explicitly pass it
  test "x$silent" = "xyes" && apr_configure_args="$apr_configure_args --silent"

              if eval $SHELL $ac_abs_srcdir/configure $apr_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_abs_srcdir --prefix=$prefix --exec-prefix=$exec_prefix --libdir=$libdir --includedir=$includedir --bindir=$bindir
  then :
    echo "srclib/pcre configured properly"
  else
    echo "configure failed for srclib/pcre"
    exit 1
  fi

  cd $ac_popdir

  # grab any updates from the sub-package
  if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi



  
  if test "x$AP_LIBS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting AP_LIBS to \"$abs_builddir/srclib/pcre/libpcre.la\""
    AP_LIBS="$abs_builddir/srclib/pcre/libpcre.la"
  else
    apr_addto_bugger="$abs_builddir/srclib/pcre/libpcre.la"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $AP_LIBS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to AP_LIBS"
        AP_LIBS="$AP_LIBS $i"
      fi
    done
  fi

  
  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_builddir)/srclib/pcre\""
    INCLUDES="-I\$(top_builddir)/srclib/pcre"
  else
    apr_addto_bugger="-I\$(top_builddir)/srclib/pcre"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi


  AP_BUILD_SRCLIB_DIRS="$AP_BUILD_SRCLIB_DIRS pcre"
  AP_CLEAN_SRCLIB_DIRS="$AP_CLEAN_SRCLIB_DIRS pcre" 
fi

echo $ac_n "${nl}Configuring Apache httpd ...${nl}"



  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I.\""
    INCLUDES="-I."
  else
    apr_addto_bugger="-I."
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi


if test "$abs_builddir" != "$abs_srcdir"; then
  
  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_builddir)/include\""
    INCLUDES="-I\$(top_builddir)/include"
  else
    apr_addto_bugger="-I\$(top_builddir)/include"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi

fi


  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_srcdir)/os/\$(OS_DIR) -I\$(top_srcdir)/server/mpm/\$(MPM_SUBDIR_NAME) -I\$(top_srcdir)/modules/http -I\$(top_srcdir)/modules/filters -I\$(top_srcdir)/modules/proxy -I\$(top_srcdir)/include -I\$(top_srcdir)/modules/generators -I\$(top_srcdir)/modules/mappers -I\$(top_srcdir)/modules/database\""
    INCLUDES="-I\$(top_srcdir)/os/\$(OS_DIR) -I\$(top_srcdir)/server/mpm/\$(MPM_SUBDIR_NAME) -I\$(top_srcdir)/modules/http -I\$(top_srcdir)/modules/filters -I\$(top_srcdir)/modules/proxy -I\$(top_srcdir)/include -I\$(top_srcdir)/modules/generators -I\$(top_srcdir)/modules/mappers -I\$(top_srcdir)/modules/database"
  else
    apr_addto_bugger="-I\$(top_srcdir)/os/\$(OS_DIR) -I\$(top_srcdir)/server/mpm/\$(MPM_SUBDIR_NAME) -I\$(top_srcdir)/modules/http -I\$(top_srcdir)/modules/filters -I\$(top_srcdir)/modules/proxy -I\$(top_srcdir)/include -I\$(top_srcdir)/modules/generators -I\$(top_srcdir)/modules/mappers -I\$(top_srcdir)/modules/database"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi


# apr/apr-util --includes may pick up system paths for dependent
# libraries, so ensure these are later in INCLUDES than local source
# directories.

  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"`$apr_config --includes`\""
    INCLUDES="`$apr_config --includes`"
  else
    apr_addto_bugger="`$apr_config --includes`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi


  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"`$apu_config --includes`\""
    INCLUDES="`$apu_config --includes`"
  else
    apr_addto_bugger="`$apu_config --includes`"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi


echo $ac_n "${nl}Applying OS-specific hints for httpd ...${nl}"

case $host in
  *os2*)
      # Use a custom made libtool replacement
      echo "using aplibtool"
      LIBTOOL="$abs_srcdir/srclib/apr/build/aplibtool"
      SH_LIBTOOL="$LIBTOOL --shared --export-all"
      SH_LIBS="\$(ALL_LIBS)"
      CORE_IMPLIB_FILE="ApacheCoreOS2.la"
      CORE_IMPLIB="$abs_srcdir/server/$CORE_IMPLIB_FILE"
      MK_IMPLIB="emximp"
      other_targets="$other_targets os2core"
      INSTALL_PROG_FLAGS="-e .exe"
      SHLTCFLAGS=""
      LTCFLAGS=""
      ;;
  *)
      if test "x$LTFLAGS" = "x"; then
          LTFLAGS='--silent'
      fi
      my_libtool=`$apr_config --apr-libtool`
      LIBTOOL="$my_libtool \$(LTFLAGS)"
      libtoolversion=`$my_libtool --version`
      case $libtoolversion in
          *1.[45]*)
              SH_LIBTOOL='$(LIBTOOL)'
              SHLTCFLAGS="-prefer-pic"
              LTCFLAGS="-prefer-non-pic -static"
              ;;
          *)
              SH_LIBTOOL='$(SHELL) $(top_builddir)/shlibtool $(LTFLAGS)'
              SHLTCFLAGS=""
              LTCFLAGS=""
              ;;
      esac
      ;;
esac

  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SHLTCFLAGS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST LTCFLAGS"
  


case $host in
  *-apple-aux3*)
      
  test "x$silent" != "xyes" && echo "  forcing APACHE_MPM to \"prefork\""
  APACHE_MPM="prefork"

      
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      ;;
  *-beos*)
      
  test "x$silent" != "xyes" && echo "  forcing APACHE_MPM to \"beos\""
  APACHE_MPM="beos"

      
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      ;;
  *os2-emx*)
      
  test "x$silent" != "xyes" && echo "  forcing APACHE_MPM to \"mpmt_os2\""
  APACHE_MPM="mpmt_os2"

      
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      ;;
  *-linux-*)
      case `uname -r` in
        2.[2-9]* ) 
            
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

            ;;
        * )
            ;;
      esac
      ;;
  *486-*-bsdi* | *-netbsd* | *-freebsd* | *-apple-darwin* | *-dec-osf* | *-qnx)
      
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      ;;
  *-solaris2*)
            ap_platform_runtime_link_flag="-R"
                  case `uname -r` in
        5.567*)
            ;;
        * )
            
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

            ;;
      esac
      ;;
  *cygwin*)
      
  test "x$silent" != "xyes" && echo "  forcing APACHE_MPM to \"prefork\""
  APACHE_MPM="prefork"

      
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      ;;
  *aix*)
      aixver=`echo $host | sed 's/^[^0-9]*//' | sed 's/\.//g'`
      if test $aixver -ge 4320; then
        
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      fi
      ;;
  *os390*)
      
  test "x$silent" != "xyes" && echo "  forcing SINGLE_LISTEN_UNSERIALIZED_ACCEPT to \"1\""
  SINGLE_LISTEN_UNSERIALIZED_ACCEPT="1"

      ;;
esac


  test "x$silent" != "xyes" && echo "  forcing AP_NONBLOCK_WHEN_MULTI_LISTEN to \"1\""
  AP_NONBLOCK_WHEN_MULTI_LISTEN="1"




# Extract the first word of "rm", so it can be a program name with args.
set dummy rm; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3322: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_RM'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$RM" in
  /*)
  ac_cv_path_RM="$RM" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_RM="$RM" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_RM="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
RM="$ac_cv_path_RM"
if test -n "$RM"; then
  echo "$ac_t""$RM" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

# Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3357: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKGCONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKGCONFIG" in
  /*)
  ac_cv_path_PKGCONFIG="$PKGCONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKGCONFIG="$PKGCONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKGCONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
PKGCONFIG="$ac_cv_path_PKGCONFIG"
if test -n "$PKGCONFIG"; then
  echo "$ac_t""$PKGCONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

# Extract the first word of "rsync", so it can be a program name with args.
set dummy rsync; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3392: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_RSYNC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$RSYNC" in
  /*)
  ac_cv_path_RSYNC="$RSYNC" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_RSYNC="$RSYNC" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_RSYNC="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
RSYNC="$ac_cv_path_RSYNC"
if test -n "$RSYNC"; then
  echo "$ac_t""$RSYNC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

for ac_prog in mawk gawk nawk awk
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3429: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AWK"; then
  ac_cv_prog_AWK="$AWK" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AWK="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AWK="$ac_cv_prog_AWK"
if test -n "$AWK"; then
  echo "$ac_t""$AWK" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AWK" && break
done

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:3459: checking whether ln -s works" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test $host != $build; then
  ac_tool_prefix=${host_alias}-
else
  ac_tool_prefix=
fi

# Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
set dummy ${ac_tool_prefix}ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3488: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_RANLIB"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3520: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB="true"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  RANLIB="true"
fi
fi

for ac_prog in lynx links elinks
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3557: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LYNX_PATH'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LYNX_PATH"; then
  ac_cv_prog_LYNX_PATH="$LYNX_PATH" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LYNX_PATH="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LYNX_PATH="$ac_cv_prog_LYNX_PATH"
if test -n "$LYNX_PATH"; then
  echo "$ac_t""$LYNX_PATH" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LYNX_PATH" && break
done
test -n "$LYNX_PATH" || LYNX_PATH="lynx"


# Hard-coded install programs
MKINSTALLDIRS="\$(abs_srcdir)/build/mkdir.sh"
INSTALL="\$(LIBTOOL) --mode=install \$(abs_srcdir)/build/install.sh -c"

  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MKINSTALLDIRS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST INSTALL"
  


echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:3601: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 3603 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


echo $ac_n "checking for POSIXized ISC""... $ac_c" 1>&6
echo "configure:3625: checking for POSIXized ISC" >&5
if test -d /etc/conf/kconfig.d &&
  grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
then
  echo "$ac_t""yes" 1>&6
  ISC=yes # If later tests want to check for ISC.
  cat >> confdefs.h <<\EOF
#define _POSIX_SOURCE 1
EOF

  if test "$GCC" = yes; then
    CC="$CC -posix"
  else
    CC="$CC -Xp"
  fi
else
  echo "$ac_t""no" 1>&6
  ISC=
fi

ac_safe=`echo "minix/config.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for minix/config.h""... $ac_c" 1>&6
echo "configure:3647: checking for minix/config.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3652 "configure"
#include "confdefs.h"
#include <minix/config.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3657: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MINIX=yes
else
  echo "$ac_t""no" 1>&6
MINIX=
fi

if test "$MINIX" = yes; then
  cat >> confdefs.h <<\EOF
#define _POSIX_SOURCE 1
EOF

  cat >> confdefs.h <<\EOF
#define _POSIX_1_SOURCE 2
EOF

  cat >> confdefs.h <<\EOF
#define _MINIX 1
EOF

fi


# Ensure that satisfactory versions of apr and apr-util are 
# found if external copies are configured.
if test "${apr_found}" = "yes"; then
  # Require APR 1.2.x otherwise fail
  





ap_ckver_CPPFLAGS="$CPPFLAGS"
CPPFLAGS="$CPPFLAGS `$apr_config --includes`"

echo $ac_n "checking for APR version 1.2.0 or later""... $ac_c" 1>&6
echo "configure:3709: checking for APR version 1.2.0 or later" >&5
if eval "test \"`echo '$''{'ap_cv_aprver12'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 3715 "configure"
#include "confdefs.h"

#include <apr_version.h>
#if APR_MAJOR_VERSION > 1 || (APR_MAJOR_VERSION == 1 && APR_MINOR_VERSION >= 2)
good
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "good" >/dev/null 2>&1; then
  rm -rf conftest*
  ap_cv_aprver12=yes
else
  rm -rf conftest*
  ap_cv_aprver12=no
fi
rm -f conftest*

fi

echo "$ac_t""$ap_cv_aprver12" 1>&6

if test "$ap_cv_aprver12" = "yes"; then
  :
else
  { echo "configure: error: APR version 1.2.0 or later is required" 1>&2; exit 1; }
fi

CPPFLAGS="$ap_ckver_CPPFLAGS"






fi

if test "${apu_found}" = "yes"; then
  # Require APR-util 1.2.x otherwise fail
  





ap_ckver_CPPFLAGS="$CPPFLAGS"
CPPFLAGS="$CPPFLAGS `$apu_config --includes`"

echo $ac_n "checking for APR-util version 1.2.0 or later""... $ac_c" 1>&6
echo "configure:3765: checking for APR-util version 1.2.0 or later" >&5
if eval "test \"`echo '$''{'ap_cv_apuver12'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 3771 "configure"
#include "confdefs.h"

#include <apu_version.h>
#if APU_MAJOR_VERSION > 1 || (APU_MAJOR_VERSION == 1 && APU_MINOR_VERSION >= 2)
good
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "good" >/dev/null 2>&1; then
  rm -rf conftest*
  ap_cv_apuver12=yes
else
  rm -rf conftest*
  ap_cv_apuver12=no
fi
rm -f conftest*

fi

echo "$ac_t""$ap_cv_apuver12" 1>&6

if test "$ap_cv_apuver12" = "yes"; then
  :
else
  { echo "configure: error: APR-util version 1.2.0 or later is required" 1>&2; exit 1; }
fi

CPPFLAGS="$ap_ckver_CPPFLAGS"






fi


if test "$GCC" = "yes"; then
  MKDEP='$(CC) -MM'
else
  rm -f conftest.c
  cat > conftest.c <<EOF
#include <sys/types.h>
  int main() { return 0; }
EOF
  MKDEP="true"
  for i in "$CC -MM" "$CC -M" "$CPP -MM" "$CPP -M" "cpp -M"; do
    echo $ac_n "checking if $i can create proper make dependencies""... $ac_c" 1>&6
echo "configure:3821: checking if $i can create proper make dependencies" >&5
    if $i conftest.c 2>/dev/null | grep 'conftest.o: conftest.c' >/dev/null; then
      MKDEP=$i
      echo "$ac_t""yes" 1>&6
      break;
    fi
    echo "$ac_t""no" 1>&6
  done
  rm -f conftest.c
fi








echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:3840: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3845 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3853: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 3870 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 3888 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 3909 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:3920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

for ac_hdr in \
string.h \
limits.h \
unistd.h \
sys/socket.h \
pwd.h \
grp.h \
strings.h \
sys/prctl.h \
sys/processor.h \
sys/sem.h

do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:3958: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3963 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3968: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
echo "configure:3995: checking for sys/wait.h that is POSIX.1 compatible" >&5
if eval "test \"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 4000 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/wait.h>
#ifndef WEXITSTATUS
#define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
#endif
#ifndef WIFEXITED
#define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
#endif
int main() {
int s;
wait (&s);
s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
; return 0; }
EOF
if { (eval echo configure:4016: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_sys_wait_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_sys_wait_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_sys_wait_h" 1>&6
if test $ac_cv_header_sys_wait_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_SYS_WAIT_H 1
EOF

fi



echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:4039: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 4044 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:4093: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.h <<\EOF
#define const 
EOF

fi



echo $ac_n "checking for library containing sqrt""... $ac_c" 1>&6
echo "configure:4116: checking for library containing sqrt" >&5
if eval "test \"`echo '$''{'ac_cv_search_sqrt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_func_search_save_LIBS="$LIBS"
ac_cv_search_sqrt="no"
cat > conftest.$ac_ext <<EOF
#line 4123 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqrt();

int main() {
sqrt()
; return 0; }
EOF
if { (eval echo configure:4134: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_sqrt="none required"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
test "$ac_cv_search_sqrt" = "no" && for i in m; do
LIBS="-l$i  $ac_func_search_save_LIBS"
cat > conftest.$ac_ext <<EOF
#line 4145 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqrt();

int main() {
sqrt()
; return 0; }
EOF
if { (eval echo configure:4156: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_sqrt="-l$i"
break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
LIBS="$ac_func_search_save_LIBS"
fi

echo "$ac_t""$ac_cv_search_sqrt" 1>&6
if test "$ac_cv_search_sqrt" != "no"; then
  test "$ac_cv_search_sqrt" = "none required" || LIBS="$ac_cv_search_sqrt $LIBS"
  
else :
  
fi


for ac_func in \
getpwnam \
getgrnam \
initgroups \
bindprocessor \
prctl \
timegm \
getpgid

do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:4189: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 4194 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:4217: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




echo $ac_n "checking for void pointer length""... $ac_c" 1>&6
echo "configure:4245: checking for void pointer length" >&5
if eval "test \"`echo '$''{'ap_void_ptr_lt_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ap_void_ptr_lt_long=yes
else
  cat > conftest.$ac_ext <<EOF
#line 4253 "configure"
#include "confdefs.h"

int main(void)
{
    return sizeof(void *) < sizeof(long); 
}
EOF
if { (eval echo configure:4261: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ap_void_ptr_lt_long=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ap_void_ptr_lt_long=yes
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ap_void_ptr_lt_long" 1>&6

if test "$ap_void_ptr_lt_long" = "yes"; then
    { echo "configure: error: Size of "void *" is less than size of "long"" 1>&2; exit 1; }
fi


echo $ac_n "checking for tm_gmtoff in struct tm""... $ac_c" 1>&6
echo "configure:4283: checking for tm_gmtoff in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_gmtoff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 4288 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm tm; tm.tm_gmtoff;
; return 0; }
EOF
if { (eval echo configure:4296: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_gmtoff" 1>&6
if test "$ac_cv_struct_tm_gmtoff" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GMTOFF 1
EOF

fi


case $host in
    *aix*)
        # for 32-bit builds, increase MAXDATA to allow lots of threads
        if test x$OBJECT_MODE != x64; then
            OS_SPECIFIC_VARS="LDR_CNTRL=\"MAXDATA=0x80000000\" ; export LDR_CNTRL ;"
        fi
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS AIXTHREAD_SCOPE=S ; export AIXTHREAD_SCOPE"
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS ; AIXTHREAD_MUTEX_DEBUG=OFF ; export AIXTHREAD_MUTEX_DEBUG"
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS ; AIXTHREAD_RWLOCK_DEBUG=OFF ; export AIXTHREAD_RWLOCK_DEBUG"
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS ; AIXTHREAD_COND_DEBUG=OFF ; export AIXTHREAD_COND_DEBUG"
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS ; SPINLOOPTIME=1000 ; export SPINLOOPTIME"
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS ; YIELDLOOPTIME=8 ; export YIELDLOOPTIME"
        OS_SPECIFIC_VARS="$OS_SPECIFIC_VARS ; MALLOCMULTIHEAP=considersize,heaps:8 ; export MALLOCMULTIHEAP"
        ;;
    *os390*)
        OS_SPECIFIC_VARS="export _CEE_RUNOPTS=\"STACK(,,ANY)\" ; export _EDC_ADD_ERRNO2=1"
        ;;
    *)
        OS_SPECIFIC_VARS=""
esac
      
# Check whether --with-port or --without-port was given.
if test "${with_port+set}" = set; then
  withval="$with_port"
  if test "$withval" = "yes"; then { echo "configure: error: 'option --with-port requires a value (the TCP port number)'" 1>&2; exit 1; }; else PORT="$withval"; fi
else
  PORT=80
fi


# Check whether --with-sslport or --without-sslport was given.
if test "${with_sslport+set}" = set; then
  withval="$with_sslport"
  if test "$withval" = "yes"; then { echo "configure: error: 'option --with-sslport requires a value (the SSL TCP port number)'" 1>&2; exit 1; }; else SSLPORT="$withval"; fi
else
  SSLPORT=443
fi



apr_old_cppflags=$CPPFLAGS
CPPFLAGS="$CPPFLAGS $INCLUDES"
cat > conftest.$ac_ext <<EOF
#line 4360 "configure"
#include "confdefs.h"

#include <apr.h>
#if APR_HAVE_IPV6
YES_IS_DEFINED
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "YES_IS_DEFINED" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_define_APR_HAVE_IPV6=yes
else
  rm -rf conftest*
  ac_cv_define_APR_HAVE_IPV6=no
fi
rm -f conftest*

CPPFLAGS=$apr_old_cppflags


# Check whether --enable-v4-mapped or --disable-v4-mapped was given.
if test "${enable_v4_mapped+set}" = set; then
  enableval="$enable_v4_mapped"
   
  v4mapped=$enableval

else
  
    case $host in
    *freebsd5*|*netbsd*|*openbsd*)
        v4mapped=no
        ;;
    *)
        v4mapped=yes
        ;;
esac

fi


if test $v4mapped = "yes" -a $ac_cv_define_APR_HAVE_IPV6 = "yes"; then
    cat >> confdefs.h <<\EOF
#define AP_ENABLE_V4_MAPPED 1
EOF

fi

# Check whether --enable-exception-hook or --disable-exception-hook was given.
if test "${enable_exception_hook+set}" = set; then
  enableval="$enable_exception_hook"
  
    cat >> confdefs.h <<\EOF
#define AP_ENABLE_EXCEPTION_HOOK 1
EOF


fi

# Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.
if test "${enable_maintainer_mode+set}" = set; then
  enableval="$enable_maintainer_mode"
  
  
  if test "x$CPPFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CPPFLAGS to \"-DAP_DEBUG\""
    CPPFLAGS="-DAP_DEBUG"
  else
    apr_addto_bugger="-DAP_DEBUG"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CPPFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CPPFLAGS"
        CPPFLAGS="$CPPFLAGS $i"
      fi
    done
  fi


fi

# Check whether --enable-pie or --disable-pie was given.
if test "${enable_pie+set}" = set; then
  enableval="$enable_pie"
  :
fi

if test "$enable_pie" = "yes"; then
   echo $ac_n "checking whether $CC accepts PIE flags""... $ac_c" 1>&6
echo "configure:4456: checking whether $CC accepts PIE flags" >&5
if eval "test \"`echo '$''{'ap_cv_cc_pie'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
     save_CFLAGS=$CFLAGS
     save_LDFLAGS=$LDFLAGS
     CFLAGS="$CFLAGS -fPIE"
     LDFLAGS="$LDFLAGS -pie"
     if test "$cross_compiling" = yes; then
  ap_cv_cc_pie=yes
else
  cat > conftest.$ac_ext <<EOF
#line 4469 "configure"
#include "confdefs.h"
static int foo[30000]; int main () { return 0; }
EOF
if { (eval echo configure:4473: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ap_cv_cc_pie=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ap_cv_cc_pie=no
fi
rm -fr conftest*
fi

     CFLAGS=$save_CFLAGS
     LDFLAGS=$save_LDFLAGS
   
fi

echo "$ac_t""$ap_cv_cc_pie" 1>&6
   if test "$ap_cv_cc_pie" = "yes"; then
     PICFLAGS="-fPIE"
     PILDFLAGS="-pie"
   else
     { echo "configure: error: --enable-pie requested but $CC failed using PIE flags" 1>&2; exit 1; }
   fi
fi



prefix="$orig_prefix"

  module_selection=default
  module_default=yes

  # Check whether --enable-modules or --disable-modules was given.
if test "${enable_modules+set}" = set; then
  enableval="$enable_modules"
  
    for i in $enableval; do
      if test "$i" = "all" -o "$i" = "most"; then
        module_selection=$i
      else
        i=`echo $i | sed 's/-/_/g'`
        eval "enable_$i=yes"
      fi
    done
  
fi

  
  # Check whether --enable-mods-shared or --disable-mods-shared was given.
if test "${enable_mods_shared+set}" = set; then
  enableval="$enable_mods_shared"
  
    for i in $enableval; do
      if test "$i" = "all" -o "$i" = "most"; then
        module_selection=$i
        module_default=shared
      else
        i=`echo $i | sed 's/-/_/g'`
    	eval "enable_$i=shared"
      fi
    done
  
fi







  current_dir=aaa
  modpath_current=modules/aaa
  modpath_static=
  modpath_shared=
  test -d aaa || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_authn_file""... $ac_c" 1>&6
echo "configure:4554: checking whether to enable mod_authn_file" >&5
    # Check whether --enable-authn-file or --disable-authn-file was given.
if test "${enable_authn_file+set}" = set; then
  enableval="$enable_authn_file"
  :
else
  enable_authn_file=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authn_file" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authn_file" = "static"; then
    enable_authn_file=yes
  elif test "$enable_authn_file" = "yes"; then
    enable_authn_file=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authn_file" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authn_file=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authn_file" != "yes"; then
      enable_authn_file=no
    fi
  elif test "$enable_authn_file" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authn_file=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authn_file=no
    fi
  fi
  if test "$enable_authn_file" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authn_file$_apmod_extra_msg" 1>&6
  if test "$enable_authn_file" != "no"; then
    case "$enable_authn_file" in
    shared*)
      enable_authn_file=`echo $enable_authn_file|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authn_file"
      ;;
    *)
      MODLIST="$MODLIST authn_file"
      if test "authn_file" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authn_file.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authn_file.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHN_FILE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authn_file.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_FILE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHN_FILE_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authn_dbm""... $ac_c" 1>&6
echo "configure:4647: checking whether to enable mod_authn_dbm" >&5
    # Check whether --enable-authn-dbm or --disable-authn-dbm was given.
if test "${enable_authn_dbm+set}" = set; then
  enableval="$enable_authn_dbm"
  :
else
  enable_authn_dbm=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authn_dbm" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authn_dbm" = "static"; then
    enable_authn_dbm=yes
  elif test "$enable_authn_dbm" = "yes"; then
    enable_authn_dbm=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authn_dbm" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authn_dbm=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authn_dbm" != "yes"; then
      enable_authn_dbm=no
    fi
  elif test "$enable_authn_dbm" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authn_dbm=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authn_dbm=no
    fi
  fi
  if test "$enable_authn_dbm" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authn_dbm$_apmod_extra_msg" 1>&6
  if test "$enable_authn_dbm" != "no"; then
    case "$enable_authn_dbm" in
    shared*)
      enable_authn_dbm=`echo $enable_authn_dbm|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authn_dbm"
      ;;
    *)
      MODLIST="$MODLIST authn_dbm"
      if test "authn_dbm" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authn_dbm.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authn_dbm.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHN_DBM_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authn_dbm.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_DBM_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHN_DBM_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authn_anon""... $ac_c" 1>&6
echo "configure:4740: checking whether to enable mod_authn_anon" >&5
    # Check whether --enable-authn-anon or --disable-authn-anon was given.
if test "${enable_authn_anon+set}" = set; then
  enableval="$enable_authn_anon"
  :
else
  enable_authn_anon=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authn_anon" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authn_anon" = "static"; then
    enable_authn_anon=yes
  elif test "$enable_authn_anon" = "yes"; then
    enable_authn_anon=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authn_anon" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authn_anon=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authn_anon" != "yes"; then
      enable_authn_anon=no
    fi
  elif test "$enable_authn_anon" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authn_anon=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authn_anon=no
    fi
  fi
  if test "$enable_authn_anon" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authn_anon$_apmod_extra_msg" 1>&6
  if test "$enable_authn_anon" != "no"; then
    case "$enable_authn_anon" in
    shared*)
      enable_authn_anon=`echo $enable_authn_anon|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authn_anon"
      ;;
    *)
      MODLIST="$MODLIST authn_anon"
      if test "authn_anon" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authn_anon.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authn_anon.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHN_ANON_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authn_anon.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_ANON_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHN_ANON_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authn_dbd""... $ac_c" 1>&6
echo "configure:4833: checking whether to enable mod_authn_dbd" >&5
    # Check whether --enable-authn-dbd or --disable-authn-dbd was given.
if test "${enable_authn_dbd+set}" = set; then
  enableval="$enable_authn_dbd"
  :
else
  enable_authn_dbd=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authn_dbd" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authn_dbd" = "static"; then
    enable_authn_dbd=yes
  elif test "$enable_authn_dbd" = "yes"; then
    enable_authn_dbd=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authn_dbd" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authn_dbd=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authn_dbd" != "yes"; then
      enable_authn_dbd=no
    fi
  elif test "$enable_authn_dbd" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authn_dbd=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authn_dbd=no
    fi
  fi
  if test "$enable_authn_dbd" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authn_dbd$_apmod_extra_msg" 1>&6
  if test "$enable_authn_dbd" != "no"; then
    case "$enable_authn_dbd" in
    shared*)
      enable_authn_dbd=`echo $enable_authn_dbd|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authn_dbd"
      ;;
    *)
      MODLIST="$MODLIST authn_dbd"
      if test "authn_dbd" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authn_dbd.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authn_dbd.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHN_DBD_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authn_dbd.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_DBD_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHN_DBD_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_authn_default""... $ac_c" 1>&6
echo "configure:4927: checking whether to enable mod_authn_default" >&5
    # Check whether --enable-authn-default or --disable-authn-default was given.
if test "${enable_authn_default+set}" = set; then
  enableval="$enable_authn_default"
  :
else
  enable_authn_default=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authn_default" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authn_default" = "static"; then
    enable_authn_default=yes
  elif test "$enable_authn_default" = "yes"; then
    enable_authn_default=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authn_default" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authn_default=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authn_default" != "yes"; then
      enable_authn_default=no
    fi
  elif test "$enable_authn_default" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authn_default=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authn_default=no
    fi
  fi
  if test "$enable_authn_default" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authn_default$_apmod_extra_msg" 1>&6
  if test "$enable_authn_default" != "no"; then
    case "$enable_authn_default" in
    shared*)
      enable_authn_default=`echo $enable_authn_default|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authn_default"
      ;;
    *)
      MODLIST="$MODLIST authn_default"
      if test "authn_default" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authn_default.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authn_default.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHN_DEFAULT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authn_default.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_DEFAULT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHN_DEFAULT_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_authn_alias""... $ac_c" 1>&6
echo "configure:5021: checking whether to enable mod_authn_alias" >&5
    # Check whether --enable-authn-alias or --disable-authn-alias was given.
if test "${enable_authn_alias+set}" = set; then
  enableval="$enable_authn_alias"
  :
else
  enable_authn_alias=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authn_alias" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authn_alias" = "static"; then
    enable_authn_alias=yes
  elif test "$enable_authn_alias" = "yes"; then
    enable_authn_alias=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authn_alias" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authn_alias=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authn_alias" != "yes"; then
      enable_authn_alias=no
    fi
  elif test "$enable_authn_alias" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authn_alias=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authn_alias=no
    fi
  fi
  if test "$enable_authn_alias" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authn_alias$_apmod_extra_msg" 1>&6
  if test "$enable_authn_alias" != "no"; then
    case "$enable_authn_alias" in
    shared*)
      enable_authn_alias=`echo $enable_authn_alias|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authn_alias"
      ;;
    *)
      MODLIST="$MODLIST authn_alias"
      if test "authn_alias" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authn_alias.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authn_alias.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHN_ALIAS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authn_alias.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHN_ALIAS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHN_ALIAS_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_authz_host""... $ac_c" 1>&6
echo "configure:5115: checking whether to enable mod_authz_host" >&5
    # Check whether --enable-authz-host or --disable-authz-host was given.
if test "${enable_authz_host+set}" = set; then
  enableval="$enable_authz_host"
  :
else
  enable_authz_host=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authz_host" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authz_host" = "static"; then
    enable_authz_host=yes
  elif test "$enable_authz_host" = "yes"; then
    enable_authz_host=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authz_host" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authz_host=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authz_host" != "yes"; then
      enable_authz_host=no
    fi
  elif test "$enable_authz_host" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authz_host=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authz_host=no
    fi
  fi
  if test "$enable_authz_host" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authz_host$_apmod_extra_msg" 1>&6
  if test "$enable_authz_host" != "no"; then
    case "$enable_authz_host" in
    shared*)
      enable_authz_host=`echo $enable_authz_host|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authz_host"
      ;;
    *)
      MODLIST="$MODLIST authz_host"
      if test "authz_host" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authz_host.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authz_host.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHZ_HOST_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authz_host.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_HOST_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHZ_HOST_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authz_groupfile""... $ac_c" 1>&6
echo "configure:5208: checking whether to enable mod_authz_groupfile" >&5
    # Check whether --enable-authz-groupfile or --disable-authz-groupfile was given.
if test "${enable_authz_groupfile+set}" = set; then
  enableval="$enable_authz_groupfile"
  :
else
  enable_authz_groupfile=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authz_groupfile" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authz_groupfile" = "static"; then
    enable_authz_groupfile=yes
  elif test "$enable_authz_groupfile" = "yes"; then
    enable_authz_groupfile=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authz_groupfile" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authz_groupfile=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authz_groupfile" != "yes"; then
      enable_authz_groupfile=no
    fi
  elif test "$enable_authz_groupfile" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authz_groupfile=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authz_groupfile=no
    fi
  fi
  if test "$enable_authz_groupfile" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authz_groupfile$_apmod_extra_msg" 1>&6
  if test "$enable_authz_groupfile" != "no"; then
    case "$enable_authz_groupfile" in
    shared*)
      enable_authz_groupfile=`echo $enable_authz_groupfile|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authz_groupfile"
      ;;
    *)
      MODLIST="$MODLIST authz_groupfile"
      if test "authz_groupfile" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authz_groupfile.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authz_groupfile.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHZ_GROUPFILE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authz_groupfile.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_GROUPFILE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHZ_GROUPFILE_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authz_user""... $ac_c" 1>&6
echo "configure:5301: checking whether to enable mod_authz_user" >&5
    # Check whether --enable-authz-user or --disable-authz-user was given.
if test "${enable_authz_user+set}" = set; then
  enableval="$enable_authz_user"
  :
else
  enable_authz_user=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authz_user" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authz_user" = "static"; then
    enable_authz_user=yes
  elif test "$enable_authz_user" = "yes"; then
    enable_authz_user=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authz_user" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authz_user=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authz_user" != "yes"; then
      enable_authz_user=no
    fi
  elif test "$enable_authz_user" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authz_user=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authz_user=no
    fi
  fi
  if test "$enable_authz_user" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authz_user$_apmod_extra_msg" 1>&6
  if test "$enable_authz_user" != "no"; then
    case "$enable_authz_user" in
    shared*)
      enable_authz_user=`echo $enable_authz_user|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authz_user"
      ;;
    *)
      MODLIST="$MODLIST authz_user"
      if test "authz_user" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authz_user.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authz_user.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHZ_USER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authz_user.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_USER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHZ_USER_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authz_dbm""... $ac_c" 1>&6
echo "configure:5394: checking whether to enable mod_authz_dbm" >&5
    # Check whether --enable-authz-dbm or --disable-authz-dbm was given.
if test "${enable_authz_dbm+set}" = set; then
  enableval="$enable_authz_dbm"
  :
else
  enable_authz_dbm=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authz_dbm" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authz_dbm" = "static"; then
    enable_authz_dbm=yes
  elif test "$enable_authz_dbm" = "yes"; then
    enable_authz_dbm=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authz_dbm" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authz_dbm=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authz_dbm" != "yes"; then
      enable_authz_dbm=no
    fi
  elif test "$enable_authz_dbm" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authz_dbm=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authz_dbm=no
    fi
  fi
  if test "$enable_authz_dbm" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authz_dbm$_apmod_extra_msg" 1>&6
  if test "$enable_authz_dbm" != "no"; then
    case "$enable_authz_dbm" in
    shared*)
      enable_authz_dbm=`echo $enable_authz_dbm|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authz_dbm"
      ;;
    *)
      MODLIST="$MODLIST authz_dbm"
      if test "authz_dbm" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authz_dbm.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authz_dbm.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHZ_DBM_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authz_dbm.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_DBM_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHZ_DBM_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_authz_owner""... $ac_c" 1>&6
echo "configure:5487: checking whether to enable mod_authz_owner" >&5
    # Check whether --enable-authz-owner or --disable-authz-owner was given.
if test "${enable_authz_owner+set}" = set; then
  enableval="$enable_authz_owner"
  :
else
  enable_authz_owner=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authz_owner" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authz_owner" = "static"; then
    enable_authz_owner=yes
  elif test "$enable_authz_owner" = "yes"; then
    enable_authz_owner=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authz_owner" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authz_owner=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authz_owner" != "yes"; then
      enable_authz_owner=no
    fi
  elif test "$enable_authz_owner" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authz_owner=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authz_owner=no
    fi
  fi
  if test "$enable_authz_owner" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authz_owner$_apmod_extra_msg" 1>&6
  if test "$enable_authz_owner" != "no"; then
    case "$enable_authz_owner" in
    shared*)
      enable_authz_owner=`echo $enable_authz_owner|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authz_owner"
      ;;
    *)
      MODLIST="$MODLIST authz_owner"
      if test "authz_owner" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authz_owner.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authz_owner.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHZ_OWNER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authz_owner.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_OWNER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHZ_OWNER_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_authnz_ldap""... $ac_c" 1>&6
echo "configure:5581: checking whether to enable mod_authnz_ldap" >&5
    # Check whether --enable-authnz-ldap or --disable-authnz-ldap was given.
if test "${enable_authnz_ldap+set}" = set; then
  enableval="$enable_authnz_ldap"
  :
else
  enable_authnz_ldap=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authnz_ldap" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authnz_ldap" = "static"; then
    enable_authnz_ldap=yes
  elif test "$enable_authnz_ldap" = "yes"; then
    enable_authnz_ldap=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authnz_ldap" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authnz_ldap=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authnz_ldap" != "yes"; then
      enable_authnz_ldap=no
    fi
  elif test "$enable_authnz_ldap" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authnz_ldap=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authnz_ldap=no
    fi
  fi
  if test "$enable_authnz_ldap" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
  MOD_AUTHNZ_LDAP_LDADD="`$apu_config --ldap-libs`" || MOD_AUTHNZ_LDAP_LDADD=""
  

                    echo $ac_n "checking whether to enable mod_authnz_ldap""... $ac_c" 1>&6
echo "configure:5623: checking whether to enable mod_authnz_ldap" >&5
                    if test "$enable_authnz_ldap" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_authnz_ldap has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_authnz_ldap$_apmod_extra_msg" 1>&6
  if test "$enable_authnz_ldap" != "no"; then
    case "$enable_authnz_ldap" in
    shared*)
      enable_authnz_ldap=`echo $enable_authnz_ldap|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authnz_ldap"
      ;;
    *)
      MODLIST="$MODLIST authnz_ldap"
      if test "authnz_ldap" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authnz_ldap.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authnz_ldap.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHNZ_LDAP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authnz_ldap.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHNZ_LDAP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHNZ_LDAP_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_authz_default""... $ac_c" 1>&6
echo "configure:5688: checking whether to enable mod_authz_default" >&5
    # Check whether --enable-authz-default or --disable-authz-default was given.
if test "${enable_authz_default+set}" = set; then
  enableval="$enable_authz_default"
  :
else
  enable_authz_default=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_authz_default" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_authz_default" = "static"; then
    enable_authz_default=yes
  elif test "$enable_authz_default" = "yes"; then
    enable_authz_default=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_authz_default" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_authz_default=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_authz_default" != "yes"; then
      enable_authz_default=no
    fi
  elif test "$enable_authz_default" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_authz_default=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_authz_default=no
    fi
  fi
  if test "$enable_authz_default" != "no"; then
            :
  fi
  echo "$ac_t""$enable_authz_default$_apmod_extra_msg" 1>&6
  if test "$enable_authz_default" != "no"; then
    case "$enable_authz_default" in
    shared*)
      enable_authz_default=`echo $enable_authz_default|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES authz_default"
      ;;
    *)
      MODLIST="$MODLIST authz_default"
      if test "authz_default" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_authz_default.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_authz_default.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTHZ_DEFAULT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_authz_default.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTHZ_DEFAULT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTHZ_DEFAULT_LDADD"
  

    
  fi




  echo $ac_n "checking whether to enable mod_auth_basic""... $ac_c" 1>&6
echo "configure:5783: checking whether to enable mod_auth_basic" >&5
    # Check whether --enable-auth-basic or --disable-auth-basic was given.
if test "${enable_auth_basic+set}" = set; then
  enableval="$enable_auth_basic"
  :
else
  enable_auth_basic=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_auth_basic" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_auth_basic" = "static"; then
    enable_auth_basic=yes
  elif test "$enable_auth_basic" = "yes"; then
    enable_auth_basic=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_auth_basic" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_auth_basic=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_auth_basic" != "yes"; then
      enable_auth_basic=no
    fi
  elif test "$enable_auth_basic" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_auth_basic=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_auth_basic=no
    fi
  fi
  if test "$enable_auth_basic" != "no"; then
            :
  fi
  echo "$ac_t""$enable_auth_basic$_apmod_extra_msg" 1>&6
  if test "$enable_auth_basic" != "no"; then
    case "$enable_auth_basic" in
    shared*)
      enable_auth_basic=`echo $enable_auth_basic|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES auth_basic"
      ;;
    *)
      MODLIST="$MODLIST auth_basic"
      if test "auth_basic" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_auth_basic.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_auth_basic.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTH_BASIC_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_auth_basic.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTH_BASIC_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTH_BASIC_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_auth_digest""... $ac_c" 1>&6
echo "configure:5876: checking whether to enable mod_auth_digest" >&5
    # Check whether --enable-auth-digest or --disable-auth-digest was given.
if test "${enable_auth_digest+set}" = set; then
  enableval="$enable_auth_digest"
  :
else
  enable_auth_digest=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_auth_digest" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_auth_digest" = "static"; then
    enable_auth_digest=yes
  elif test "$enable_auth_digest" = "yes"; then
    enable_auth_digest=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_auth_digest" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_auth_digest=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_auth_digest" != "yes"; then
      enable_auth_digest=no
    fi
  elif test "$enable_auth_digest" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_auth_digest=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_auth_digest=no
    fi
  fi
  if test "$enable_auth_digest" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
  
apr_old_cppflags=$CPPFLAGS
CPPFLAGS="$CPPFLAGS $INCLUDES"
cat > conftest.$ac_ext <<EOF
#line 5918 "configure"
#include "confdefs.h"

#include <apr.h>
#if APR_HAS_RANDOM
YES_IS_DEFINED
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "YES_IS_DEFINED" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_define_APR_HAS_RANDOM=yes
else
  rm -rf conftest*
  ac_cv_define_APR_HAS_RANDOM=no
fi
rm -f conftest*

CPPFLAGS=$apr_old_cppflags

  if test $ac_cv_define_APR_HAS_RANDOM = "no"; then
    echo "You need APR random support to use mod_auth_digest."
    echo "Look at APR configure options --with-egd and --with-devrandom."
    enable_auth_digest="no"
  fi

                    echo $ac_n "checking whether to enable mod_auth_digest""... $ac_c" 1>&6
echo "configure:5946: checking whether to enable mod_auth_digest" >&5
                    if test "$enable_auth_digest" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_auth_digest has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_auth_digest$_apmod_extra_msg" 1>&6
  if test "$enable_auth_digest" != "no"; then
    case "$enable_auth_digest" in
    shared*)
      enable_auth_digest=`echo $enable_auth_digest|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES auth_digest"
      ;;
    *)
      MODLIST="$MODLIST auth_digest"
      if test "auth_digest" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_auth_digest.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_auth_digest.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTH_DIGEST_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_auth_digest.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTH_DIGEST_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTH_DIGEST_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=arch/win32
  modpath_current=modules/arch/win32
  modpath_static=
  modpath_shared=
  test -d arch/win32 || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_isapi""... $ac_c" 1>&6
echo "configure:6036: checking whether to enable mod_isapi" >&5
    # Check whether --enable-isapi or --disable-isapi was given.
if test "${enable_isapi+set}" = set; then
  enableval="$enable_isapi"
  :
else
  enable_isapi=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_isapi" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_isapi" = "static"; then
    enable_isapi=yes
  elif test "$enable_isapi" = "yes"; then
    enable_isapi=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_isapi" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_isapi=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_isapi" != "yes"; then
      enable_isapi=no
    fi
  elif test "$enable_isapi" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_isapi=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_isapi=no
    fi
  fi
  if test "$enable_isapi" != "no"; then
            :
  fi
  echo "$ac_t""$enable_isapi$_apmod_extra_msg" 1>&6
  if test "$enable_isapi" != "no"; then
    case "$enable_isapi" in
    shared*)
      enable_isapi=`echo $enable_isapi|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES isapi"
      ;;
    *)
      MODLIST="$MODLIST isapi"
      if test "isapi" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_isapi.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_isapi.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_ISAPI_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_isapi.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ISAPI_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_ISAPI_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=cache
  modpath_current=modules/cache
  modpath_static=
  modpath_shared=
  test -d cache || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_file_cache""... $ac_c" 1>&6
echo "configure:6155: checking whether to enable mod_file_cache" >&5
    # Check whether --enable-file-cache or --disable-file-cache was given.
if test "${enable_file_cache+set}" = set; then
  enableval="$enable_file_cache"
  :
else
  enable_file_cache=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_file_cache" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_file_cache" = "static"; then
    enable_file_cache=yes
  elif test "$enable_file_cache" = "yes"; then
    enable_file_cache=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_file_cache" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_file_cache=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_file_cache" != "yes"; then
      enable_file_cache=no
    fi
  elif test "$enable_file_cache" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_file_cache=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_file_cache=no
    fi
  fi
  if test "$enable_file_cache" != "no"; then
            :
  fi
  echo "$ac_t""$enable_file_cache$_apmod_extra_msg" 1>&6
  if test "$enable_file_cache" != "no"; then
    case "$enable_file_cache" in
    shared*)
      enable_file_cache=`echo $enable_file_cache|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES file_cache"
      ;;
    *)
      MODLIST="$MODLIST file_cache"
      if test "file_cache" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_file_cache.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_file_cache.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_FILE_CACHE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_file_cache.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_FILE_CACHE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_FILE_CACHE_LDADD"
  

    
  fi


cache_objs="mod_cache.lo cache_storage.lo cache_util.lo "
mem_cache_objs="mod_mem_cache.lo cache_cache.lo cache_pqueue.lo cache_hash.lo "

  echo $ac_n "checking whether to enable mod_cache""... $ac_c" 1>&6
echo "configure:6251: checking whether to enable mod_cache" >&5
    # Check whether --enable-cache or --disable-cache was given.
if test "${enable_cache+set}" = set; then
  enableval="$enable_cache"
  :
else
  enable_cache=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_cache" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_cache" = "static"; then
    enable_cache=yes
  elif test "$enable_cache" = "yes"; then
    enable_cache=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_cache" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_cache=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_cache" != "yes"; then
      enable_cache=no
    fi
  elif test "$enable_cache" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_cache=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_cache=no
    fi
  fi
  if test "$enable_cache" != "no"; then
            :
  fi
  echo "$ac_t""$enable_cache$_apmod_extra_msg" 1>&6
  if test "$enable_cache" != "no"; then
    case "$enable_cache" in
    shared*)
      enable_cache=`echo $enable_cache|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES cache"
      ;;
    *)
      MODLIST="$MODLIST cache"
      if test "cache" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$cache_objs"; then
    objects="mod_cache.lo"
  else
    objects="$cache_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_cache.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CACHE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_cache.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CACHE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CACHE_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_disk_cache""... $ac_c" 1>&6
echo "configure:6344: checking whether to enable mod_disk_cache" >&5
    # Check whether --enable-disk-cache or --disable-disk-cache was given.
if test "${enable_disk_cache+set}" = set; then
  enableval="$enable_disk_cache"
  :
else
  enable_disk_cache=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_disk_cache" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_disk_cache" = "static"; then
    enable_disk_cache=yes
  elif test "$enable_disk_cache" = "yes"; then
    enable_disk_cache=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_disk_cache" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_disk_cache=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_disk_cache" != "yes"; then
      enable_disk_cache=no
    fi
  elif test "$enable_disk_cache" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_disk_cache=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_disk_cache=no
    fi
  fi
  if test "$enable_disk_cache" != "no"; then
            :
  fi
  echo "$ac_t""$enable_disk_cache$_apmod_extra_msg" 1>&6
  if test "$enable_disk_cache" != "no"; then
    case "$enable_disk_cache" in
    shared*)
      enable_disk_cache=`echo $enable_disk_cache|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES disk_cache"
      ;;
    *)
      MODLIST="$MODLIST disk_cache"
      if test "disk_cache" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_disk_cache.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_disk_cache.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DISK_CACHE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_disk_cache.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DISK_CACHE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DISK_CACHE_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_mem_cache""... $ac_c" 1>&6
echo "configure:6437: checking whether to enable mod_mem_cache" >&5
    # Check whether --enable-mem-cache or --disable-mem-cache was given.
if test "${enable_mem_cache+set}" = set; then
  enableval="$enable_mem_cache"
  :
else
  enable_mem_cache=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_mem_cache" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_mem_cache" = "static"; then
    enable_mem_cache=yes
  elif test "$enable_mem_cache" = "yes"; then
    enable_mem_cache=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_mem_cache" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_mem_cache=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_mem_cache" != "yes"; then
      enable_mem_cache=no
    fi
  elif test "$enable_mem_cache" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_mem_cache=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_mem_cache=no
    fi
  fi
  if test "$enable_mem_cache" != "no"; then
            :
  fi
  echo "$ac_t""$enable_mem_cache$_apmod_extra_msg" 1>&6
  if test "$enable_mem_cache" != "no"; then
    case "$enable_mem_cache" in
    shared*)
      enable_mem_cache=`echo $enable_mem_cache|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES mem_cache"
      ;;
    *)
      MODLIST="$MODLIST mem_cache"
      if test "mem_cache" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$mem_cache_objs"; then
    objects="mod_mem_cache.lo"
  else
    objects="$mem_cache_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_mem_cache.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_MEM_CACHE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_mem_cache.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MEM_CACHE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_MEM_CACHE_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"





  current_dir=database
  modpath_current=modules/database
  modpath_static=
  modpath_shared=
  test -d database || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_dbd""... $ac_c" 1>&6
echo "configure:6555: checking whether to enable mod_dbd" >&5
    # Check whether --enable-dbd or --disable-dbd was given.
if test "${enable_dbd+set}" = set; then
  enableval="$enable_dbd"
  :
else
  enable_dbd=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_dbd" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_dbd" = "static"; then
    enable_dbd=yes
  elif test "$enable_dbd" = "yes"; then
    enable_dbd=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_dbd" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_dbd=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_dbd" != "yes"; then
      enable_dbd=no
    fi
  elif test "$enable_dbd" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_dbd=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_dbd=no
    fi
  fi
  if test "$enable_dbd" != "no"; then
            :
  fi
  echo "$ac_t""$enable_dbd$_apmod_extra_msg" 1>&6
  if test "$enable_dbd" != "no"; then
    case "$enable_dbd" in
    shared*)
      enable_dbd=`echo $enable_dbd|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES dbd"
      ;;
    *)
      MODLIST="$MODLIST dbd"
      if test "dbd" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_dbd.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_dbd.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DBD_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_dbd.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DBD_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DBD_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"





  current_dir=debug
  modpath_current=modules/debug
  modpath_static=
  modpath_shared=
  test -d debug || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_bucketeer""... $ac_c" 1>&6
echo "configure:6673: checking whether to enable mod_bucketeer" >&5
    # Check whether --enable-bucketeer or --disable-bucketeer was given.
if test "${enable_bucketeer+set}" = set; then
  enableval="$enable_bucketeer"
  :
else
  enable_bucketeer=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_bucketeer" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_bucketeer" = "static"; then
    enable_bucketeer=yes
  elif test "$enable_bucketeer" = "yes"; then
    enable_bucketeer=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_bucketeer" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_bucketeer=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_bucketeer" != "yes"; then
      enable_bucketeer=no
    fi
  elif test "$enable_bucketeer" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_bucketeer=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_bucketeer=no
    fi
  fi
  if test "$enable_bucketeer" != "no"; then
            :
  fi
  echo "$ac_t""$enable_bucketeer$_apmod_extra_msg" 1>&6
  if test "$enable_bucketeer" != "no"; then
    case "$enable_bucketeer" in
    shared*)
      enable_bucketeer=`echo $enable_bucketeer|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES bucketeer"
      ;;
    *)
      MODLIST="$MODLIST bucketeer"
      if test "bucketeer" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_bucketeer.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_bucketeer.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_BUCKETEER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_bucketeer.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_BUCKETEER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_BUCKETEER_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_dumpio""... $ac_c" 1>&6
echo "configure:6766: checking whether to enable mod_dumpio" >&5
    # Check whether --enable-dumpio or --disable-dumpio was given.
if test "${enable_dumpio+set}" = set; then
  enableval="$enable_dumpio"
  :
else
  enable_dumpio=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_dumpio" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_dumpio" = "static"; then
    enable_dumpio=yes
  elif test "$enable_dumpio" = "yes"; then
    enable_dumpio=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_dumpio" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_dumpio=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_dumpio" != "yes"; then
      enable_dumpio=no
    fi
  elif test "$enable_dumpio" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_dumpio=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_dumpio=no
    fi
  fi
  if test "$enable_dumpio" != "no"; then
            :
  fi
  echo "$ac_t""$enable_dumpio$_apmod_extra_msg" 1>&6
  if test "$enable_dumpio" != "no"; then
    case "$enable_dumpio" in
    shared*)
      enable_dumpio=`echo $enable_dumpio|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES dumpio"
      ;;
    *)
      MODLIST="$MODLIST dumpio"
      if test "dumpio" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_dumpio.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_dumpio.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DUMPIO_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_dumpio.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DUMPIO_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DUMPIO_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=echo
  modpath_current=modules/echo
  modpath_static=
  modpath_shared=
  test -d echo || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_echo""... $ac_c" 1>&6
echo "configure:6885: checking whether to enable mod_echo" >&5
    # Check whether --enable-echo or --disable-echo was given.
if test "${enable_echo+set}" = set; then
  enableval="$enable_echo"
  :
else
  enable_echo=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_echo" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_echo" = "static"; then
    enable_echo=yes
  elif test "$enable_echo" = "yes"; then
    enable_echo=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_echo" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_echo=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_echo" != "yes"; then
      enable_echo=no
    fi
  elif test "$enable_echo" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_echo=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_echo=no
    fi
  fi
  if test "$enable_echo" != "no"; then
            :
  fi
  echo "$ac_t""$enable_echo$_apmod_extra_msg" 1>&6
  if test "$enable_echo" != "no"; then
    case "$enable_echo" in
    shared*)
      enable_echo=`echo $enable_echo|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES echo"
      ;;
    *)
      MODLIST="$MODLIST echo"
      if test "echo" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_echo.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_echo.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_ECHO_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_echo.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ECHO_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_ECHO_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"





  current_dir=experimental
  modpath_current=modules/experimental
  modpath_static=
  modpath_shared=
  test -d experimental || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_example""... $ac_c" 1>&6
echo "configure:7003: checking whether to enable mod_example" >&5
    # Check whether --enable-example or --disable-example was given.
if test "${enable_example+set}" = set; then
  enableval="$enable_example"
  :
else
  enable_example=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_example" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_example" = "static"; then
    enable_example=yes
  elif test "$enable_example" = "yes"; then
    enable_example=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_example" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_example=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_example" != "yes"; then
      enable_example=no
    fi
  elif test "$enable_example" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_example=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_example=no
    fi
  fi
  if test "$enable_example" != "no"; then
            :
  fi
  echo "$ac_t""$enable_example$_apmod_extra_msg" 1>&6
  if test "$enable_example" != "no"; then
    case "$enable_example" in
    shared*)
      enable_example=`echo $enable_example|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES example"
      ;;
    *)
      MODLIST="$MODLIST example"
      if test "example" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_example.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_example.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_EXAMPLE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_example.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXAMPLE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_EXAMPLE_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_case_filter""... $ac_c" 1>&6
echo "configure:7096: checking whether to enable mod_case_filter" >&5
    # Check whether --enable-case-filter or --disable-case-filter was given.
if test "${enable_case_filter+set}" = set; then
  enableval="$enable_case_filter"
  :
else
  enable_case_filter=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_case_filter" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_case_filter" = "static"; then
    enable_case_filter=yes
  elif test "$enable_case_filter" = "yes"; then
    enable_case_filter=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_case_filter" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_case_filter=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_case_filter" != "yes"; then
      enable_case_filter=no
    fi
  elif test "$enable_case_filter" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_case_filter=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_case_filter=no
    fi
  fi
  if test "$enable_case_filter" != "no"; then
            :
  fi
  echo "$ac_t""$enable_case_filter$_apmod_extra_msg" 1>&6
  if test "$enable_case_filter" != "no"; then
    case "$enable_case_filter" in
    shared*)
      enable_case_filter=`echo $enable_case_filter|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES case_filter"
      ;;
    *)
      MODLIST="$MODLIST case_filter"
      if test "case_filter" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_case_filter.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_case_filter.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CASE_FILTER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_case_filter.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CASE_FILTER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CASE_FILTER_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_case_filter_in""... $ac_c" 1>&6
echo "configure:7189: checking whether to enable mod_case_filter_in" >&5
    # Check whether --enable-case-filter-in or --disable-case-filter-in was given.
if test "${enable_case_filter_in+set}" = set; then
  enableval="$enable_case_filter_in"
  :
else
  enable_case_filter_in=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_case_filter_in" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_case_filter_in" = "static"; then
    enable_case_filter_in=yes
  elif test "$enable_case_filter_in" = "yes"; then
    enable_case_filter_in=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_case_filter_in" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_case_filter_in=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_case_filter_in" != "yes"; then
      enable_case_filter_in=no
    fi
  elif test "$enable_case_filter_in" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_case_filter_in=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_case_filter_in=no
    fi
  fi
  if test "$enable_case_filter_in" != "no"; then
            :
  fi
  echo "$ac_t""$enable_case_filter_in$_apmod_extra_msg" 1>&6
  if test "$enable_case_filter_in" != "no"; then
    case "$enable_case_filter_in" in
    shared*)
      enable_case_filter_in=`echo $enable_case_filter_in|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES case_filter_in"
      ;;
    *)
      MODLIST="$MODLIST case_filter_in"
      if test "case_filter_in" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_case_filter_in.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_case_filter_in.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CASE_FILTER_IN_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_case_filter_in.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CASE_FILTER_IN_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CASE_FILTER_IN_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=filters
  modpath_current=modules/filters
  modpath_static=
  modpath_shared=
  test -d filters || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_ext_filter""... $ac_c" 1>&6
echo "configure:7308: checking whether to enable mod_ext_filter" >&5
    # Check whether --enable-ext-filter or --disable-ext-filter was given.
if test "${enable_ext_filter+set}" = set; then
  enableval="$enable_ext_filter"
  :
else
  enable_ext_filter=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_ext_filter" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_ext_filter" = "static"; then
    enable_ext_filter=yes
  elif test "$enable_ext_filter" = "yes"; then
    enable_ext_filter=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_ext_filter" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_ext_filter=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_ext_filter" != "yes"; then
      enable_ext_filter=no
    fi
  elif test "$enable_ext_filter" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_ext_filter=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_ext_filter=no
    fi
  fi
  if test "$enable_ext_filter" != "no"; then
            :
  fi
  echo "$ac_t""$enable_ext_filter$_apmod_extra_msg" 1>&6
  if test "$enable_ext_filter" != "no"; then
    case "$enable_ext_filter" in
    shared*)
      enable_ext_filter=`echo $enable_ext_filter|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES ext_filter"
      ;;
    *)
      MODLIST="$MODLIST ext_filter"
      if test "ext_filter" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_ext_filter.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_ext_filter.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_EXT_FILTER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_ext_filter.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXT_FILTER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_EXT_FILTER_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_include""... $ac_c" 1>&6
echo "configure:7401: checking whether to enable mod_include" >&5
    # Check whether --enable-include or --disable-include was given.
if test "${enable_include+set}" = set; then
  enableval="$enable_include"
  :
else
  enable_include=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_include" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_include" = "static"; then
    enable_include=yes
  elif test "$enable_include" = "yes"; then
    enable_include=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_include" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_include=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_include" != "yes"; then
      enable_include=no
    fi
  elif test "$enable_include" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_include=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_include=no
    fi
  fi
  if test "$enable_include" != "no"; then
            :
  fi
  echo "$ac_t""$enable_include$_apmod_extra_msg" 1>&6
  if test "$enable_include" != "no"; then
    case "$enable_include" in
    shared*)
      enable_include=`echo $enable_include|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES include"
      ;;
    *)
      MODLIST="$MODLIST include"
      if test "include" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_include.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_include.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_INCLUDE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_include.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_INCLUDE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_INCLUDE_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_filter""... $ac_c" 1>&6
echo "configure:7494: checking whether to enable mod_filter" >&5
    # Check whether --enable-filter or --disable-filter was given.
if test "${enable_filter+set}" = set; then
  enableval="$enable_filter"
  :
else
  enable_filter=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_filter" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_filter" = "static"; then
    enable_filter=yes
  elif test "$enable_filter" = "yes"; then
    enable_filter=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_filter" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_filter=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_filter" != "yes"; then
      enable_filter=no
    fi
  elif test "$enable_filter" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_filter=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_filter=no
    fi
  fi
  if test "$enable_filter" != "no"; then
            :
  fi
  echo "$ac_t""$enable_filter$_apmod_extra_msg" 1>&6
  if test "$enable_filter" != "no"; then
    case "$enable_filter" in
    shared*)
      enable_filter=`echo $enable_filter|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES filter"
      ;;
    *)
      MODLIST="$MODLIST filter"
      if test "filter" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_filter.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_filter.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_FILTER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_filter.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_FILTER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_FILTER_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_substitute""... $ac_c" 1>&6
echo "configure:7587: checking whether to enable mod_substitute" >&5
    # Check whether --enable-substitute or --disable-substitute was given.
if test "${enable_substitute+set}" = set; then
  enableval="$enable_substitute"
  :
else
  enable_substitute=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_substitute" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_substitute" = "static"; then
    enable_substitute=yes
  elif test "$enable_substitute" = "yes"; then
    enable_substitute=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_substitute" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_substitute=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_substitute" != "yes"; then
      enable_substitute=no
    fi
  elif test "$enable_substitute" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_substitute=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_substitute=no
    fi
  fi
  if test "$enable_substitute" != "no"; then
            :
  fi
  echo "$ac_t""$enable_substitute$_apmod_extra_msg" 1>&6
  if test "$enable_substitute" != "no"; then
    case "$enable_substitute" in
    shared*)
      enable_substitute=`echo $enable_substitute|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES substitute"
      ;;
    *)
      MODLIST="$MODLIST substitute"
      if test "substitute" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_substitute.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_substitute.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_SUBSTITUTE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_substitute.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SUBSTITUTE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_SUBSTITUTE_LDADD"
  

    
  fi


if test "$ac_cv_ebcdic" = "yes"; then
# mod_charset_lite can be very useful on an ebcdic system,
#   so include it by default
    
  echo $ac_n "checking whether to enable mod_charset_lite""... $ac_c" 1>&6
echo "configure:7684: checking whether to enable mod_charset_lite" >&5
    # Check whether --enable-charset-lite or --disable-charset-lite was given.
if test "${enable_charset_lite+set}" = set; then
  enableval="$enable_charset_lite"
  :
else
  enable_charset_lite=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_charset_lite" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_charset_lite" = "static"; then
    enable_charset_lite=yes
  elif test "$enable_charset_lite" = "yes"; then
    enable_charset_lite=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_charset_lite" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_charset_lite=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_charset_lite" != "yes"; then
      enable_charset_lite=no
    fi
  elif test "$enable_charset_lite" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_charset_lite=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_charset_lite=no
    fi
  fi
  if test "$enable_charset_lite" != "no"; then
            :
  fi
  echo "$ac_t""$enable_charset_lite$_apmod_extra_msg" 1>&6
  if test "$enable_charset_lite" != "no"; then
    case "$enable_charset_lite" in
    shared*)
      enable_charset_lite=`echo $enable_charset_lite|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES charset_lite"
      ;;
    *)
      MODLIST="$MODLIST charset_lite"
      if test "charset_lite" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_charset_lite.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_charset_lite.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CHARSET_LITE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_charset_lite.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CHARSET_LITE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CHARSET_LITE_LDADD"
  

    
  fi

else
    
  echo $ac_n "checking whether to enable mod_charset_lite""... $ac_c" 1>&6
echo "configure:7778: checking whether to enable mod_charset_lite" >&5
    # Check whether --enable-charset-lite or --disable-charset-lite was given.
if test "${enable_charset_lite+set}" = set; then
  enableval="$enable_charset_lite"
  :
else
  enable_charset_lite=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_charset_lite" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_charset_lite" = "static"; then
    enable_charset_lite=yes
  elif test "$enable_charset_lite" = "yes"; then
    enable_charset_lite=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_charset_lite" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_charset_lite=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_charset_lite" != "yes"; then
      enable_charset_lite=no
    fi
  elif test "$enable_charset_lite" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_charset_lite=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_charset_lite=no
    fi
  fi
  if test "$enable_charset_lite" != "no"; then
            :
  fi
  echo "$ac_t""$enable_charset_lite$_apmod_extra_msg" 1>&6
  if test "$enable_charset_lite" != "no"; then
    case "$enable_charset_lite" in
    shared*)
      enable_charset_lite=`echo $enable_charset_lite|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES charset_lite"
      ;;
    *)
      MODLIST="$MODLIST charset_lite"
      if test "charset_lite" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_charset_lite.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_charset_lite.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CHARSET_LITE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_charset_lite.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CHARSET_LITE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CHARSET_LITE_LDADD"
  

    
  fi

fi



  echo $ac_n "checking whether to enable mod_deflate""... $ac_c" 1>&6
echo "configure:7874: checking whether to enable mod_deflate" >&5
    # Check whether --enable-deflate or --disable-deflate was given.
if test "${enable_deflate+set}" = set; then
  enableval="$enable_deflate"
  :
else
  enable_deflate=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_deflate" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_deflate" = "static"; then
    enable_deflate=yes
  elif test "$enable_deflate" = "yes"; then
    enable_deflate=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_deflate" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_deflate=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_deflate" != "yes"; then
      enable_deflate=no
    fi
  elif test "$enable_deflate" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_deflate=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_deflate=no
    fi
  fi
  if test "$enable_deflate" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
  # Check whether --with-z or --without-z was given.
if test "${with_z+set}" = set; then
  withval="$with_z"
  
    if test "x$withval" != "xyes" && test "x$withval" != "x"; then
      ap_zlib_base="$withval"
    fi
  
fi

  if test "x$ap_zlib_base" = "x"; then
    echo $ac_n "checking for zlib location""... $ac_c" 1>&6
echo "configure:7924: checking for zlib location" >&5
    if eval "test \"`echo '$''{'ap_cv_zlib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
      for dir in /usr/local /usr ; do
        if test -d $dir && test -f $dir/include/zlib.h; then
          ap_cv_zlib=$dir
          break
        fi
      done
    
fi

    ap_zlib_base=$ap_cv_zlib
    if test "x$ap_zlib_base" = "x"; then
      enable_deflate=no
      echo "$ac_t""not found" 1>&6
    else
      echo "$ac_t""$ap_zlib_base" 1>&6
    fi
  fi
  if test "$enable_deflate" != "no"; then
    ap_save_includes=$INCLUDES
    ap_save_ldflags=$LDFLAGS
    ap_save_cppflags=$CPPFLAGS
    if test "$ap_zlib_base" != "/usr"; then
      
  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I${ap_zlib_base}/include\""
    INCLUDES="-I${ap_zlib_base}/include"
  else
    apr_addto_bugger="-I${ap_zlib_base}/include"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi

            CPPFLAGS="$CPPFLAGS $INCLUDES"
      
  if test "x$LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"-L${ap_zlib_base}/lib\""
    LDFLAGS="-L${ap_zlib_base}/lib"
  else
    apr_addto_bugger="-L${ap_zlib_base}/lib"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
        LDFLAGS="$LDFLAGS $i"
      fi
    done
  fi

      if test "x$ap_platform_runtime_link_flag" != "x"; then
         
  if test "x$LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \"$ap_platform_runtime_link_flag${ap_zlib_base}/lib\""
    LDFLAGS="$ap_platform_runtime_link_flag${ap_zlib_base}/lib"
  else
    apr_addto_bugger="$ap_platform_runtime_link_flag${ap_zlib_base}/lib"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
        LDFLAGS="$LDFLAGS $i"
      fi
    done
  fi

      fi
    fi
    
  if test "x$LIBS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LIBS to \"-lz\""
    LIBS="-lz"
  else
    apr_addto_bugger="-lz"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LIBS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LIBS"
        LIBS="$LIBS $i"
      fi
    done
  fi

    echo $ac_n "checking for zlib library""... $ac_c" 1>&6
echo "configure:8040: checking for zlib library" >&5
    cat > conftest.$ac_ext <<EOF
#line 8042 "configure"
#include "confdefs.h"
#include <zlib.h>
int main() {
int i = Z_OK;
; return 0; }
EOF
if { (eval echo configure:8049: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""found" 1>&6 
     
  test "x$silent" != "xyes" && echo "  forcing MOD_DEFLATE_LDADD to \"-lz\""
  MOD_DEFLATE_LDADD="-lz"

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""not found" 1>&6
     enable_deflate=no
     INCLUDES=$ap_save_includes
     LDFLAGS=$ap_save_ldflags
fi
rm -f conftest*
    
  if test "x$LIBS" = "x-lz"; then
    test "x$silent" != "xyes" && echo "  nulling LIBS"
    LIBS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $LIBS; do
      if test "x$i" != "x-lz"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-lz\" from LIBS"
      LIBS=$apr_new_bugger
    fi
  fi

    CPPFLAGS=$ap_save_cppflags
  fi

                    echo $ac_n "checking whether to enable mod_deflate""... $ac_c" 1>&6
echo "configure:8090: checking whether to enable mod_deflate" >&5
                    if test "$enable_deflate" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_deflate has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_deflate$_apmod_extra_msg" 1>&6
  if test "$enable_deflate" != "no"; then
    case "$enable_deflate" in
    shared*)
      enable_deflate=`echo $enable_deflate|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES deflate"
      ;;
    *)
      MODLIST="$MODLIST deflate"
      if test "deflate" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_deflate.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_deflate.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DEFLATE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_deflate.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DEFLATE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DEFLATE_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=ldap
  modpath_current=modules/ldap
  modpath_static=
  modpath_shared=
  test -d ldap || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


ldap_objects="util_ldap.lo util_ldap_cache.lo util_ldap_cache_mgr.lo"

  echo $ac_n "checking whether to enable mod_ldap""... $ac_c" 1>&6
echo "configure:8181: checking whether to enable mod_ldap" >&5
    # Check whether --enable-ldap or --disable-ldap was given.
if test "${enable_ldap+set}" = set; then
  enableval="$enable_ldap"
  :
else
  enable_ldap=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_ldap" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_ldap" = "static"; then
    enable_ldap=yes
  elif test "$enable_ldap" = "yes"; then
    enable_ldap=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_ldap" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_ldap=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_ldap" != "yes"; then
      enable_ldap=no
    fi
  elif test "$enable_ldap" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_ldap=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_ldap=no
    fi
  fi
  if test "$enable_ldap" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
  MOD_LDAP_LDADD="`$apu_config --ldap-libs`" || MOD_LDAP_LDADD=""
  

                    echo $ac_n "checking whether to enable mod_ldap""... $ac_c" 1>&6
echo "configure:8223: checking whether to enable mod_ldap" >&5
                    if test "$enable_ldap" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_ldap has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_ldap$_apmod_extra_msg" 1>&6
  if test "$enable_ldap" != "no"; then
    case "$enable_ldap" in
    shared*)
      enable_ldap=`echo $enable_ldap|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES ldap"
      ;;
    *)
      MODLIST="$MODLIST ldap"
      if test "ldap" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$ldap_objects"; then
    objects="mod_ldap.lo"
  else
    objects="$ldap_objects"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_ldap.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_LDAP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_ldap.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LDAP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_LDAP_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=loggers
  modpath_current=modules/loggers
  modpath_static=
  modpath_shared=
  test -d loggers || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk

	

  echo $ac_n "checking whether to enable mod_log_config""... $ac_c" 1>&6
echo "configure:8313: checking whether to enable mod_log_config" >&5
    # Check whether --enable-log-config or --disable-log-config was given.
if test "${enable_log_config+set}" = set; then
  enableval="$enable_log_config"
  :
else
  enable_log_config=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_log_config" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_log_config" = "static"; then
    enable_log_config=yes
  elif test "$enable_log_config" = "yes"; then
    enable_log_config=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_log_config" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_log_config=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_log_config" != "yes"; then
      enable_log_config=no
    fi
  elif test "$enable_log_config" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_log_config=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_log_config=no
    fi
  fi
  if test "$enable_log_config" != "no"; then
            :
  fi
  echo "$ac_t""$enable_log_config$_apmod_extra_msg" 1>&6
  if test "$enable_log_config" != "no"; then
    case "$enable_log_config" in
    shared*)
      enable_log_config=`echo $enable_log_config|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES log_config"
      ;;
    *)
      MODLIST="$MODLIST log_config"
      if test "log_config" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_log_config.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_log_config.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_LOG_CONFIG_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_log_config.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOG_CONFIG_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_LOG_CONFIG_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_log_forensic""... $ac_c" 1>&6
echo "configure:8406: checking whether to enable mod_log_forensic" >&5
    # Check whether --enable-log-forensic or --disable-log-forensic was given.
if test "${enable_log_forensic+set}" = set; then
  enableval="$enable_log_forensic"
  :
else
  enable_log_forensic=maybe-all
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_log_forensic" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_log_forensic" = "static"; then
    enable_log_forensic=yes
  elif test "$enable_log_forensic" = "yes"; then
    enable_log_forensic=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_log_forensic" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_log_forensic=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_log_forensic" != "yes"; then
      enable_log_forensic=no
    fi
  elif test "$enable_log_forensic" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_log_forensic=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_log_forensic=no
    fi
  fi
  if test "$enable_log_forensic" != "no"; then
            :
  fi
  echo "$ac_t""$enable_log_forensic$_apmod_extra_msg" 1>&6
  if test "$enable_log_forensic" != "no"; then
    case "$enable_log_forensic" in
    shared*)
      enable_log_forensic=`echo $enable_log_forensic|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES log_forensic"
      ;;
    *)
      MODLIST="$MODLIST log_forensic"
      if test "log_forensic" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_log_forensic.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_log_forensic.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_LOG_FORENSIC_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_log_forensic.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOG_FORENSIC_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_LOG_FORENSIC_LDADD"
  

    
  fi


if test "x$enable_log_forensic" != "xno"; then
    # mod_log_forensic needs test_char.h
    
  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_builddir)/server\""
    INCLUDES="-I\$(top_builddir)/server"
  else
    apr_addto_bugger="-I\$(top_builddir)/server"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi

fi   


  echo $ac_n "checking whether to enable mod_logio""... $ac_c" 1>&6
echo "configure:8525: checking whether to enable mod_logio" >&5
    # Check whether --enable-logio or --disable-logio was given.
if test "${enable_logio+set}" = set; then
  enableval="$enable_logio"
  :
else
  enable_logio=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_logio" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_logio" = "static"; then
    enable_logio=yes
  elif test "$enable_logio" = "yes"; then
    enable_logio=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_logio" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_logio=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_logio" != "yes"; then
      enable_logio=no
    fi
  elif test "$enable_logio" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_logio=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_logio=no
    fi
  fi
  if test "$enable_logio" != "no"; then
            :
  fi
  echo "$ac_t""$enable_logio$_apmod_extra_msg" 1>&6
  if test "$enable_logio" != "no"; then
    case "$enable_logio" in
    shared*)
      enable_logio=`echo $enable_logio|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES logio"
      ;;
    *)
      MODLIST="$MODLIST logio"
      if test "logio" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_logio.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_logio.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_LOGIO_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_logio.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_LOGIO_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_LOGIO_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=metadata
  modpath_current=modules/metadata
  modpath_static=
  modpath_shared=
  test -d metadata || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_env""... $ac_c" 1>&6
echo "configure:8644: checking whether to enable mod_env" >&5
    # Check whether --enable-env or --disable-env was given.
if test "${enable_env+set}" = set; then
  enableval="$enable_env"
  :
else
  enable_env=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_env" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_env" = "static"; then
    enable_env=yes
  elif test "$enable_env" = "yes"; then
    enable_env=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_env" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_env=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_env" != "yes"; then
      enable_env=no
    fi
  elif test "$enable_env" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_env=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_env=no
    fi
  fi
  if test "$enable_env" != "no"; then
            :
  fi
  echo "$ac_t""$enable_env$_apmod_extra_msg" 1>&6
  if test "$enable_env" != "no"; then
    case "$enable_env" in
    shared*)
      enable_env=`echo $enable_env|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES env"
      ;;
    *)
      MODLIST="$MODLIST env"
      if test "env" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_env.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_env.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_ENV_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_env.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ENV_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_ENV_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_mime_magic""... $ac_c" 1>&6
echo "configure:8737: checking whether to enable mod_mime_magic" >&5
    # Check whether --enable-mime-magic or --disable-mime-magic was given.
if test "${enable_mime_magic+set}" = set; then
  enableval="$enable_mime_magic"
  :
else
  enable_mime_magic=maybe-all
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_mime_magic" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_mime_magic" = "static"; then
    enable_mime_magic=yes
  elif test "$enable_mime_magic" = "yes"; then
    enable_mime_magic=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_mime_magic" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_mime_magic=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_mime_magic" != "yes"; then
      enable_mime_magic=no
    fi
  elif test "$enable_mime_magic" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_mime_magic=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_mime_magic=no
    fi
  fi
  if test "$enable_mime_magic" != "no"; then
            :
  fi
  echo "$ac_t""$enable_mime_magic$_apmod_extra_msg" 1>&6
  if test "$enable_mime_magic" != "no"; then
    case "$enable_mime_magic" in
    shared*)
      enable_mime_magic=`echo $enable_mime_magic|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES mime_magic"
      ;;
    *)
      MODLIST="$MODLIST mime_magic"
      if test "mime_magic" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_mime_magic.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_mime_magic.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_MIME_MAGIC_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_mime_magic.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MIME_MAGIC_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_MIME_MAGIC_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_cern_meta""... $ac_c" 1>&6
echo "configure:8830: checking whether to enable mod_cern_meta" >&5
    # Check whether --enable-cern-meta or --disable-cern-meta was given.
if test "${enable_cern_meta+set}" = set; then
  enableval="$enable_cern_meta"
  :
else
  enable_cern_meta=maybe-all
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_cern_meta" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_cern_meta" = "static"; then
    enable_cern_meta=yes
  elif test "$enable_cern_meta" = "yes"; then
    enable_cern_meta=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_cern_meta" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_cern_meta=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_cern_meta" != "yes"; then
      enable_cern_meta=no
    fi
  elif test "$enable_cern_meta" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_cern_meta=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_cern_meta=no
    fi
  fi
  if test "$enable_cern_meta" != "no"; then
            :
  fi
  echo "$ac_t""$enable_cern_meta$_apmod_extra_msg" 1>&6
  if test "$enable_cern_meta" != "no"; then
    case "$enable_cern_meta" in
    shared*)
      enable_cern_meta=`echo $enable_cern_meta|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES cern_meta"
      ;;
    *)
      MODLIST="$MODLIST cern_meta"
      if test "cern_meta" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_cern_meta.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_cern_meta.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CERN_META_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_cern_meta.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CERN_META_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CERN_META_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_expires""... $ac_c" 1>&6
echo "configure:8923: checking whether to enable mod_expires" >&5
    # Check whether --enable-expires or --disable-expires was given.
if test "${enable_expires+set}" = set; then
  enableval="$enable_expires"
  :
else
  enable_expires=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_expires" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_expires" = "static"; then
    enable_expires=yes
  elif test "$enable_expires" = "yes"; then
    enable_expires=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_expires" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_expires=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_expires" != "yes"; then
      enable_expires=no
    fi
  elif test "$enable_expires" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_expires=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_expires=no
    fi
  fi
  if test "$enable_expires" != "no"; then
            :
  fi
  echo "$ac_t""$enable_expires$_apmod_extra_msg" 1>&6
  if test "$enable_expires" != "no"; then
    case "$enable_expires" in
    shared*)
      enable_expires=`echo $enable_expires|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES expires"
      ;;
    *)
      MODLIST="$MODLIST expires"
      if test "expires" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_expires.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_expires.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_EXPIRES_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_expires.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_EXPIRES_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_EXPIRES_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_headers""... $ac_c" 1>&6
echo "configure:9016: checking whether to enable mod_headers" >&5
    # Check whether --enable-headers or --disable-headers was given.
if test "${enable_headers+set}" = set; then
  enableval="$enable_headers"
  :
else
  enable_headers=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_headers" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_headers" = "static"; then
    enable_headers=yes
  elif test "$enable_headers" = "yes"; then
    enable_headers=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_headers" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_headers=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_headers" != "yes"; then
      enable_headers=no
    fi
  elif test "$enable_headers" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_headers=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_headers=no
    fi
  fi
  if test "$enable_headers" != "no"; then
            :
  fi
  echo "$ac_t""$enable_headers$_apmod_extra_msg" 1>&6
  if test "$enable_headers" != "no"; then
    case "$enable_headers" in
    shared*)
      enable_headers=`echo $enable_headers|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES headers"
      ;;
    *)
      MODLIST="$MODLIST headers"
      if test "headers" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_headers.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_headers.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_HEADERS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_headers.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HEADERS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_HEADERS_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_ident""... $ac_c" 1>&6
echo "configure:9109: checking whether to enable mod_ident" >&5
    # Check whether --enable-ident or --disable-ident was given.
if test "${enable_ident+set}" = set; then
  enableval="$enable_ident"
  :
else
  enable_ident=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_ident" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_ident" = "static"; then
    enable_ident=yes
  elif test "$enable_ident" = "yes"; then
    enable_ident=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_ident" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_ident=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_ident" != "yes"; then
      enable_ident=no
    fi
  elif test "$enable_ident" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_ident=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_ident=no
    fi
  fi
  if test "$enable_ident" != "no"; then
            :
  fi
  echo "$ac_t""$enable_ident$_apmod_extra_msg" 1>&6
  if test "$enable_ident" != "no"; then
    case "$enable_ident" in
    shared*)
      enable_ident=`echo $enable_ident|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES ident"
      ;;
    *)
      MODLIST="$MODLIST ident"
      if test "ident" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_ident.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_ident.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_IDENT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_ident.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_IDENT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_IDENT_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_usertrack""... $ac_c" 1>&6
echo "configure:9203: checking whether to enable mod_usertrack" >&5
    # Check whether --enable-usertrack or --disable-usertrack was given.
if test "${enable_usertrack+set}" = set; then
  enableval="$enable_usertrack"
  :
else
  enable_usertrack=maybe-all
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_usertrack" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_usertrack" = "static"; then
    enable_usertrack=yes
  elif test "$enable_usertrack" = "yes"; then
    enable_usertrack=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_usertrack" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_usertrack=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_usertrack" != "yes"; then
      enable_usertrack=no
    fi
  elif test "$enable_usertrack" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_usertrack=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_usertrack=no
    fi
  fi
  if test "$enable_usertrack" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
  for ac_hdr in sys/times.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9245: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9250 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9255: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_func in times
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9284: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9289 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


                    echo $ac_n "checking whether to enable mod_usertrack""... $ac_c" 1>&6
echo "configure:9338: checking whether to enable mod_usertrack" >&5
                    if test "$enable_usertrack" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_usertrack has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_usertrack$_apmod_extra_msg" 1>&6
  if test "$enable_usertrack" != "no"; then
    case "$enable_usertrack" in
    shared*)
      enable_usertrack=`echo $enable_usertrack|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES usertrack"
      ;;
    *)
      MODLIST="$MODLIST usertrack"
      if test "usertrack" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_usertrack.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_usertrack.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_USERTRACK_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_usertrack.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_USERTRACK_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_USERTRACK_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_unique_id""... $ac_c" 1>&6
echo "configure:9403: checking whether to enable mod_unique_id" >&5
    # Check whether --enable-unique-id or --disable-unique-id was given.
if test "${enable_unique_id+set}" = set; then
  enableval="$enable_unique_id"
  :
else
  enable_unique_id=maybe-all
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_unique_id" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_unique_id" = "static"; then
    enable_unique_id=yes
  elif test "$enable_unique_id" = "yes"; then
    enable_unique_id=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_unique_id" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_unique_id=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_unique_id" != "yes"; then
      enable_unique_id=no
    fi
  elif test "$enable_unique_id" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_unique_id=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_unique_id=no
    fi
  fi
  if test "$enable_unique_id" != "no"; then
            :
  fi
  echo "$ac_t""$enable_unique_id$_apmod_extra_msg" 1>&6
  if test "$enable_unique_id" != "no"; then
    case "$enable_unique_id" in
    shared*)
      enable_unique_id=`echo $enable_unique_id|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES unique_id"
      ;;
    *)
      MODLIST="$MODLIST unique_id"
      if test "unique_id" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_unique_id.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_unique_id.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_UNIQUE_ID_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_unique_id.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_UNIQUE_ID_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_UNIQUE_ID_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_setenvif""... $ac_c" 1>&6
echo "configure:9496: checking whether to enable mod_setenvif" >&5
    # Check whether --enable-setenvif or --disable-setenvif was given.
if test "${enable_setenvif+set}" = set; then
  enableval="$enable_setenvif"
  :
else
  enable_setenvif=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_setenvif" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_setenvif" = "static"; then
    enable_setenvif=yes
  elif test "$enable_setenvif" = "yes"; then
    enable_setenvif=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_setenvif" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_setenvif=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_setenvif" != "yes"; then
      enable_setenvif=no
    fi
  elif test "$enable_setenvif" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_setenvif=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_setenvif=no
    fi
  fi
  if test "$enable_setenvif" != "no"; then
            :
  fi
  echo "$ac_t""$enable_setenvif$_apmod_extra_msg" 1>&6
  if test "$enable_setenvif" != "no"; then
    case "$enable_setenvif" in
    shared*)
      enable_setenvif=`echo $enable_setenvif|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES setenvif"
      ;;
    *)
      MODLIST="$MODLIST setenvif"
      if test "setenvif" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_setenvif.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_setenvif.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_SETENVIF_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_setenvif.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SETENVIF_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_SETENVIF_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_version""... $ac_c" 1>&6
echo "configure:9589: checking whether to enable mod_version" >&5
    # Check whether --enable-version or --disable-version was given.
if test "${enable_version+set}" = set; then
  enableval="$enable_version"
  :
else
  enable_version=maybe-all
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_version" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_version" = "static"; then
    enable_version=yes
  elif test "$enable_version" = "yes"; then
    enable_version=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_version" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_version=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_version" != "yes"; then
      enable_version=no
    fi
  elif test "$enable_version" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_version=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_version=no
    fi
  fi
  if test "$enable_version" != "no"; then
            :
  fi
  echo "$ac_t""$enable_version$_apmod_extra_msg" 1>&6
  if test "$enable_version" != "no"; then
    case "$enable_version" in
    shared*)
      enable_version=`echo $enable_version|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES version"
      ;;
    *)
      MODLIST="$MODLIST version"
      if test "version" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_version.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_version.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_VERSION_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_version.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_VERSION_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_VERSION_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"





  current_dir=proxy
  modpath_current=modules/proxy
  modpath_static=
  modpath_shared=
  test -d proxy || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


if test "$enable_proxy" = "shared"; then
  proxy_mods_enable=shared
elif test "$enable_proxy" = "yes"; then
  proxy_mods_enable=yes
else
  proxy_mods_enable=no
fi

proxy_objs="mod_proxy.lo proxy_util.lo"

  echo $ac_n "checking whether to enable mod_proxy""... $ac_c" 1>&6
echo "configure:9716: checking whether to enable mod_proxy" >&5
    # Check whether --enable-proxy or --disable-proxy was given.
if test "${enable_proxy+set}" = set; then
  enableval="$enable_proxy"
  :
else
  enable_proxy=$proxy_mods_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_proxy" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_proxy" = "static"; then
    enable_proxy=yes
  elif test "$enable_proxy" = "yes"; then
    enable_proxy=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_proxy" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_proxy=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_proxy" != "yes"; then
      enable_proxy=no
    fi
  elif test "$enable_proxy" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_proxy=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_proxy=no
    fi
  fi
  if test "$enable_proxy" != "no"; then
            :
  fi
  echo "$ac_t""$enable_proxy$_apmod_extra_msg" 1>&6
  if test "$enable_proxy" != "no"; then
    case "$enable_proxy" in
    shared*)
      enable_proxy=`echo $enable_proxy|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES proxy"
      ;;
    *)
      MODLIST="$MODLIST proxy"
      if test "proxy" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$proxy_objs"; then
    objects="mod_proxy.lo"
  else
    objects="$proxy_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_proxy.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_PROXY_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_proxy.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_PROXY_LDADD"
  

    
  fi


proxy_connect_objs="mod_proxy_connect.lo"
proxy_ftp_objs="mod_proxy_ftp.lo"
proxy_http_objs="mod_proxy_http.lo"
proxy_ajp_objs="mod_proxy_ajp.lo ajp_header.lo ajp_link.lo ajp_msg.lo ajp_utils.lo"
proxy_balancer_objs="mod_proxy_balancer.lo"

case "$host" in
  *os2*)
    # OS/2 DLLs must resolve all symbols at build time and
    # these sub-modules need some from the main proxy module
    proxy_connect_objs="$proxy_connect_objs mod_proxy.la"
    proxy_ftp_objs="$proxy_ftp_objs mod_proxy.la"
    proxy_http_objs="$proxy_http_objs mod_proxy.la"
    proxy_ajp_objs="$proxy_ajp_objs mod_proxy.la"
    proxy_balancer_objs="$proxy_balancer_objs mod_proxy.la"
    ;;
esac


  echo $ac_n "checking whether to enable mod_proxy_connect""... $ac_c" 1>&6
echo "configure:9828: checking whether to enable mod_proxy_connect" >&5
    # Check whether --enable-proxy-connect or --disable-proxy-connect was given.
if test "${enable_proxy_connect+set}" = set; then
  enableval="$enable_proxy_connect"
  :
else
  enable_proxy_connect=$proxy_mods_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_proxy_connect" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_proxy_connect" = "static"; then
    enable_proxy_connect=yes
  elif test "$enable_proxy_connect" = "yes"; then
    enable_proxy_connect=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_proxy_connect" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_proxy_connect=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_proxy_connect" != "yes"; then
      enable_proxy_connect=no
    fi
  elif test "$enable_proxy_connect" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_proxy_connect=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_proxy_connect=no
    fi
  fi
  if test "$enable_proxy_connect" != "no"; then
            :
  fi
  echo "$ac_t""$enable_proxy_connect$_apmod_extra_msg" 1>&6
  if test "$enable_proxy_connect" != "no"; then
    case "$enable_proxy_connect" in
    shared*)
      enable_proxy_connect=`echo $enable_proxy_connect|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES proxy_connect"
      ;;
    *)
      MODLIST="$MODLIST proxy_connect"
      if test "proxy_connect" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$proxy_connect_objs"; then
    objects="mod_proxy_connect.lo"
  else
    objects="$proxy_connect_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_proxy_connect.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_PROXY_CONNECT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_proxy_connect.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_CONNECT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_PROXY_CONNECT_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_proxy_ftp""... $ac_c" 1>&6
echo "configure:9921: checking whether to enable mod_proxy_ftp" >&5
    # Check whether --enable-proxy-ftp or --disable-proxy-ftp was given.
if test "${enable_proxy_ftp+set}" = set; then
  enableval="$enable_proxy_ftp"
  :
else
  enable_proxy_ftp=$proxy_mods_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_proxy_ftp" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_proxy_ftp" = "static"; then
    enable_proxy_ftp=yes
  elif test "$enable_proxy_ftp" = "yes"; then
    enable_proxy_ftp=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_proxy_ftp" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_proxy_ftp=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_proxy_ftp" != "yes"; then
      enable_proxy_ftp=no
    fi
  elif test "$enable_proxy_ftp" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_proxy_ftp=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_proxy_ftp=no
    fi
  fi
  if test "$enable_proxy_ftp" != "no"; then
            :
  fi
  echo "$ac_t""$enable_proxy_ftp$_apmod_extra_msg" 1>&6
  if test "$enable_proxy_ftp" != "no"; then
    case "$enable_proxy_ftp" in
    shared*)
      enable_proxy_ftp=`echo $enable_proxy_ftp|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES proxy_ftp"
      ;;
    *)
      MODLIST="$MODLIST proxy_ftp"
      if test "proxy_ftp" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$proxy_ftp_objs"; then
    objects="mod_proxy_ftp.lo"
  else
    objects="$proxy_ftp_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_proxy_ftp.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_PROXY_FTP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_proxy_ftp.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_FTP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_PROXY_FTP_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_proxy_http""... $ac_c" 1>&6
echo "configure:10014: checking whether to enable mod_proxy_http" >&5
    # Check whether --enable-proxy-http or --disable-proxy-http was given.
if test "${enable_proxy_http+set}" = set; then
  enableval="$enable_proxy_http"
  :
else
  enable_proxy_http=$proxy_mods_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_proxy_http" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_proxy_http" = "static"; then
    enable_proxy_http=yes
  elif test "$enable_proxy_http" = "yes"; then
    enable_proxy_http=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_proxy_http" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_proxy_http=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_proxy_http" != "yes"; then
      enable_proxy_http=no
    fi
  elif test "$enable_proxy_http" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_proxy_http=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_proxy_http=no
    fi
  fi
  if test "$enable_proxy_http" != "no"; then
            :
  fi
  echo "$ac_t""$enable_proxy_http$_apmod_extra_msg" 1>&6
  if test "$enable_proxy_http" != "no"; then
    case "$enable_proxy_http" in
    shared*)
      enable_proxy_http=`echo $enable_proxy_http|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES proxy_http"
      ;;
    *)
      MODLIST="$MODLIST proxy_http"
      if test "proxy_http" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$proxy_http_objs"; then
    objects="mod_proxy_http.lo"
  else
    objects="$proxy_http_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_proxy_http.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_PROXY_HTTP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_proxy_http.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_HTTP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_PROXY_HTTP_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_proxy_ajp""... $ac_c" 1>&6
echo "configure:10107: checking whether to enable mod_proxy_ajp" >&5
    # Check whether --enable-proxy-ajp or --disable-proxy-ajp was given.
if test "${enable_proxy_ajp+set}" = set; then
  enableval="$enable_proxy_ajp"
  :
else
  enable_proxy_ajp=$proxy_mods_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_proxy_ajp" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_proxy_ajp" = "static"; then
    enable_proxy_ajp=yes
  elif test "$enable_proxy_ajp" = "yes"; then
    enable_proxy_ajp=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_proxy_ajp" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_proxy_ajp=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_proxy_ajp" != "yes"; then
      enable_proxy_ajp=no
    fi
  elif test "$enable_proxy_ajp" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_proxy_ajp=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_proxy_ajp=no
    fi
  fi
  if test "$enable_proxy_ajp" != "no"; then
            :
  fi
  echo "$ac_t""$enable_proxy_ajp$_apmod_extra_msg" 1>&6
  if test "$enable_proxy_ajp" != "no"; then
    case "$enable_proxy_ajp" in
    shared*)
      enable_proxy_ajp=`echo $enable_proxy_ajp|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES proxy_ajp"
      ;;
    *)
      MODLIST="$MODLIST proxy_ajp"
      if test "proxy_ajp" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$proxy_ajp_objs"; then
    objects="mod_proxy_ajp.lo"
  else
    objects="$proxy_ajp_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_proxy_ajp.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_PROXY_AJP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_proxy_ajp.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_AJP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_PROXY_AJP_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_proxy_balancer""... $ac_c" 1>&6
echo "configure:10200: checking whether to enable mod_proxy_balancer" >&5
    # Check whether --enable-proxy-balancer or --disable-proxy-balancer was given.
if test "${enable_proxy_balancer+set}" = set; then
  enableval="$enable_proxy_balancer"
  :
else
  enable_proxy_balancer=$proxy_mods_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_proxy_balancer" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_proxy_balancer" = "static"; then
    enable_proxy_balancer=yes
  elif test "$enable_proxy_balancer" = "yes"; then
    enable_proxy_balancer=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_proxy_balancer" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_proxy_balancer=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_proxy_balancer" != "yes"; then
      enable_proxy_balancer=no
    fi
  elif test "$enable_proxy_balancer" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_proxy_balancer=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_proxy_balancer=no
    fi
  fi
  if test "$enable_proxy_balancer" != "no"; then
            :
  fi
  echo "$ac_t""$enable_proxy_balancer$_apmod_extra_msg" 1>&6
  if test "$enable_proxy_balancer" != "no"; then
    case "$enable_proxy_balancer" in
    shared*)
      enable_proxy_balancer=`echo $enable_proxy_balancer|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES proxy_balancer"
      ;;
    *)
      MODLIST="$MODLIST proxy_balancer"
      if test "proxy_balancer" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$proxy_balancer_objs"; then
    objects="mod_proxy_balancer.lo"
  else
    objects="$proxy_balancer_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_proxy_balancer.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_PROXY_BALANCER_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_proxy_balancer.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_PROXY_BALANCER_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_PROXY_BALANCER_LDADD"
  

    
  fi



  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_srcdir)/$modpath_current/../generators\""
    INCLUDES="-I\$(top_srcdir)/$modpath_current/../generators"
  else
    apr_addto_bugger="-I\$(top_srcdir)/$modpath_current/../generators"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"







  current_dir=ssl
  modpath_current=modules/ssl
  modpath_static=
  modpath_shared=
  test -d ssl || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


ssl_objs="mod_ssl.lo ssl_engine_config.lo ssl_engine_dh.lo ssl_engine_init.lo ssl_engine_io.lo ssl_engine_kernel.lo ssl_engine_log.lo ssl_engine_mutex.lo ssl_engine_pphrase.lo ssl_engine_rand.lo ssl_engine_vars.lo ssl_expr.lo ssl_expr_eval.lo ssl_expr_parse.lo ssl_expr_scan.lo ssl_scache.lo ssl_scache_dbm.lo ssl_scache_shmcb.lo ssl_scache_dc.lo ssl_util.lo ssl_util_ssl.lo "

  echo $ac_n "checking whether to enable mod_ssl""... $ac_c" 1>&6
echo "configure:10343: checking whether to enable mod_ssl" >&5
    # Check whether --enable-ssl or --disable-ssl was given.
if test "${enable_ssl+set}" = set; then
  enableval="$enable_ssl"
  :
else
  enable_ssl=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_ssl" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_ssl" = "static"; then
    enable_ssl=yes
  elif test "$enable_ssl" = "yes"; then
    enable_ssl=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_ssl" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_ssl=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_ssl" != "yes"; then
      enable_ssl=no
    fi
  elif test "$enable_ssl" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_ssl=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_ssl=no
    fi
  fi
  if test "$enable_ssl" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
    
if test "x$ap_ssltk_configured" = "x"; then
    ap_ssltk_base=""
  ap_ssltk_inc=""
  ap_ssltk_lib=""
  ap_ssltk_type=""

    echo $ac_n "checking for SSL/TLS toolkit base""... $ac_c" 1>&6
echo "configure:10389: checking for SSL/TLS toolkit base" >&5
  # Check whether --with-sslc or --without-sslc was given.
if test "${with_sslc+set}" = set; then
  withval="$with_sslc"
  
        if test "x$withval" != "xyes" -a "x$withval" != "x"; then
            ap_ssltk_base="`cd $withval ; pwd`"
    fi
    ap_ssltk_type="sslc"
  
fi

  # Check whether --with-ssl or --without-ssl was given.
if test "${with_ssl+set}" = set; then
  withval="$with_ssl"
  
        if test "x$withval" != "xyes" -a "x$withval" != "x"; then
            ap_ssltk_base="`cd $withval ; pwd`"
    fi
  
fi

  if test "x$ap_ssltk_base" = "x"; then
    echo "$ac_t""none" 1>&6
  else
    echo "$ac_t""$ap_ssltk_base" 1>&6
  fi

    saved_CPPFLAGS=$CPPFLAGS
  if test "x$ap_ssltk_base" != "x"; then
    ap_ssltk_inc="-I$ap_ssltk_base/include"
    CPPFLAGS="$CPPFLAGS $ap_ssltk_inc"
  fi
  if test "x$ap_ssltk_type" = "x"; then
    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
echo "configure:10424: checking for OpenSSL version" >&5
        for ac_hdr in openssl/opensslv.h openssl/ssl.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:10429: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10434 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10439: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ap_ssltk_type="openssl"
else
  echo "$ac_t""no" 1>&6
fi
done

    if test "$ap_ssltk_type" = "openssl"; then
            cat > conftest.$ac_ext <<EOF
#line 10467 "configure"
#include "confdefs.h"
#include <openssl/opensslv.h>
int main() {

#if !defined(OPENSSL_VERSION_NUMBER)
#error "Missing openssl version"
#endif
#if  (OPENSSL_VERSION_NUMBER < 0x009060af) \
 || ((OPENSSL_VERSION_NUMBER > 0x00907000) && (OPENSSL_VERSION_NUMBER < 0x0090702f))
#error "Insecure openssl version " OPENSSL_VERSION_TEXT
#endif
; return 0; }
EOF
if { (eval echo configure:10481: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""OK" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
         echo "$ac_t""not encouraging" 1>&6
       echo "WARNING: OpenSSL version may contain security vulnerabilities!"
       echo "         Ensure the latest security patches have been applied!"
      
fi
rm -f conftest*
            for ac_hdr in openssl/engine.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:10498: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10503 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10508: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

      if test -n "$PKGCONFIG"; then
        $PKGCONFIG openssl
        if test $? -eq 0; then
          ap_ssltk_inc="$ap_ssltk_inc `$PKGCONFIG --cflags-only-I openssl`"
          CPPFLAGS="$CPPFLAGS $ap_ssltk_inc"
        fi
      fi
    else
      echo "$ac_t""no OpenSSL headers found" 1>&6
    fi
  fi
  if test "$ap_ssltk_type" != "openssl"; then
        echo $ac_n "checking for SSL-C version""... $ac_c" 1>&6
echo "configure:10547: checking for SSL-C version" >&5
    for ac_hdr in sslc.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:10552: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10557 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10562: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ap_ssltk_type="sslc"
else
  echo "$ac_t""no" 1>&6
ap_ssltk_type=""
fi
done

    if test "$ap_ssltk_type" = "sslc"; then
      echo $ac_n "checking for SSL-C version""... $ac_c" 1>&6
echo "configure:10591: checking for SSL-C version" >&5
      cat > conftest.$ac_ext <<EOF
#line 10593 "configure"
#include "confdefs.h"
#include <sslc.h>
int main() {

#if !defined(SSLC_VERSION_NUMBER)
#error "Missing SSL-C version"
#endif
#if SSLC_VERSION_NUMBER < 0x2310
#define stringize_ver(x) #x
#error "Insecure SSL-C version " stringize_ver(SSLC_VERSION_NUMBER)
#endif
; return 0; }
EOF
if { (eval echo configure:10607: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""OK" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
         echo "$ac_t""not encouraging" 1>&6
       echo "WARNING: SSL-C version may contain security vulnerabilities!"
       echo "         Ensure the latest security patches have been applied!"
      
fi
rm -f conftest*
    else
      echo "$ac_t""no SSL-C headers found" 1>&6
    fi
  fi
    CPPFLAGS=$saved_CPPFLAGS
  if test "x$ap_ssltk_type" = "x"; then
    { echo "configure: error: ...No recognized SSL/TLS toolkit detected" 1>&2; exit 1; }
  fi

    saved_LDFLAGS=$LDFLAGS
  saved_LIBS=$LIBS
  if test "x$ap_ssltk_base" != "x"; then
    if test -d "$ap_ssltk_base/lib"; then
      ap_ssltk_lib="$ap_ssltk_base/lib"
    else
      ap_ssltk_lib="$ap_ssltk_base"
    fi
    LDFLAGS="$LDFLAGS -L$ap_ssltk_lib"
  fi
    LIBS="$LIBS `$apr_config --libs`"
  liberrors=""
  if test "$ap_ssltk_type" = "openssl"; then
    echo $ac_n "checking for SSLeay_version in -lcrypto""... $ac_c" 1>&6
echo "configure:10643: checking for SSLeay_version in -lcrypto" >&5
ac_lib_var=`echo crypto'_'SSLeay_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10651 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSLeay_version();

int main() {
SSLeay_version()
; return 0; }
EOF
if { (eval echo configure:10662: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo crypto | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lcrypto $LIBS"

else
  echo "$ac_t""no" 1>&6
liberrors="yes"
fi

    echo $ac_n "checking for SSL_CTX_new in -lssl""... $ac_c" 1>&6
echo "configure:10691: checking for SSL_CTX_new in -lssl" >&5
ac_lib_var=`echo ssl'_'SSL_CTX_new | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10699 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_new();

int main() {
SSL_CTX_new()
; return 0; }
EOF
if { (eval echo configure:10710: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo ssl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lssl $LIBS"

else
  echo "$ac_t""no" 1>&6
liberrors="yes"
fi

    for ac_func in ENGINE_init
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:10741: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10746 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:10769: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    for ac_func in ENGINE_load_builtin_engines
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:10796: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10801 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:10824: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  else
    echo $ac_n "checking for SSLC_library_version in -lsslc""... $ac_c" 1>&6
echo "configure:10850: checking for SSLC_library_version in -lsslc" >&5
ac_lib_var=`echo sslc'_'SSLC_library_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsslc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10858 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSLC_library_version();

int main() {
SSLC_library_version()
; return 0; }
EOF
if { (eval echo configure:10869: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo sslc | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsslc $LIBS"

else
  echo "$ac_t""no" 1>&6
liberrors="yes"
fi

    echo $ac_n "checking for SSL_CTX_new in -lsslc""... $ac_c" 1>&6
echo "configure:10898: checking for SSL_CTX_new in -lsslc" >&5
ac_lib_var=`echo sslc'_'SSL_CTX_new | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsslc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10906 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_new();

int main() {
SSL_CTX_new()
; return 0; }
EOF
if { (eval echo configure:10917: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo sslc | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsslc $LIBS"

else
  echo "$ac_t""no" 1>&6
liberrors="yes"
fi

    for ac_func in SSL_set_state
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:10948: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10953 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:10976: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  fi
  for ac_func in SSL_set_cert_store
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:11004: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11009 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:11032: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    LDFLAGS=$saved_LDFLAGS
  LIBS=$saved_LIBS
  if test "x$liberrors" != "x"; then
    { echo "configure: error: ... Error, SSL/TLS libraries were missing or unusable" 1>&2; exit 1; }
  fi

      if test "$ap_ssltk_type" = "openssl"; then
    cat >> confdefs.h <<\EOF
#define HAVE_OPENSSL 1
EOF

  else
    cat >> confdefs.h <<\EOF
#define HAVE_SSLC 1
EOF

  fi
    if test "x$ap_ssltk_inc" != "x"; then
    
  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"$ap_ssltk_inc\""
    INCLUDES="$ap_ssltk_inc"
  else
    apr_addto_bugger="$ap_ssltk_inc"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi

  fi
    if test "x$ap_ssltk_lib" != "x"; then
    
  if test "x$LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \""-L$ap_ssltk_lib"\""
    LDFLAGS=""-L$ap_ssltk_lib""
  else
    apr_addto_bugger=""-L$ap_ssltk_lib""
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
        LDFLAGS="$LDFLAGS $i"
      fi
    done
  fi

    if test "x$ap_platform_runtime_link_flag" != "x"; then
      
  if test "x$LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting LDFLAGS to \""$ap_platform_runtime_link_flag$ap_ssltk_lib"\""
    LDFLAGS=""$ap_platform_runtime_link_flag$ap_ssltk_lib""
  else
    apr_addto_bugger=""$ap_platform_runtime_link_flag$ap_ssltk_lib""
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to LDFLAGS"
        LDFLAGS="$LDFLAGS $i"
      fi
    done
  fi

    fi
  fi
  # Put SSL libraries in SSL_LIBS.
  if test "$ap_ssltk_type" = "openssl"; then
    
  test "x$silent" != "xyes" && echo "  forcing SSL_LIBS to \"-lssl -lcrypto\""
  SSL_LIBS="-lssl -lcrypto"

    if test -n "$PKGCONFIG"; then
      $PKGCONFIG openssl
      if test $? -eq 0; then
        ap_ssltk_libdep=`$PKGCONFIG --libs openssl`
        
  if test "x$SSL_LIBS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting SSL_LIBS to \"$ap_ssltk_libdep\""
    SSL_LIBS="$ap_ssltk_libdep"
  else
    apr_addto_bugger="$ap_ssltk_libdep"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $SSL_LIBS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to SSL_LIBS"
        SSL_LIBS="$SSL_LIBS $i"
      fi
    done
  fi

      fi
    fi
  else
    
  test "x$silent" != "xyes" && echo "  forcing SSL_LIBS to \"-lsslc\""
  SSL_LIBS="-lsslc"

  fi
  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SSL_LIBS"
  

fi

    
  test "x$silent" != "xyes" && echo "  forcing MOD_SSL_LDADD to \"\$(SSL_LIBS)\""
  MOD_SSL_LDADD="\$(SSL_LIBS)"

    
  echo $ac_n "checking whether Distcache is required""... $ac_c" 1>&6
echo "configure:11193: checking whether Distcache is required" >&5
  ap_ssltk_dc="no"
  tmp_nomessage=""
  tmp_forced="no"
  # Check whether --enable-distcache or --disable-distcache was given.
if test "${enable_distcache+set}" = set; then
  enableval="$enable_distcache"
  ap_ssltk_dc="$enableval"
    tmp_nomessage=""
    tmp_forced="yes"
    if test "x$ap_ssltk_dc" = "x"; then
      ap_ssltk_dc="yes"
            tmp_forced="no"
    fi
    if test "$ap_ssltk_dc" != "yes" -a "$ap_ssltk_dc" != "no"; then
      tmp_nomessage="--enable-distcache had illegal syntax - disabling"
      ap_ssltk_dc="no"
    fi
fi

  if test "$tmp_forced" = "no"; then
    echo "$ac_t""$ap_ssltk_dc (default)" 1>&6
  else
    echo "$ac_t""$ap_ssltk_dc (specified)" 1>&6
  fi
  if test "$tmp_forced" = "yes" -a "x$ap_ssltk_dc" = "xno" -a "x$tmp_nomessage" != "x"; then
    { echo "configure: error: distcache support failed: $tmp_nomessage" 1>&2; exit 1; }
  fi
  if test "$ap_ssltk_dc" = "yes"; then
    ac_safe=`echo "distcache/dc_client.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for distcache/dc_client.h""... $ac_c" 1>&6
echo "configure:11224: checking for distcache/dc_client.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11229 "configure"
#include "confdefs.h"
#include <distcache/dc_client.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11234: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
tmp_nomessage="can't include distcache headers"
      ap_ssltk_dc="no"
fi

    if test "$tmp_forced" = "yes" -a "x$ap_ssltk_dc" = "xno"; then
      { echo "configure: error: distcache support failed: $tmp_nomessage" 1>&2; exit 1; }
    fi
  fi
  if test "$ap_ssltk_dc" = "yes"; then
    echo $ac_n "checking for Distcache version""... $ac_c" 1>&6
echo "configure:11263: checking for Distcache version" >&5
    cat > conftest.$ac_ext <<EOF
#line 11265 "configure"
#include "confdefs.h"
#include <distcache/dc_client.h>
int main() {
#if DISTCACHE_CLIENT_API != 0x0001
#error "distcache API version is unrecognised"
#endif
; return 0; }
EOF
if { (eval echo configure:11274: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  tmp_nomessage="distcache has an unsupported API version"
ap_ssltk_dc="no"
fi
rm -f conftest*
    echo "$ac_t""$ap_ssltk_dc" 1>&6
    if test "$tmp_forced" = "yes" -a "x$ap_ssltk_dc" = "xno"; then
      { echo "configure: error: distcache support failed: $tmp_nomessage" 1>&2; exit 1; }
    fi
  fi
  if test "$ap_ssltk_dc" = "yes"; then
    echo $ac_n "checking for Distcache libraries""... $ac_c" 1>&6
echo "configure:11291: checking for Distcache libraries" >&5
    save_libs=$LIBS
    LIBS="$LIBS -ldistcache -lnal"
    cat > conftest.$ac_ext <<EOF
#line 11295 "configure"
#include "confdefs.h"
#include <distcache/dc_client.h>
int main() {
DC_CTX *foo = DC_CTX_new((const char *)0,0);
; return 0; }
EOF
if { (eval echo configure:11302: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  tmp_no_message="failed to link with distcache libraries"
      ap_ssltk_dc="no"
fi
rm -f conftest*
    LIBS=$save_libs
    echo "$ac_t""$ap_ssltk_dc" 1>&6
    if test "$tmp_forced" = "yes" -a "x$ap_ssltk_dc" = "xno"; then
      { echo "configure: error: distcache support failed: $tmp_nomessage" 1>&2; exit 1; }
    else
      
  if test "x$MOD_SSL_LDADD" = "x"; then
    test "x$silent" != "xyes" && echo "  setting MOD_SSL_LDADD to \"-ldistcache -lnal\""
    MOD_SSL_LDADD="-ldistcache -lnal"
  else
    apr_addto_bugger="-ldistcache -lnal"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $MOD_SSL_LDADD; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_SSL_LDADD"
        MOD_SSL_LDADD="$MOD_SSL_LDADD $i"
      fi
    done
  fi

      cat >> confdefs.h <<\EOF
#define HAVE_DISTCACHE 1
EOF

    fi
  fi

    if test "x$enable_ssl" = "xshared"; then
       # The only symbol which needs to be exported is the module
       # structure, so ask libtool to hide everything else:
       
  if test "x$MOD_SSL_LDADD" = "x"; then
    test "x$silent" != "xyes" && echo "  setting MOD_SSL_LDADD to \"-export-symbols-regex ssl_module\""
    MOD_SSL_LDADD="-export-symbols-regex ssl_module"
  else
    apr_addto_bugger="-export-symbols-regex ssl_module"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $MOD_SSL_LDADD; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to MOD_SSL_LDADD"
        MOD_SSL_LDADD="$MOD_SSL_LDADD $i"
      fi
    done
  fi

    fi

                    echo $ac_n "checking whether to enable mod_ssl""... $ac_c" 1>&6
echo "configure:11372: checking whether to enable mod_ssl" >&5
                    if test "$enable_ssl" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_ssl has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_ssl$_apmod_extra_msg" 1>&6
  if test "$enable_ssl" != "no"; then
    case "$enable_ssl" in
    shared*)
      enable_ssl=`echo $enable_ssl|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES ssl"
      ;;
    *)
      MODLIST="$MODLIST ssl"
      if test "ssl" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$ssl_objs"; then
    objects="mod_ssl.lo"
  else
    objects="$ssl_objs"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_ssl.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_SSL_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_ssl.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SSL_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_SSL_LDADD"
  

    
  fi


# Ensure that other modules can pick up mod_ssl.h

  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_srcdir)/$modpath_current\""
    INCLUDES="-I\$(top_srcdir)/$modpath_current"
  else
    apr_addto_bugger="-I\$(top_srcdir)/$modpath_current"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=test
  modpath_current=modules/test
  modpath_static=
  modpath_shared=
  test -d test || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_optional_hook_export""... $ac_c" 1>&6
echo "configure:11485: checking whether to enable mod_optional_hook_export" >&5
    # Check whether --enable-optional-hook-export or --disable-optional-hook-export was given.
if test "${enable_optional_hook_export+set}" = set; then
  enableval="$enable_optional_hook_export"
  :
else
  enable_optional_hook_export=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_optional_hook_export" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_optional_hook_export" = "static"; then
    enable_optional_hook_export=yes
  elif test "$enable_optional_hook_export" = "yes"; then
    enable_optional_hook_export=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_optional_hook_export" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_optional_hook_export=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_optional_hook_export" != "yes"; then
      enable_optional_hook_export=no
    fi
  elif test "$enable_optional_hook_export" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_optional_hook_export=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_optional_hook_export=no
    fi
  fi
  if test "$enable_optional_hook_export" != "no"; then
            :
  fi
  echo "$ac_t""$enable_optional_hook_export$_apmod_extra_msg" 1>&6
  if test "$enable_optional_hook_export" != "no"; then
    case "$enable_optional_hook_export" in
    shared*)
      enable_optional_hook_export=`echo $enable_optional_hook_export|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES optional_hook_export"
      ;;
    *)
      MODLIST="$MODLIST optional_hook_export"
      if test "optional_hook_export" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_optional_hook_export.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_optional_hook_export.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_OPTIONAL_HOOK_EXPORT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_optional_hook_export.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_HOOK_EXPORT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_OPTIONAL_HOOK_EXPORT_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_optional_hook_import""... $ac_c" 1>&6
echo "configure:11578: checking whether to enable mod_optional_hook_import" >&5
    # Check whether --enable-optional-hook-import or --disable-optional-hook-import was given.
if test "${enable_optional_hook_import+set}" = set; then
  enableval="$enable_optional_hook_import"
  :
else
  enable_optional_hook_import=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_optional_hook_import" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_optional_hook_import" = "static"; then
    enable_optional_hook_import=yes
  elif test "$enable_optional_hook_import" = "yes"; then
    enable_optional_hook_import=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_optional_hook_import" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_optional_hook_import=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_optional_hook_import" != "yes"; then
      enable_optional_hook_import=no
    fi
  elif test "$enable_optional_hook_import" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_optional_hook_import=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_optional_hook_import=no
    fi
  fi
  if test "$enable_optional_hook_import" != "no"; then
            :
  fi
  echo "$ac_t""$enable_optional_hook_import$_apmod_extra_msg" 1>&6
  if test "$enable_optional_hook_import" != "no"; then
    case "$enable_optional_hook_import" in
    shared*)
      enable_optional_hook_import=`echo $enable_optional_hook_import|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES optional_hook_import"
      ;;
    *)
      MODLIST="$MODLIST optional_hook_import"
      if test "optional_hook_import" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_optional_hook_import.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_optional_hook_import.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_OPTIONAL_HOOK_IMPORT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_optional_hook_import.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_HOOK_IMPORT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_OPTIONAL_HOOK_IMPORT_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_optional_fn_import""... $ac_c" 1>&6
echo "configure:11671: checking whether to enable mod_optional_fn_import" >&5
    # Check whether --enable-optional-fn-import or --disable-optional-fn-import was given.
if test "${enable_optional_fn_import+set}" = set; then
  enableval="$enable_optional_fn_import"
  :
else
  enable_optional_fn_import=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_optional_fn_import" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_optional_fn_import" = "static"; then
    enable_optional_fn_import=yes
  elif test "$enable_optional_fn_import" = "yes"; then
    enable_optional_fn_import=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_optional_fn_import" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_optional_fn_import=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_optional_fn_import" != "yes"; then
      enable_optional_fn_import=no
    fi
  elif test "$enable_optional_fn_import" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_optional_fn_import=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_optional_fn_import=no
    fi
  fi
  if test "$enable_optional_fn_import" != "no"; then
            :
  fi
  echo "$ac_t""$enable_optional_fn_import$_apmod_extra_msg" 1>&6
  if test "$enable_optional_fn_import" != "no"; then
    case "$enable_optional_fn_import" in
    shared*)
      enable_optional_fn_import=`echo $enable_optional_fn_import|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES optional_fn_import"
      ;;
    *)
      MODLIST="$MODLIST optional_fn_import"
      if test "optional_fn_import" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_optional_fn_import.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_optional_fn_import.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_OPTIONAL_FN_IMPORT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_optional_fn_import.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_FN_IMPORT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_OPTIONAL_FN_IMPORT_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_optional_fn_export""... $ac_c" 1>&6
echo "configure:11764: checking whether to enable mod_optional_fn_export" >&5
    # Check whether --enable-optional-fn-export or --disable-optional-fn-export was given.
if test "${enable_optional_fn_export+set}" = set; then
  enableval="$enable_optional_fn_export"
  :
else
  enable_optional_fn_export=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_optional_fn_export" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_optional_fn_export" = "static"; then
    enable_optional_fn_export=yes
  elif test "$enable_optional_fn_export" = "yes"; then
    enable_optional_fn_export=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_optional_fn_export" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_optional_fn_export=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_optional_fn_export" != "yes"; then
      enable_optional_fn_export=no
    fi
  elif test "$enable_optional_fn_export" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_optional_fn_export=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_optional_fn_export=no
    fi
  fi
  if test "$enable_optional_fn_export" != "no"; then
            :
  fi
  echo "$ac_t""$enable_optional_fn_export$_apmod_extra_msg" 1>&6
  if test "$enable_optional_fn_export" != "no"; then
    case "$enable_optional_fn_export" in
    shared*)
      enable_optional_fn_export=`echo $enable_optional_fn_export|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES optional_fn_export"
      ;;
    *)
      MODLIST="$MODLIST optional_fn_export"
      if test "optional_fn_export" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_optional_fn_export.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_optional_fn_export.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_OPTIONAL_FN_EXPORT_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_optional_fn_export.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_OPTIONAL_FN_EXPORT_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_OPTIONAL_FN_EXPORT_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"



if test "$OS" = "beos" ; then
    
  if test "x$CFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CFLAGS to \"-DBEOS\""
    CFLAGS="-DBEOS"
  else
    apr_addto_bugger="-DBEOS"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CFLAGS"
        CFLAGS="$CFLAGS $i"
      fi
    done
  fi

fi

echo $ac_n "checking for target platform""... $ac_c" 1>&6
echo "configure:11895: checking for target platform" >&5

case $host in
*beos*)
  OS="beos"
  OS_DIR=$OS
  ;;
*pc-os2-emx*)
  OS="os2"
  OS_DIR=$OS
  ;;
bs2000*)
  OS="unix"
  OS_DIR=$OS
  ;;
*cygwin*)
  OS="cygwin"
  OS_DIR="unix"
  ;;
*)
  OS="unix"
  OS_DIR=$OS;;
esac

echo "$ac_t""$OS" 1>&6

  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES os/${OS_DIR}/Makefile"


if test "$OS" = "os2" ; then
  
  if test "x$CFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CFLAGS to \"-DOS2 -O2\""
    CFLAGS="-DOS2 -O2"
  else
    apr_addto_bugger="-DOS2 -O2"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CFLAGS"
        CFLAGS="$CFLAGS $i"
      fi
    done
  fi

fi

if test "$OS" = "unix" ; then
    
  echo $ac_n "checking for rlim_t""... $ac_c" 1>&6
echo "configure:11951: checking for rlim_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_rlim_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 11957 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/time.h>
#include <sys/resource.h>

int main() {
rlim_t spoon;
; return 0; }
EOF
if { (eval echo configure:11968: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
      ac_cv_type_rlim_t=yes
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_rlim_t=no
    
fi
rm -f conftest*
  
fi

echo "$ac_t""$ac_cv_type_rlim_t" 1>&6
  if test "$ac_cv_type_rlim_t" = "no" ; then
      cat >> confdefs.h <<\EOF
#define rlim_t int
EOF

  fi


    for ac_hdr in sys/time.h sys/resource.h sys/sem.h sys/ipc.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11997: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12002 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12007: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


    for ac_func in setsid killpg
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12037: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12042 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12065: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi



for ac_hdr in bstring.h unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:12097: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12102 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12107: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




for ac_func in syslog
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12139: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12144 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


    for ac_hdr in sys/times.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:12196: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12201 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12206: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    for ac_func in times
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12235: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12240 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12263: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking which MPM to use""... $ac_c" 1>&6
echo "configure:12289: checking which MPM to use" >&5
# Check whether --with-mpm or --without-mpm was given.
if test "${with_mpm+set}" = set; then
  withval="$with_mpm"
  
  APACHE_MPM=$withval

else
  
  if test "x$APACHE_MPM" = "x"; then
    APACHE_MPM=prefork
  fi

fi

echo "$ac_t""$APACHE_MPM" 1>&6

apache_cv_mpm=$APACHE_MPM
	
ap_mpm_is_threaded ()
{
    if test "$apache_cv_mpm" = "worker" -o "$apache_cv_mpm" = "event" ; then
        return 0
    else
        return 1
    fi
}

ap_mpm_is_experimental ()
{
    if test "$apache_cv_mpm" = "event" ; then
        return 0
    else
        return 1
    fi
}

if ap_mpm_is_threaded; then
  
apr_old_cppflags=$CPPFLAGS
CPPFLAGS="$CPPFLAGS $INCLUDES"
cat > conftest.$ac_ext <<EOF
#line 12331 "configure"
#include "confdefs.h"

#include <apr.h>
#if APR_HAS_THREADS
YES_IS_DEFINED
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "YES_IS_DEFINED" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_define_APR_HAS_THREADS=yes
else
  rm -rf conftest*
  ac_cv_define_APR_HAS_THREADS=no
fi
rm -f conftest*

CPPFLAGS=$apr_old_cppflags


  if test "x$ac_cv_define_APR_HAS_THREADS" = "xno"; then
    echo "$ac_t""The currently selected MPM requires threads which your system seems to lack" 1>&6
    echo $ac_n "checking checking for replacement""... $ac_c" 1>&6
echo "configure:12356: checking checking for replacement" >&5
    echo "$ac_t""prefork selected" 1>&6
    apache_cv_mpm=prefork
  else
    case $host in
      *-linux-*)
        case `uname -r` in
          2.0* )
                                                echo "Threaded MPM's are not supported on this platform"
            echo $ac_n "checking checking for replacement""... $ac_c" 1>&6
echo "configure:12366: checking checking for replacement" >&5
            echo "$ac_t""prefork selected" 1>&6
            apache_cv_mpm=prefork
          ;;
        esac
      ;;
    esac
  fi
fi


  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES server/mpm/Makefile"


MPM_NAME=$apache_cv_mpm
if ap_mpm_is_experimental; then
  echo "configure: warning: You have selected an EXPERIMENTAL MPM.  Be warned!" 1>&2
  MPM_SUBDIR_NAME=experimental/$MPM_NAME
else
  MPM_SUBDIR_NAME=$MPM_NAME
fi
MPM_DIR=server/mpm/$MPM_SUBDIR_NAME
MPM_LIB=$MPM_DIR/lib${MPM_NAME}.la

if test ! -f "$abs_srcdir/$MPM_DIR/mpm.h"; then
    { echo "configure: error: the selected mpm -- $apache_cv_mpm -- is not supported" 1>&2; exit 1; }
fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MPM_NAME"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MPM_SUBDIR_NAME"
  

MODLIST="$MODLIST mpm_${MPM_NAME}"


if test "$MPM_NAME" = "prefork" ; then
    
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES server/mpm/$MPM_NAME/Makefile"

fi

htpasswd_LTFLAGS=""
htdigest_LTFLAGS=""
rotatelogs_LTFLAGS=""
logresolve_LTFLAGS=""
htdbm_LTFLAGS=""
ab_LTFLAGS=""
checkgid_LTFLAGS=""
htcacheclean_LTFLAGS=""
httxt2dbm_LTFLAGS=""

# Check whether --enable-static-support or --disable-static-support was given.
if test "${enable_static_support+set}" = set; then
  enableval="$enable_static_support"
  
if test "$enableval" = "yes" ; then
  
  if test "x$htpasswd_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htpasswd_LTFLAGS to \"-static\""
    htpasswd_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htpasswd_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htpasswd_LTFLAGS"
        htpasswd_LTFLAGS="$htpasswd_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$htdigest_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htdigest_LTFLAGS to \"-static\""
    htdigest_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htdigest_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htdigest_LTFLAGS"
        htdigest_LTFLAGS="$htdigest_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$rotatelogs_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting rotatelogs_LTFLAGS to \"-static\""
    rotatelogs_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $rotatelogs_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to rotatelogs_LTFLAGS"
        rotatelogs_LTFLAGS="$rotatelogs_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$logresolve_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting logresolve_LTFLAGS to \"-static\""
    logresolve_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $logresolve_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to logresolve_LTFLAGS"
        logresolve_LTFLAGS="$logresolve_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$htdbm_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htdbm_LTFLAGS to \"-static\""
    htdbm_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htdbm_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htdbm_LTFLAGS"
        htdbm_LTFLAGS="$htdbm_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$ab_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting ab_LTFLAGS to \"-static\""
    ab_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $ab_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to ab_LTFLAGS"
        ab_LTFLAGS="$ab_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$checkgid_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting checkgid_LTFLAGS to \"-static\""
    checkgid_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $checkgid_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to checkgid_LTFLAGS"
        checkgid_LTFLAGS="$checkgid_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$htcacheclean_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htcacheclean_LTFLAGS to \"-static\""
    htcacheclean_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htcacheclean_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htcacheclean_LTFLAGS"
        htcacheclean_LTFLAGS="$htcacheclean_LTFLAGS $i"
      fi
    done
  fi

  
  if test "x$httxt2dbm_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting httxt2dbm_LTFLAGS to \"-static\""
    httxt2dbm_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $httxt2dbm_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to httxt2dbm_LTFLAGS"
        httxt2dbm_LTFLAGS="$httxt2dbm_LTFLAGS $i"
      fi
    done
  fi

fi

fi


# Check whether --enable-static-htpasswd or --disable-static-htpasswd was given.
if test "${enable_static_htpasswd+set}" = set; then
  enableval="$enable_static_htpasswd"
  
if test "$enableval" = "yes" ; then
  
  if test "x$htpasswd_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htpasswd_LTFLAGS to \"-static\""
    htpasswd_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htpasswd_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htpasswd_LTFLAGS"
        htpasswd_LTFLAGS="$htpasswd_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$htpasswd_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling htpasswd_LTFLAGS"
    htpasswd_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $htpasswd_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from htpasswd_LTFLAGS"
      htpasswd_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST htpasswd_LTFLAGS"
  


# Check whether --enable-static-htdigest or --disable-static-htdigest was given.
if test "${enable_static_htdigest+set}" = set; then
  enableval="$enable_static_htdigest"
  
if test "$enableval" = "yes" ; then
  
  if test "x$htdigest_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htdigest_LTFLAGS to \"-static\""
    htdigest_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htdigest_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htdigest_LTFLAGS"
        htdigest_LTFLAGS="$htdigest_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$htdigest_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling htdigest_LTFLAGS"
    htdigest_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $htdigest_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from htdigest_LTFLAGS"
      htdigest_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST htdigest_LTFLAGS"
  


# Check whether --enable-static-rotatelogs or --disable-static-rotatelogs was given.
if test "${enable_static_rotatelogs+set}" = set; then
  enableval="$enable_static_rotatelogs"
  
if test "$enableval" = "yes" ; then
  
  if test "x$rotatelogs_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting rotatelogs_LTFLAGS to \"-static\""
    rotatelogs_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $rotatelogs_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to rotatelogs_LTFLAGS"
        rotatelogs_LTFLAGS="$rotatelogs_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$rotatelogs_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling rotatelogs_LTFLAGS"
    rotatelogs_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $rotatelogs_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from rotatelogs_LTFLAGS"
      rotatelogs_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST rotatelogs_LTFLAGS"
  


# Check whether --enable-static-logresolve or --disable-static-logresolve was given.
if test "${enable_static_logresolve+set}" = set; then
  enableval="$enable_static_logresolve"
  
if test "$enableval" = "yes" ; then
  
  if test "x$logresolve_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting logresolve_LTFLAGS to \"-static\""
    logresolve_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $logresolve_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to logresolve_LTFLAGS"
        logresolve_LTFLAGS="$logresolve_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$logresolve_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling logresolve_LTFLAGS"
    logresolve_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $logresolve_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from logresolve_LTFLAGS"
      logresolve_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST logresolve_LTFLAGS"
  


# Check whether --enable-static-htdbm or --disable-static-htdbm was given.
if test "${enable_static_htdbm+set}" = set; then
  enableval="$enable_static_htdbm"
  
if test "$enableval" = "yes" ; then
  
  if test "x$htdbm_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htdbm_LTFLAGS to \"-static\""
    htdbm_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htdbm_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htdbm_LTFLAGS"
        htdbm_LTFLAGS="$htdbm_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$htdbm_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling htdbm_LTFLAGS"
    htdbm_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $htdbm_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from htdbm_LTFLAGS"
      htdbm_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST htdbm_LTFLAGS"
  


# Check whether --enable-static-ab or --disable-static-ab was given.
if test "${enable_static_ab+set}" = set; then
  enableval="$enable_static_ab"
  
if test "$enableval" = "yes" ; then
  
  if test "x$ab_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting ab_LTFLAGS to \"-static\""
    ab_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $ab_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to ab_LTFLAGS"
        ab_LTFLAGS="$ab_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$ab_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling ab_LTFLAGS"
    ab_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $ab_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from ab_LTFLAGS"
      ab_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST ab_LTFLAGS"
  


# Check whether --enable-static-checkgid or --disable-static-checkgid was given.
if test "${enable_static_checkgid+set}" = set; then
  enableval="$enable_static_checkgid"
  
if test "$enableval" = "yes" ; then
  
  if test "x$checkgid_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting checkgid_LTFLAGS to \"-static\""
    checkgid_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $checkgid_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to checkgid_LTFLAGS"
        checkgid_LTFLAGS="$checkgid_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$checkgid_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling checkgid_LTFLAGS"
    checkgid_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $checkgid_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from checkgid_LTFLAGS"
      checkgid_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST checkgid_LTFLAGS"
  


# Check whether --enable-static-htcacheclean or --disable-static-htcacheclean was given.
if test "${enable_static_htcacheclean+set}" = set; then
  enableval="$enable_static_htcacheclean"
  
if test "$enableval" = "yes" ; then
  
  if test "x$htcacheclean_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting htcacheclean_LTFLAGS to \"-static\""
    htcacheclean_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $htcacheclean_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to htcacheclean_LTFLAGS"
        htcacheclean_LTFLAGS="$htcacheclean_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$htcacheclean_LTFLAGS" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling htcacheclean_LTFLAGS"
    htcacheclean_LTFLAGS=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $htcacheclean_LTFLAGS; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from htcacheclean_LTFLAGS"
      htcacheclean_LTFLAGS=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST htcacheclean_LTFLAGS"
  


# Check whether --enable-static-httxt2dbm or --disable-static-httxt2dbm was given.
if test "${enable_static_httxt2dbm+set}" = set; then
  enableval="$enable_static_httxt2dbm"
  
if test "$enableval" = "yes" ; then
  
  if test "x$httxt2dbm_LTFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting httxt2dbm_LTFLAGS to \"-static\""
    httxt2dbm_LTFLAGS="-static"
  else
    apr_addto_bugger="-static"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $httxt2dbm_LTFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to httxt2dbm_LTFLAGS"
        httxt2dbm_LTFLAGS="$httxt2dbm_LTFLAGS $i"
      fi
    done
  fi

else
  
  if test "x$httxt2dbm" = "x-static"; then
    test "x$silent" != "xyes" && echo "  nulling httxt2dbm"
    httxt2dbm=""
  else
    apr_new_bugger=""
    apr_removed=0
    for i in $httxt2dbm; do
      if test "x$i" != "x-static"; then
        apr_new_bugger="$apr_new_bugger $i"
      else
        apr_removed=1
      fi
    done
    if test $apr_removed = "1"; then
      test "x$silent" != "xyes" && echo "  removed \"-static\" from httxt2dbm"
      httxt2dbm=$apr_new_bugger
    fi
  fi

fi

fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST httxt2dbm_LTFLAGS"
  


case $host in
    *aix*)
        # this works in any locale, unlike the default command below, which
        # fails in a non-English locale if the hard limit is unlimited
        # since the display of the limit will translate "unlimited", but
        # ulimit only accepts English "unlimited" on input
        APACHECTL_ULIMIT="ulimit -S -n unlimited"
        ;;
    *alpha*-dec-osf*)
        # Tru64: -H is for setting, not retrieving
        APACHECTL_ULIMIT="ulimit -S -n \`ulimit -h -n\`"
        ;;
    *)
        if TMP_ULIMIT=`ulimit -H -n` && ulimit -S -n $TMP_ULIMIT ; then
            APACHECTL_ULIMIT="ulimit -S -n \`ulimit -H -n\`"
        else
            APACHECTL_ULIMIT=""
        fi
        ;;
esac

  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APACHECTL_ULIMIT"
  




  current_dir=http
  modpath_current=modules/http
  modpath_static=
  modpath_shared=
  test -d http || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


http_objects="http_core.lo http_protocol.lo http_request.lo http_filters.lo chunk_filter.lo byterange_filter.lo http_etag.lo"

if test "$enable_http" = "yes"; then
    enable_http="static"
elif test "$enable_http" = "shared"; then
    { echo "configure: error: mod_http can not be built as a shared DSO" 1>&2; exit 1; }
fi


  echo $ac_n "checking whether to enable mod_http""... $ac_c" 1>&6
echo "configure:13169: checking whether to enable mod_http" >&5
    # Check whether --enable-http or --disable-http was given.
if test "${enable_http+set}" = set; then
  enableval="$enable_http"
  :
else
  enable_http=static
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_http" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_http" = "static"; then
    enable_http=yes
  elif test "$enable_http" = "yes"; then
    enable_http=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_http" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_http=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_http" != "yes"; then
      enable_http=no
    fi
  elif test "$enable_http" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_http=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_http=no
    fi
  fi
  if test "$enable_http" != "no"; then
            :
  fi
  echo "$ac_t""$enable_http$_apmod_extra_msg" 1>&6
  if test "$enable_http" != "no"; then
    case "$enable_http" in
    shared*)
      enable_http=`echo $enable_http|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES http"
      ;;
    *)
      MODLIST="$MODLIST http"
      if test "http" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$http_objects"; then
    objects="mod_http.lo"
  else
    objects="$http_objects"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_http.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_HTTP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_http.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_HTTP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_HTTP_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_mime""... $ac_c" 1>&6
echo "configure:13262: checking whether to enable mod_mime" >&5
    # Check whether --enable-mime or --disable-mime was given.
if test "${enable_mime+set}" = set; then
  enableval="$enable_mime"
  :
else
  enable_mime=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_mime" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_mime" = "static"; then
    enable_mime=yes
  elif test "$enable_mime" = "yes"; then
    enable_mime=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_mime" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_mime=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_mime" != "yes"; then
      enable_mime=no
    fi
  elif test "$enable_mime" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_mime=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_mime=no
    fi
  fi
  if test "$enable_mime" != "no"; then
            :
  fi
  echo "$ac_t""$enable_mime$_apmod_extra_msg" 1>&6
  if test "$enable_mime" != "no"; then
    case "$enable_mime" in
    shared*)
      enable_mime=`echo $enable_mime|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES mime"
      ;;
    *)
      MODLIST="$MODLIST mime"
      if test "mime" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_mime.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_mime.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_MIME_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_mime.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_MIME_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_MIME_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"



echo $ac_n "checking for extra modules""... $ac_c" 1>&6
echo "configure:13369: checking for extra modules" >&5
# Check whether --with-module or --without-module was given.
if test "${with_module+set}" = set; then
  withval="$with_module"
  
    as_save_IFS="$IFS"; IFS=","
    for mod in $withval
    do
      modtype=`echo $mod | sed -e's/\(.*\):.*/\1/'`
      pkg=`echo $mod | sed -e's/.*:\(.*\)/\1/'`
      modfilec=`echo $pkg | sed -e 's;^.*/;;'`
      modfileo=`echo $pkg | sed -e 's;^.*/;;' -e 's;\.c$;.o;'`
      modpath_current="modules/$modtype"
      if test "x$mod" != "x$modpath_current/$modfilec"; then
        if test ! -d "$modpath_current"; then
          mkdir $modpath_current
          echo 'include $(top_srcdir)/build/special.mk' > $modpath_current/Makefile.in
        fi
        cp $pkg $modpath_current/$modfilec
      fi
      module=`echo $pkg | sed -e 's;\(.*/\)*mod_\(.*\).c;\2;'`
      objects="mod_$module.lo"
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_$module.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      if test ! -s "$modpath_current/modules.mk"; then
        cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects
DISTCLEAN_TARGETS = modules.mk
static = $libname
shared =
EOF
      else
        cat >>$modpath_current/modules.mk.tmp<<EOF
$libname: $objects
	\$(MOD_LINK) $objects
EOF
        cat $modpath_current/modules.mk >> $modpath_current/modules.mk.tmp
        rm $modpath_current/modules.mk
        mv $modpath_current/modules.mk.tmp $modpath_current/modules.mk
        sed -e "s/\(static =.*\)/\1 $libname/" $modpath_current/modules.mk > $modpath_current/modules.mk.tmp
        rm $modpath_current/modules.mk
        mv $modpath_current/modules.mk.tmp $modpath_current/modules.mk
      fi
      MODLIST="$MODLIST $module"
      EXTRA_MODLIST="$EXTRA_MODLIST $modtype:$modfilec"
      MODULE_DIRS="$MODULE_DIRS $modtype"
      
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"

    done
    if test ! -z "$EXTRA_MODLIST"; then
      echo "$ac_t""added:$EXTRA_MODLIST" 1>&6
    fi
    IFS="$as_save_IFS"
  
else
   echo "$ac_t""none" 1>&6 
  
fi




  current_dir=dav/main
  modpath_current=modules/dav/main
  modpath_static=
  modpath_shared=
  test -d dav/main || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


dav_objects="mod_dav.lo props.lo util.lo util_lock.lo liveprop.lo providers.lo std_liveprop.lo"

if test "$enable_http" = "no"; then
  dav_enable=no
else
  dav_enable=most
fi


  echo $ac_n "checking whether to enable mod_dav""... $ac_c" 1>&6
echo "configure:13452: checking whether to enable mod_dav" >&5
    # Check whether --enable-dav or --disable-dav was given.
if test "${enable_dav+set}" = set; then
  enableval="$enable_dav"
  :
else
  enable_dav=$dav_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_dav" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_dav" = "static"; then
    enable_dav=yes
  elif test "$enable_dav" = "yes"; then
    enable_dav=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_dav" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_dav=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_dav" != "yes"; then
      enable_dav=no
    fi
  elif test "$enable_dav" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_dav=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_dav=no
    fi
  fi
  if test "$enable_dav" != "no"; then
            :
  fi
  echo "$ac_t""$enable_dav$_apmod_extra_msg" 1>&6
  if test "$enable_dav" != "no"; then
    case "$enable_dav" in
    shared*)
      enable_dav=`echo $enable_dav|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES dav"
      ;;
    *)
      MODLIST="$MODLIST dav"
      if test "dav" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$dav_objects"; then
    objects="mod_dav.lo"
  else
    objects="$dav_objects"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_dav.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DAV_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_dav.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DAV_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DAV_LDADD"
  

    
  fi


if test "$dav_enable" != "no" -o "$enable_dav" != "no"; then
  apache_need_expat=yes

  
  if test "x$INCLUDES" = "x"; then
    test "x$silent" != "xyes" && echo "  setting INCLUDES to \"-I\$(top_srcdir)/$modpath_current\""
    INCLUDES="-I\$(top_srcdir)/$modpath_current"
  else
    apr_addto_bugger="-I\$(top_srcdir)/$modpath_current"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $INCLUDES; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to INCLUDES"
        INCLUDES="$INCLUDES $i"
      fi
    done
  fi

fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=generators
  modpath_current=modules/generators
  modpath_static=
  modpath_shared=
  test -d generators || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_status""... $ac_c" 1>&6
echo "configure:13598: checking whether to enable mod_status" >&5
    # Check whether --enable-status or --disable-status was given.
if test "${enable_status+set}" = set; then
  enableval="$enable_status"
  :
else
  enable_status=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_status" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_status" = "static"; then
    enable_status=yes
  elif test "$enable_status" = "yes"; then
    enable_status=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_status" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_status=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_status" != "yes"; then
      enable_status=no
    fi
  elif test "$enable_status" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_status=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_status=no
    fi
  fi
  if test "$enable_status" != "no"; then
            :
  fi
  echo "$ac_t""$enable_status$_apmod_extra_msg" 1>&6
  if test "$enable_status" != "no"; then
    case "$enable_status" in
    shared*)
      enable_status=`echo $enable_status|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES status"
      ;;
    *)
      MODLIST="$MODLIST status"
      if test "status" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_status.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_status.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_STATUS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_status.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_STATUS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_STATUS_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_autoindex""... $ac_c" 1>&6
echo "configure:13691: checking whether to enable mod_autoindex" >&5
    # Check whether --enable-autoindex or --disable-autoindex was given.
if test "${enable_autoindex+set}" = set; then
  enableval="$enable_autoindex"
  :
else
  enable_autoindex=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_autoindex" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_autoindex" = "static"; then
    enable_autoindex=yes
  elif test "$enable_autoindex" = "yes"; then
    enable_autoindex=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_autoindex" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_autoindex=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_autoindex" != "yes"; then
      enable_autoindex=no
    fi
  elif test "$enable_autoindex" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_autoindex=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_autoindex=no
    fi
  fi
  if test "$enable_autoindex" != "no"; then
            :
  fi
  echo "$ac_t""$enable_autoindex$_apmod_extra_msg" 1>&6
  if test "$enable_autoindex" != "no"; then
    case "$enable_autoindex" in
    shared*)
      enable_autoindex=`echo $enable_autoindex|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES autoindex"
      ;;
    *)
      MODLIST="$MODLIST autoindex"
      if test "autoindex" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_autoindex.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_autoindex.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_AUTOINDEX_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_autoindex.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_AUTOINDEX_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_AUTOINDEX_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_asis""... $ac_c" 1>&6
echo "configure:13784: checking whether to enable mod_asis" >&5
    # Check whether --enable-asis or --disable-asis was given.
if test "${enable_asis+set}" = set; then
  enableval="$enable_asis"
  :
else
  enable_asis=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_asis" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_asis" = "static"; then
    enable_asis=yes
  elif test "$enable_asis" = "yes"; then
    enable_asis=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_asis" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_asis=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_asis" != "yes"; then
      enable_asis=no
    fi
  elif test "$enable_asis" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_asis=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_asis=no
    fi
  fi
  if test "$enable_asis" != "no"; then
            :
  fi
  echo "$ac_t""$enable_asis$_apmod_extra_msg" 1>&6
  if test "$enable_asis" != "no"; then
    case "$enable_asis" in
    shared*)
      enable_asis=`echo $enable_asis|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES asis"
      ;;
    *)
      MODLIST="$MODLIST asis"
      if test "asis" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_asis.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_asis.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_ASIS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_asis.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ASIS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_ASIS_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_info""... $ac_c" 1>&6
echo "configure:13877: checking whether to enable mod_info" >&5
    # Check whether --enable-info or --disable-info was given.
if test "${enable_info+set}" = set; then
  enableval="$enable_info"
  :
else
  enable_info=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_info" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_info" = "static"; then
    enable_info=yes
  elif test "$enable_info" = "yes"; then
    enable_info=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_info" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_info=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_info" != "yes"; then
      enable_info=no
    fi
  elif test "$enable_info" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_info=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_info=no
    fi
  fi
  if test "$enable_info" != "no"; then
            :
  fi
  echo "$ac_t""$enable_info$_apmod_extra_msg" 1>&6
  if test "$enable_info" != "no"; then
    case "$enable_info" in
    shared*)
      enable_info=`echo $enable_info|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES info"
      ;;
    *)
      MODLIST="$MODLIST info"
      if test "info" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_info.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_info.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_INFO_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_info.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_INFO_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_INFO_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_suexec""... $ac_c" 1>&6
echo "configure:13970: checking whether to enable mod_suexec" >&5
    # Check whether --enable-suexec or --disable-suexec was given.
if test "${enable_suexec+set}" = set; then
  enableval="$enable_suexec"
  :
else
  enable_suexec=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_suexec" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_suexec" = "static"; then
    enable_suexec=yes
  elif test "$enable_suexec" = "yes"; then
    enable_suexec=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_suexec" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_suexec=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_suexec" != "yes"; then
      enable_suexec=no
    fi
  elif test "$enable_suexec" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_suexec=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_suexec=no
    fi
  fi
  if test "$enable_suexec" != "no"; then
            echo "$ac_t""checking dependencies" 1>&6
                    
              other_targets=suexec  
                    echo $ac_n "checking whether to enable mod_suexec""... $ac_c" 1>&6
echo "configure:14010: checking whether to enable mod_suexec" >&5
                    if test "$enable_suexec" = "no"; then
                      if test "$_apmod_error_fatal" = "no"; then
                        _apmod_extra_msg=" (disabled)"
                      else
                        { echo "configure: error: mod_suexec has been requested but can not be built due to prerequisite failures" 1>&2; exit 1; }
                      fi
                    fi
  fi
  echo "$ac_t""$enable_suexec$_apmod_extra_msg" 1>&6
  if test "$enable_suexec" != "no"; then
    case "$enable_suexec" in
    shared*)
      enable_suexec=`echo $enable_suexec|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES suexec"
      ;;
    *)
      MODLIST="$MODLIST suexec"
      if test "suexec" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_suexec.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_suexec.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_SUEXEC_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_suexec.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SUEXEC_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_SUEXEC_LDADD"
  

    
  fi


if ap_mpm_is_threaded; then
# if we are using a threaded MPM, we will get better performance with
# mod_cgid, so make it the default.
    
  echo $ac_n "checking whether to enable mod_cgid""... $ac_c" 1>&6
echo "configure:14078: checking whether to enable mod_cgid" >&5
    # Check whether --enable-cgid or --disable-cgid was given.
if test "${enable_cgid+set}" = set; then
  enableval="$enable_cgid"
  :
else
  enable_cgid=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_cgid" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_cgid" = "static"; then
    enable_cgid=yes
  elif test "$enable_cgid" = "yes"; then
    enable_cgid=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_cgid" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_cgid=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_cgid" != "yes"; then
      enable_cgid=no
    fi
  elif test "$enable_cgid" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_cgid=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_cgid=no
    fi
  fi
  if test "$enable_cgid" != "no"; then
            :
  fi
  echo "$ac_t""$enable_cgid$_apmod_extra_msg" 1>&6
  if test "$enable_cgid" != "no"; then
    case "$enable_cgid" in
    shared*)
      enable_cgid=`echo $enable_cgid|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES cgid"
      ;;
    *)
      MODLIST="$MODLIST cgid"
      if test "cgid" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_cgid.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_cgid.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CGID_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_cgid.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGID_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CGID_LDADD"
  

    
  fi

    
  echo $ac_n "checking whether to enable mod_cgi""... $ac_c" 1>&6
echo "configure:14171: checking whether to enable mod_cgi" >&5
    # Check whether --enable-cgi or --disable-cgi was given.
if test "${enable_cgi+set}" = set; then
  enableval="$enable_cgi"
  :
else
  enable_cgi=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_cgi" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_cgi" = "static"; then
    enable_cgi=yes
  elif test "$enable_cgi" = "yes"; then
    enable_cgi=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_cgi" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_cgi=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_cgi" != "yes"; then
      enable_cgi=no
    fi
  elif test "$enable_cgi" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_cgi=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_cgi=no
    fi
  fi
  if test "$enable_cgi" != "no"; then
            :
  fi
  echo "$ac_t""$enable_cgi$_apmod_extra_msg" 1>&6
  if test "$enable_cgi" != "no"; then
    case "$enable_cgi" in
    shared*)
      enable_cgi=`echo $enable_cgi|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES cgi"
      ;;
    *)
      MODLIST="$MODLIST cgi"
      if test "cgi" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_cgi.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_cgi.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CGI_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_cgi.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGI_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CGI_LDADD"
  

    
  fi

else
# if we are using a non-threaded MPM, it makes little sense to use
# mod_cgid, and it just opens up holes we don't need.  Make mod_cgi the
# default
    
  echo $ac_n "checking whether to enable mod_cgi""... $ac_c" 1>&6
echo "configure:14268: checking whether to enable mod_cgi" >&5
    # Check whether --enable-cgi or --disable-cgi was given.
if test "${enable_cgi+set}" = set; then
  enableval="$enable_cgi"
  :
else
  enable_cgi=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_cgi" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_cgi" = "static"; then
    enable_cgi=yes
  elif test "$enable_cgi" = "yes"; then
    enable_cgi=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_cgi" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_cgi=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_cgi" != "yes"; then
      enable_cgi=no
    fi
  elif test "$enable_cgi" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_cgi=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_cgi=no
    fi
  fi
  if test "$enable_cgi" != "no"; then
            :
  fi
  echo "$ac_t""$enable_cgi$_apmod_extra_msg" 1>&6
  if test "$enable_cgi" != "no"; then
    case "$enable_cgi" in
    shared*)
      enable_cgi=`echo $enable_cgi|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES cgi"
      ;;
    *)
      MODLIST="$MODLIST cgi"
      if test "cgi" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_cgi.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_cgi.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CGI_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_cgi.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGI_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CGI_LDADD"
  

    
  fi

    
  echo $ac_n "checking whether to enable mod_cgid""... $ac_c" 1>&6
echo "configure:14361: checking whether to enable mod_cgid" >&5
    # Check whether --enable-cgid or --disable-cgid was given.
if test "${enable_cgid+set}" = set; then
  enableval="$enable_cgid"
  :
else
  enable_cgid=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_cgid" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_cgid" = "static"; then
    enable_cgid=yes
  elif test "$enable_cgid" = "yes"; then
    enable_cgid=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_cgid" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_cgid=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_cgid" != "yes"; then
      enable_cgid=no
    fi
  elif test "$enable_cgid" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_cgid=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_cgid=no
    fi
  fi
  if test "$enable_cgid" != "no"; then
            :
  fi
  echo "$ac_t""$enable_cgid$_apmod_extra_msg" 1>&6
  if test "$enable_cgid" != "no"; then
    case "$enable_cgid" in
    shared*)
      enable_cgid=`echo $enable_cgid|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES cgid"
      ;;
    *)
      MODLIST="$MODLIST cgid"
      if test "cgid" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_cgid.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_cgid.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_CGID_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_cgid.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_CGID_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_CGID_LDADD"
  

    
  fi

fi


  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"




if test "$MPM_NAME" = "beos" ; then
    apache_apr_flags="--enable-threads"

    
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES server/mpm/$MPM_NAME/Makefile"

fi


if test "$MPM_NAME" = "event" ; then
    for ac_func in pthread_kill
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14482: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14487 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14510: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES server/mpm/$MPM_SUBDIR_NAME/Makefile"

fi

if test "$MPM_NAME" = "mpmt_os2" ; then
    cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache

    
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES server/mpm/$MPM_NAME/Makefile"

    
  if test "x$CFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting CFLAGS to \"-Zmt\""
    CFLAGS="-Zmt"
  else
    apr_addto_bugger="-Zmt"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $CFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to CFLAGS"
        CFLAGS="$CFLAGS $i"
      fi
    done
  fi

fi


if test "$MPM_NAME" = "worker" ; then
    for ac_func in pthread_kill
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14618: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14623 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14646: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES server/mpm/$MPM_NAME/Makefile"

fi



  current_dir=dav/fs
  modpath_current=modules/dav/fs
  modpath_static=
  modpath_shared=
  test -d dav/fs || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


dav_fs_objects="mod_dav_fs.lo dbm.lo lock.lo repos.lo"

if test "x$enable_dav" != "x"; then
  dav_fs_enable=$enable_dav
else
  dav_fs_enable=$dav_enable
fi

case "$host" in
  *os2*)
    # OS/2 DLLs must resolve all symbols at build time
    # and we need some from main DAV module
    dav_fs_objects="$dav_fs_objects ../main/mod_dav.la"
    ;;
esac


  echo $ac_n "checking whether to enable mod_dav_fs""... $ac_c" 1>&6
echo "configure:14703: checking whether to enable mod_dav_fs" >&5
    # Check whether --enable-dav-fs or --disable-dav-fs was given.
if test "${enable_dav_fs+set}" = set; then
  enableval="$enable_dav_fs"
  :
else
  enable_dav_fs=$dav_fs_enable
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_dav_fs" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_dav_fs" = "static"; then
    enable_dav_fs=yes
  elif test "$enable_dav_fs" = "yes"; then
    enable_dav_fs=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_dav_fs" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_dav_fs=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_dav_fs" != "yes"; then
      enable_dav_fs=no
    fi
  elif test "$enable_dav_fs" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_dav_fs=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_dav_fs=no
    fi
  fi
  if test "$enable_dav_fs" != "no"; then
            :
  fi
  echo "$ac_t""$enable_dav_fs$_apmod_extra_msg" 1>&6
  if test "$enable_dav_fs" != "no"; then
    case "$enable_dav_fs" in
    shared*)
      enable_dav_fs=`echo $enable_dav_fs|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES dav_fs"
      ;;
    *)
      MODLIST="$MODLIST dav_fs"
      if test "dav_fs" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$dav_fs_objects"; then
    objects="mod_dav_fs.lo"
  else
    objects="$dav_fs_objects"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_dav_fs.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DAV_FS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_dav_fs.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DAV_FS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DAV_FS_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"





  current_dir=dav/lock
  modpath_current=modules/dav/lock
  modpath_static=
  modpath_shared=
  test -d dav/lock || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk


dav_lock_objects="mod_dav_lock.lo locks.lo"

case "$host" in
  *os2*)
    # OS/2 DLLs must resolve all symbols at build time
    # and we need some from main DAV module
    dav_lock_objects="$dav_lock_objects ../main/mod_dav.la"
    ;;
esac


  echo $ac_n "checking whether to enable mod_dav_lock""... $ac_c" 1>&6
echo "configure:14831: checking whether to enable mod_dav_lock" >&5
    # Check whether --enable-dav-lock or --disable-dav-lock was given.
if test "${enable_dav_lock+set}" = set; then
  enableval="$enable_dav_lock"
  :
else
  enable_dav_lock=no
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_dav_lock" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_dav_lock" = "static"; then
    enable_dav_lock=yes
  elif test "$enable_dav_lock" = "yes"; then
    enable_dav_lock=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_dav_lock" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_dav_lock=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_dav_lock" != "yes"; then
      enable_dav_lock=no
    fi
  elif test "$enable_dav_lock" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_dav_lock=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_dav_lock=no
    fi
  fi
  if test "$enable_dav_lock" != "no"; then
            :
  fi
  echo "$ac_t""$enable_dav_lock$_apmod_extra_msg" 1>&6
  if test "$enable_dav_lock" != "no"; then
    case "$enable_dav_lock" in
    shared*)
      enable_dav_lock=`echo $enable_dav_lock|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES dav_lock"
      ;;
    *)
      MODLIST="$MODLIST dav_lock"
      if test "dav_lock" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z "$dav_lock_objects"; then
    objects="mod_dav_lock.lo"
  else
    objects="$dav_lock_objects"
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_dav_lock.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DAV_LOCK_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_dav_lock.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DAV_LOCK_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DAV_LOCK_LDADD"
  

    
  fi



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  current_dir=mappers
  modpath_current=modules/mappers
  modpath_static=
  modpath_shared=
  test -d mappers || $srcdir/build/mkdir.sh $modpath_current
  > $modpath_current/modules.mk



  echo $ac_n "checking whether to enable mod_vhost_alias""... $ac_c" 1>&6
echo "configure:14950: checking whether to enable mod_vhost_alias" >&5
    # Check whether --enable-vhost-alias or --disable-vhost-alias was given.
if test "${enable_vhost_alias+set}" = set; then
  enableval="$enable_vhost_alias"
  :
else
  enable_vhost_alias=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_vhost_alias" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_vhost_alias" = "static"; then
    enable_vhost_alias=yes
  elif test "$enable_vhost_alias" = "yes"; then
    enable_vhost_alias=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_vhost_alias" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_vhost_alias=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_vhost_alias" != "yes"; then
      enable_vhost_alias=no
    fi
  elif test "$enable_vhost_alias" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_vhost_alias=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_vhost_alias=no
    fi
  fi
  if test "$enable_vhost_alias" != "no"; then
            :
  fi
  echo "$ac_t""$enable_vhost_alias$_apmod_extra_msg" 1>&6
  if test "$enable_vhost_alias" != "no"; then
    case "$enable_vhost_alias" in
    shared*)
      enable_vhost_alias=`echo $enable_vhost_alias|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES vhost_alias"
      ;;
    *)
      MODLIST="$MODLIST vhost_alias"
      if test "vhost_alias" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_vhost_alias.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_vhost_alias.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_VHOST_ALIAS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_vhost_alias.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_VHOST_ALIAS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_VHOST_ALIAS_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_negotiation""... $ac_c" 1>&6
echo "configure:15043: checking whether to enable mod_negotiation" >&5
    # Check whether --enable-negotiation or --disable-negotiation was given.
if test "${enable_negotiation+set}" = set; then
  enableval="$enable_negotiation"
  :
else
  enable_negotiation=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_negotiation" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_negotiation" = "static"; then
    enable_negotiation=yes
  elif test "$enable_negotiation" = "yes"; then
    enable_negotiation=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_negotiation" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_negotiation=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_negotiation" != "yes"; then
      enable_negotiation=no
    fi
  elif test "$enable_negotiation" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_negotiation=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_negotiation=no
    fi
  fi
  if test "$enable_negotiation" != "no"; then
            :
  fi
  echo "$ac_t""$enable_negotiation$_apmod_extra_msg" 1>&6
  if test "$enable_negotiation" != "no"; then
    case "$enable_negotiation" in
    shared*)
      enable_negotiation=`echo $enable_negotiation|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES negotiation"
      ;;
    *)
      MODLIST="$MODLIST negotiation"
      if test "negotiation" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_negotiation.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_negotiation.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_NEGOTIATION_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_negotiation.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_NEGOTIATION_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_NEGOTIATION_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_dir""... $ac_c" 1>&6
echo "configure:15136: checking whether to enable mod_dir" >&5
    # Check whether --enable-dir or --disable-dir was given.
if test "${enable_dir+set}" = set; then
  enableval="$enable_dir"
  :
else
  enable_dir=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_dir" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_dir" = "static"; then
    enable_dir=yes
  elif test "$enable_dir" = "yes"; then
    enable_dir=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_dir" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_dir=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_dir" != "yes"; then
      enable_dir=no
    fi
  elif test "$enable_dir" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_dir=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_dir=no
    fi
  fi
  if test "$enable_dir" != "no"; then
            :
  fi
  echo "$ac_t""$enable_dir$_apmod_extra_msg" 1>&6
  if test "$enable_dir" != "no"; then
    case "$enable_dir" in
    shared*)
      enable_dir=`echo $enable_dir|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES dir"
      ;;
    *)
      MODLIST="$MODLIST dir"
      if test "dir" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_dir.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_dir.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_DIR_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_dir.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_DIR_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_DIR_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_imagemap""... $ac_c" 1>&6
echo "configure:15229: checking whether to enable mod_imagemap" >&5
    # Check whether --enable-imagemap or --disable-imagemap was given.
if test "${enable_imagemap+set}" = set; then
  enableval="$enable_imagemap"
  :
else
  enable_imagemap=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_imagemap" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_imagemap" = "static"; then
    enable_imagemap=yes
  elif test "$enable_imagemap" = "yes"; then
    enable_imagemap=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_imagemap" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_imagemap=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_imagemap" != "yes"; then
      enable_imagemap=no
    fi
  elif test "$enable_imagemap" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_imagemap=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_imagemap=no
    fi
  fi
  if test "$enable_imagemap" != "no"; then
            :
  fi
  echo "$ac_t""$enable_imagemap$_apmod_extra_msg" 1>&6
  if test "$enable_imagemap" != "no"; then
    case "$enable_imagemap" in
    shared*)
      enable_imagemap=`echo $enable_imagemap|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES imagemap"
      ;;
    *)
      MODLIST="$MODLIST imagemap"
      if test "imagemap" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_imagemap.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_imagemap.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_IMAGEMAP_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_imagemap.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_IMAGEMAP_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_IMAGEMAP_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_actions""... $ac_c" 1>&6
echo "configure:15322: checking whether to enable mod_actions" >&5
    # Check whether --enable-actions or --disable-actions was given.
if test "${enable_actions+set}" = set; then
  enableval="$enable_actions"
  :
else
  enable_actions=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_actions" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_actions" = "static"; then
    enable_actions=yes
  elif test "$enable_actions" = "yes"; then
    enable_actions=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_actions" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_actions=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_actions" != "yes"; then
      enable_actions=no
    fi
  elif test "$enable_actions" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_actions=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_actions=no
    fi
  fi
  if test "$enable_actions" != "no"; then
            :
  fi
  echo "$ac_t""$enable_actions$_apmod_extra_msg" 1>&6
  if test "$enable_actions" != "no"; then
    case "$enable_actions" in
    shared*)
      enable_actions=`echo $enable_actions|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES actions"
      ;;
    *)
      MODLIST="$MODLIST actions"
      if test "actions" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_actions.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_actions.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_ACTIONS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_actions.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ACTIONS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_ACTIONS_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_speling""... $ac_c" 1>&6
echo "configure:15415: checking whether to enable mod_speling" >&5
    # Check whether --enable-speling or --disable-speling was given.
if test "${enable_speling+set}" = set; then
  enableval="$enable_speling"
  :
else
  enable_speling=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_speling" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_speling" = "static"; then
    enable_speling=yes
  elif test "$enable_speling" = "yes"; then
    enable_speling=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_speling" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_speling=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_speling" != "yes"; then
      enable_speling=no
    fi
  elif test "$enable_speling" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_speling=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_speling=no
    fi
  fi
  if test "$enable_speling" != "no"; then
            :
  fi
  echo "$ac_t""$enable_speling$_apmod_extra_msg" 1>&6
  if test "$enable_speling" != "no"; then
    case "$enable_speling" in
    shared*)
      enable_speling=`echo $enable_speling|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES speling"
      ;;
    *)
      MODLIST="$MODLIST speling"
      if test "speling" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_speling.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_speling.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_SPELING_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_speling.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SPELING_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_SPELING_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_userdir""... $ac_c" 1>&6
echo "configure:15508: checking whether to enable mod_userdir" >&5
    # Check whether --enable-userdir or --disable-userdir was given.
if test "${enable_userdir+set}" = set; then
  enableval="$enable_userdir"
  :
else
  enable_userdir=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_userdir" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_userdir" = "static"; then
    enable_userdir=yes
  elif test "$enable_userdir" = "yes"; then
    enable_userdir=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_userdir" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_userdir=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_userdir" != "yes"; then
      enable_userdir=no
    fi
  elif test "$enable_userdir" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_userdir=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_userdir=no
    fi
  fi
  if test "$enable_userdir" != "no"; then
            :
  fi
  echo "$ac_t""$enable_userdir$_apmod_extra_msg" 1>&6
  if test "$enable_userdir" != "no"; then
    case "$enable_userdir" in
    shared*)
      enable_userdir=`echo $enable_userdir|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES userdir"
      ;;
    *)
      MODLIST="$MODLIST userdir"
      if test "userdir" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_userdir.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_userdir.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_USERDIR_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_userdir.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_USERDIR_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_USERDIR_LDADD"
  

    
  fi


  echo $ac_n "checking whether to enable mod_alias""... $ac_c" 1>&6
echo "configure:15601: checking whether to enable mod_alias" >&5
    # Check whether --enable-alias or --disable-alias was given.
if test "${enable_alias+set}" = set; then
  enableval="$enable_alias"
  :
else
  enable_alias=yes
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_alias" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_alias" = "static"; then
    enable_alias=yes
  elif test "$enable_alias" = "yes"; then
    enable_alias=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_alias" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_alias=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_alias" != "yes"; then
      enable_alias=no
    fi
  elif test "$enable_alias" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_alias=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_alias=no
    fi
  fi
  if test "$enable_alias" != "no"; then
            :
  fi
  echo "$ac_t""$enable_alias$_apmod_extra_msg" 1>&6
  if test "$enable_alias" != "no"; then
    case "$enable_alias" in
    shared*)
      enable_alias=`echo $enable_alias|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES alias"
      ;;
    *)
      MODLIST="$MODLIST alias"
      if test "alias" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_alias.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_alias.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_ALIAS_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_alias.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_ALIAS_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_ALIAS_LDADD"
  

    
  fi



  echo $ac_n "checking whether to enable mod_rewrite""... $ac_c" 1>&6
echo "configure:15695: checking whether to enable mod_rewrite" >&5
    # Check whether --enable-rewrite or --disable-rewrite was given.
if test "${enable_rewrite+set}" = set; then
  enableval="$enable_rewrite"
  :
else
  enable_rewrite=most
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_rewrite" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_rewrite" = "static"; then
    enable_rewrite=yes
  elif test "$enable_rewrite" = "yes"; then
    enable_rewrite=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_rewrite" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_rewrite=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_rewrite" != "yes"; then
      enable_rewrite=no
    fi
  elif test "$enable_rewrite" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_rewrite=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_rewrite=no
    fi
  fi
  if test "$enable_rewrite" != "no"; then
            :
  fi
  echo "$ac_t""$enable_rewrite$_apmod_extra_msg" 1>&6
  if test "$enable_rewrite" != "no"; then
    case "$enable_rewrite" in
    shared*)
      enable_rewrite=`echo $enable_rewrite|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES rewrite"
      ;;
    *)
      MODLIST="$MODLIST rewrite"
      if test "rewrite" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_rewrite.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_rewrite.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_REWRITE_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_rewrite.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_REWRITE_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_REWRITE_LDADD"
  

    
  fi




apr_old_cppflags=$CPPFLAGS
CPPFLAGS="$CPPFLAGS $INCLUDES"
cat > conftest.$ac_ext <<EOF
#line 15792 "configure"
#include "confdefs.h"

#include <apr.h>
#if APR_HAS_DSO
YES_IS_DEFINED
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "YES_IS_DEFINED" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_define_APR_HAS_DSO=yes
else
  rm -rf conftest*
  ac_cv_define_APR_HAS_DSO=no
fi
rm -f conftest*

CPPFLAGS=$apr_old_cppflags


case "x$enable_so" in
    "xyes")
        if test $ac_cv_define_APR_HAS_DSO = "no"; then
            { echo "configure: error: mod_so has been requested but cannot be built on your system" 1>&2; exit 1; }
        fi
        ;;
    "xshared")
        { echo "configure: error: mod_so can not be built as a shared DSO" 1>&2; exit 1; }
        ;;
    "xno")
        ;;
    "x")
        enable_so=$ac_cv_define_APR_HAS_DSO
        ;;
esac

if test "x$enable_so" = "xyes"; then
    enable_so="static"
fi

if test "x$enable_so" = "xstatic"; then
    
  if test "x$HTTPD_LDFLAGS" = "x"; then
    test "x$silent" != "xyes" && echo "  setting HTTPD_LDFLAGS to \"-export-dynamic\""
    HTTPD_LDFLAGS="-export-dynamic"
  else
    apr_addto_bugger="-export-dynamic"
    for i in $apr_addto_bugger; do
      apr_addto_duplicate="0"
      for j in $HTTPD_LDFLAGS; do
        if test "x$i" = "x$j"; then
          apr_addto_duplicate="1"
          break
        fi
      done
      if test $apr_addto_duplicate = "0"; then
        test "x$silent" != "xyes" && echo "  adding \"$i\" to HTTPD_LDFLAGS"
        HTTPD_LDFLAGS="$HTTPD_LDFLAGS $i"
      fi
    done
  fi

    INSTALL_DSO=yes
else
    INSTALL_DSO=no
fi

  APACHE_VAR_SUBST="$APACHE_VAR_SUBST INSTALL_DSO"
  


if test "$sharedobjs" = "yes"; then
    if test $ac_cv_define_APR_HAS_DSO = "no"; then
        { echo "configure: error: shared objects have been requested but cannot be built since mod_so cannot be built" 1>&2; exit 1; }
    elif test $enable_so = "no"; then
        { echo "configure: error: shared objects have been requested but cannot be built since mod_so was disabled" 1>&2; exit 1; }
    fi
fi


  echo $ac_n "checking whether to enable mod_so""... $ac_c" 1>&6
echo "configure:15875: checking whether to enable mod_so" >&5
    # Check whether --enable-so or --disable-so was given.
if test "${enable_so+set}" = set; then
  enableval="$enable_so"
  :
else
  enable_so=$enable_so
fi

    _apmod_extra_msg=""
      if test "$module_selection" = "most" -a "$enable_so" = "most"; then
    _apmod_error_fatal="no"
  else
    _apmod_error_fatal="yes"
  fi
  if test "$enable_so" = "static"; then
    enable_so=yes
  elif test "$enable_so" = "yes"; then
    enable_so=$module_default
    _apmod_extra_msg=" ($module_selection)"
  elif test "$enable_so" = "most"; then
    if test "$module_selection" = "most" -o "$module_selection" = "all"; then
      enable_so=$module_default
      _apmod_extra_msg=" ($module_selection)"
    elif test "$enable_so" != "yes"; then
      enable_so=no
    fi
  elif test "$enable_so" = "maybe-all"; then
    if test "$module_selection" = "all"; then
      enable_so=$module_default
      _apmod_extra_msg=" (all)"
    else
      enable_so=no
    fi
  fi
  if test "$enable_so" != "no"; then
            :
  fi
  echo "$ac_t""$enable_so$_apmod_extra_msg" 1>&6
  if test "$enable_so" != "no"; then
    case "$enable_so" in
    shared*)
      enable_so=`echo $enable_so|sed 's/shared,*//'`
      sharedobjs=yes
      shared=yes
      DSO_MODULES="$DSO_MODULES so"
      ;;
    *)
      MODLIST="$MODLIST so"
      if test "so" = "so"; then
          sharedobjs=yes
      fi
      shared="";;
    esac
    
    
  if test -z ""; then
    objects="mod_so.lo"
  else
    objects=""
  fi

  if test -z "$module_standalone"; then
    if test -z "$shared"; then
      # The filename of a convenience library must have a "lib" prefix:
      libname="libmod_so.la"
      BUILTIN_LIBS="$BUILTIN_LIBS $modpath_current/$libname"
      modpath_static="$modpath_static $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $objects
	\$(MOD_LINK) $objects \$(MOD_SO_LDADD)
EOF
    else
      apache_need_shared=yes
      libname="mod_so.la"
      shobjects=`echo $objects | sed 's/\.lo/.slo/g'`
      modpath_shared="$modpath_shared $libname"
      cat >>$modpath_current/modules.mk<<EOF
$libname: $shobjects
	\$(SH_LINK) -rpath \$(libexecdir) -module -avoid-version  $objects \$(MOD_SO_LDADD)
EOF
    fi
  fi

    
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MOD_SO_LDADD"
  

    
  fi


cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache



  echo "DISTCLEAN_TARGETS = modules.mk" >> $modpath_current/modules.mk
  echo "static = $modpath_static" >> $modpath_current/modules.mk
  echo "shared = $modpath_shared" >> $modpath_current/modules.mk
  if test ! -z "$modpath_static" -o ! -z "$modpath_shared"; then
    MODULE_DIRS="$MODULE_DIRS $current_dir"
  else
    MODULE_CLEANDIRS="$MODULE_CLEANDIRS $current_dir"
  fi
  
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES $modpath_current/Makefile"






  APACHE_VAR_SUBST="$APACHE_VAR_SUBST progname"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MPM_LIB"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST OS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST OS_DIR"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST BUILTIN_LIBS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SHLIBPATH_VAR"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST OS_SPECIFIC_VARS"
  


PRE_SHARED_CMDS='echo ""'
POST_SHARED_CMDS='echo ""'


if test "$apache_need_shared" = "yes"; then
  if test -f $ac_aux_dir/ltconfig; then
    $SHELL $ac_aux_dir/ltconfig --output=shlibtool --disable-static --srcdir=$ac_aux_dir --cache-file=./config.cache $ac_aux_dir/ltmain.sh
  fi
  shared_build="shared-build"
fi


if test "$enable_so" = "yes"; then
  case $host in
    *-ibm-aix*)
      HTTPD_LDFLAGS="$HTTPD_LDFLAGS -Wl,-uXML_Parse -Wl,-bE:$abs_builddir/server/httpd.exp"
      SH_LDFLAGS="$SH_LDFLAGS \$(EXTRA_LDFLAGS) \$(EXTRA_LIBS)"
      UTIL_LDFLAGS="$UTIL_LDFLAGS -Wl,-uXML_Parse"
      ;;
    *beos)
      SH_LDFLAGS='$(top_builddir)/_APP_'
      PRE_SHARED_CMDS='ln -s $(top_builddir)/httpd $(top_builddir)/_APP_'
      POST_SHARED_CMDS='rm $(top_builddir)/_APP_'
      ;;
    *os390)
      HTTPD_LDFLAGS="$HTTPD_LDFLAGS --main=$abs_srcdir/server/main.o --core-dll=$abs_srcdir/apachecore.dll"
      SH_LDFLAGS="$SH_LDFLAGS --core-dll=$abs_srcdir/apachecore.dll"
  esac
fi


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST PRE_SHARED_CMDS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST POST_SHARED_CMDS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST shared_build"
  


# Check whether --with-program-name or --without-program-name was given.
if test "${with_program_name+set}" = set; then
  withval="$with_program_name"
  
  progname="$withval" 
else
  
  progname="httpd" 
fi


# SuExec parameters
# Check whether --with-suexec-bin or --without-suexec-bin was given.
if test "${with_suexec_bin+set}" = set; then
  withval="$with_suexec_bin"
  
  cat >> confdefs.h <<EOF
#define SUEXEC_BIN "$withval"
EOF

 
fi


# Check whether --with-suexec-caller or --without-suexec-caller was given.
if test "${with_suexec_caller+set}" = set; then
  withval="$with_suexec_caller"
  
  cat >> confdefs.h <<EOF
#define AP_HTTPD_USER "$withval"
EOF
  
fi


# Check whether --with-suexec-userdir or --without-suexec-userdir was given.
if test "${with_suexec_userdir+set}" = set; then
  withval="$with_suexec_userdir"
  
  cat >> confdefs.h <<EOF
#define AP_USERDIR_SUFFIX "$withval"
EOF
  
fi


# Check whether --with-suexec-docroot or --without-suexec-docroot was given.
if test "${with_suexec_docroot+set}" = set; then
  withval="$with_suexec_docroot"
  
  cat >> confdefs.h <<EOF
#define AP_DOC_ROOT "$withval"
EOF
  
fi


# Check whether --with-suexec-uidmin or --without-suexec-uidmin was given.
if test "${with_suexec_uidmin+set}" = set; then
  withval="$with_suexec_uidmin"
  
  cat >> confdefs.h <<EOF
#define AP_UID_MIN $withval
EOF
  
fi


# Check whether --with-suexec-gidmin or --without-suexec-gidmin was given.
if test "${with_suexec_gidmin+set}" = set; then
  withval="$with_suexec_gidmin"
  
  cat >> confdefs.h <<EOF
#define AP_GID_MIN $withval
EOF
  
fi


# Check whether --with-suexec-logfile or --without-suexec-logfile was given.
if test "${with_suexec_logfile+set}" = set; then
  withval="$with_suexec_logfile"
  
  cat >> confdefs.h <<EOF
#define AP_LOG_EXEC "$withval"
EOF
  
fi


# Check whether --with-suexec-safepath or --without-suexec-safepath was given.
if test "${with_suexec_safepath+set}" = set; then
  withval="$with_suexec_safepath"
  
  cat >> confdefs.h <<EOF
#define AP_SAFE_PATH "$withval"
EOF
  
fi


# Check whether --with-suexec-umask or --without-suexec-umask was given.
if test "${with_suexec_umask+set}" = set; then
  withval="$with_suexec_umask"
  
  cat >> confdefs.h <<EOF
#define AP_SUEXEC_UMASK 0$withval
EOF
  
fi


apulinklibs="`$apu_config --avoid-ldap --link-libtool --libs`" \
 || apulinklibs="`$apu_config --link-libtool --libs`"
AP_LIBS="$AP_LIBS $apulinklibs `$apr_config --link-libtool --libs`" 

  APACHE_VAR_SUBST="$APACHE_VAR_SUBST AP_LIBS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST AP_BUILD_SRCLIB_DIRS"
  


  APACHE_VAR_SUBST="$APACHE_VAR_SUBST AP_CLEAN_SRCLIB_DIRS"
  


cat >> confdefs.h <<\EOF
#define AP_USING_AUTOCONF 1
EOF


if test "$SINGLE_LISTEN_UNSERIALIZED_ACCEPT" = "1"; then
    cat >> confdefs.h <<\EOF
#define SINGLE_LISTEN_UNSERIALIZED_ACCEPT 1
EOF

fi

if test "$AP_NONBLOCK_WHEN_MULTI_LISTEN" = "1"; then
    cat >> confdefs.h <<\EOF
#define AP_NONBLOCK_WHEN_MULTI_LISTEN 1
EOF

fi


  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES Makefile modules/Makefile srclib/Makefile"
 

  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES os/Makefile server/Makefile"


  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES support/Makefile srclib/pcre/Makefile"


if test -d ./test; then
    
  APACHE_FAST_OUTPUT_FILES="$APACHE_FAST_OUTPUT_FILES test/Makefile"

fi

echo $ac_n "${nl}Restore user-defined environment settings...${nl}"


if test "x$apr_ste_save_CPPFLAGS" = "x"; then
  EXTRA_CPPFLAGS="$CPPFLAGS"
  CPPFLAGS=
else
  if test "x$apr_ste_save_CPPFLAGS" = "x$CPPFLAGS"; then
    EXTRA_CPPFLAGS=
  else
    EXTRA_CPPFLAGS=`echo $CPPFLAGS | sed -e "s%${apr_ste_save_CPPFLAGS}%%"`
    CPPFLAGS="$apr_ste_save_CPPFLAGS"
  fi
fi
if test "x$silent" != "xyes"; then
  echo "  restoring CPPFLAGS to \"$CPPFLAGS\""
  echo "  setting EXTRA_CPPFLAGS to \"$EXTRA_CPPFLAGS\""
fi



if test "x$apr_ste_save_CFLAGS" = "x"; then
  EXTRA_CFLAGS="$CFLAGS"
  CFLAGS=
else
  if test "x$apr_ste_save_CFLAGS" = "x$CFLAGS"; then
    EXTRA_CFLAGS=
  else
    EXTRA_CFLAGS=`echo $CFLAGS | sed -e "s%${apr_ste_save_CFLAGS}%%"`
    CFLAGS="$apr_ste_save_CFLAGS"
  fi
fi
if test "x$silent" != "xyes"; then
  echo "  restoring CFLAGS to \"$CFLAGS\""
  echo "  setting EXTRA_CFLAGS to \"$EXTRA_CFLAGS\""
fi



if test "x$apr_ste_save_CXXFLAGS" = "x"; then
  EXTRA_CXXFLAGS="$CXXFLAGS"
  CXXFLAGS=
else
  if test "x$apr_ste_save_CXXFLAGS" = "x$CXXFLAGS"; then
    EXTRA_CXXFLAGS=
  else
    EXTRA_CXXFLAGS=`echo $CXXFLAGS | sed -e "s%${apr_ste_save_CXXFLAGS}%%"`
    CXXFLAGS="$apr_ste_save_CXXFLAGS"
  fi
fi
if test "x$silent" != "xyes"; then
  echo "  restoring CXXFLAGS to \"$CXXFLAGS\""
  echo "  setting EXTRA_CXXFLAGS to \"$EXTRA_CXXFLAGS\""
fi



if test "x$apr_ste_save_LDFLAGS" = "x"; then
  EXTRA_LDFLAGS="$LDFLAGS"
  LDFLAGS=
else
  if test "x$apr_ste_save_LDFLAGS" = "x$LDFLAGS"; then
    EXTRA_LDFLAGS=
  else
    EXTRA_LDFLAGS=`echo $LDFLAGS | sed -e "s%${apr_ste_save_LDFLAGS}%%"`
    LDFLAGS="$apr_ste_save_LDFLAGS"
  fi
fi
if test "x$silent" != "xyes"; then
  echo "  restoring LDFLAGS to \"$LDFLAGS\""
  echo "  setting EXTRA_LDFLAGS to \"$EXTRA_LDFLAGS\""
fi



if test "x$apr_ste_save_LIBS" = "x"; then
  EXTRA_LIBS="$LIBS"
  LIBS=
else
  if test "x$apr_ste_save_LIBS" = "x$LIBS"; then
    EXTRA_LIBS=
  else
    EXTRA_LIBS=`echo $LIBS | sed -e "s%${apr_ste_save_LIBS}%%"`
    LIBS="$apr_ste_save_LIBS"
  fi
fi
if test "x$silent" != "xyes"; then
  echo "  restoring LIBS to \"$LIBS\""
  echo "  setting EXTRA_LIBS to \"$EXTRA_LIBS\""
fi



if test "x$apr_ste_save_INCLUDES" = "x"; then
  EXTRA_INCLUDES="$INCLUDES"
  INCLUDES=
else
  if test "x$apr_ste_save_INCLUDES" = "x$INCLUDES"; then
    EXTRA_INCLUDES=
  else
    EXTRA_INCLUDES=`echo $INCLUDES | sed -e "s%${apr_ste_save_INCLUDES}%%"`
    INCLUDES="$apr_ste_save_INCLUDES"
  fi
fi
if test "x$silent" != "xyes"; then
  echo "  restoring INCLUDES to \"$INCLUDES\""
  echo "  setting EXTRA_INCLUDES to \"$EXTRA_INCLUDES\""
fi



echo $ac_n "${nl}Construct makefiles and header files...${nl}"


  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST abs_srcdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST bindir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST sbindir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST cgidir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST logfiledir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST exec_prefix"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST datadir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST localstatedir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST mandir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST libdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST libexecdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST htdocsdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST manualdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST includedir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST errordir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST iconsdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST sysconfdir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST installbuilddir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST runtimedir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST proxycachedir"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST other_targets"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST progname"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST prefix"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST AWK"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CC"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CPP"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CXX"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CPPFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CXXFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST LTFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST LT_LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SH_LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST HTTPD_LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST UTIL_LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST LIBS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST DEFS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST INCLUDES"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST NOTEST_CPPFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST NOTEST_CFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST NOTEST_CXXFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST NOTEST_LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST NOTEST_LIBS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST EXTRA_CPPFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST EXTRA_CFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST EXTRA_CXXFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST EXTRA_LDFLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST EXTRA_LIBS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST EXTRA_INCLUDES"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST LIBTOOL"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SHELL"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST RSYNC"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MODULE_DIRS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MODULE_CLEANDIRS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST PORT"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SSLPORT"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST nonssl_listen_stmt_1"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST nonssl_listen_stmt_2"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CORE_IMPLIB_FILE"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST CORE_IMPLIB"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SH_LIBS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST SH_LIBTOOL"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MK_IMPLIB"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST MKDEP"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST INSTALL_PROG_FLAGS"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST DSO_MODULES"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APR_BINDIR"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APR_INCLUDEDIR"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APR_VERSION"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APR_CONFIG"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APU_BINDIR"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APU_INCLUDEDIR"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APU_VERSION"
  

  
  APACHE_VAR_SUBST="$APACHE_VAR_SUBST APU_CONFIG"
  


  abs_srcdir="`(cd $srcdir && pwd)`"

  echo creating config_vars.mk
  test -d build || $mkdir_p build
  > build/config_vars.mk
  for i in $APACHE_VAR_SUBST; do
    eval echo "$i = \$$i" >> build/config_vars.mk
  done


rm -f modules.c
echo $MODLIST | $AWK -f $srcdir/build/build-modules-c.awk > modules.c


ap_last=
ap_cur="$prefix"
while test "x${ap_cur}" != "x${ap_last}";
do
  ap_last="${ap_cur}"
  ap_cur=`eval "echo ${ap_cur}"`
done
ap_prefix="${ap_cur}"

cat >> confdefs.h <<EOF
#define HTTPD_ROOT "${ap_prefix}"
EOF

cat >> confdefs.h <<EOF
#define SERVER_CONFIG_FILE "${rel_sysconfdir}/${progname}.conf"
EOF

cat >> confdefs.h <<EOF
#define AP_TYPES_CONFIG_FILE "${rel_sysconfdir}/mime.types"
EOF

cat >> confdefs.h <<EOF
#define APACHE_MPM_DIR "$MPM_DIR"
EOF


perlbin=`$ac_aux_dir/PrintPath perl`
if test "x$perlbin" = "x"; then
    perlbin="/replace/with/path/to/perl/interpreter"
fi



BSD_MAKEFILE=no
ap_make_include=include
ap_make_delimiter=' '
case $host in
*bsdi*)
    # Check whether they've installed GNU make
    if make --version > /dev/null 2>&1; then
        true
    else
        BSD_MAKEFILE=yes
        ap_make_include=.include
        ap_make_delimiter='"'
    fi
    ;;
esac



test -d docs/conf||$mkdir_p docs/conf

HTTPD_VERSION=`$abs_srcdir/build/get-version.sh all $abs_srcdir/include/ap_release.h AP_SERVER`


trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.13"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir

trap 'rm -fr `echo "$APACHE_OUTPUT_FILES docs/conf/httpd.conf docs/conf/extra/httpd-autoindex.conf docs/conf/extra/httpd-dav.conf docs/conf/extra/httpd-default.conf docs/conf/extra/httpd-info.conf docs/conf/extra/httpd-languages.conf docs/conf/extra/httpd-manual.conf docs/conf/extra/httpd-mpm.conf docs/conf/extra/httpd-multilang-errordoc.conf docs/conf/extra/httpd-ssl.conf docs/conf/extra/httpd-userdir.conf docs/conf/extra/httpd-vhosts.conf include/ap_config_layout.h support/apxs support/apachectl support/dbmmanage support/envvars-std support/log_server_status support/logresolve.pl support/phf_abuse_log.cgi support/split-logfile build/rules.mk build/pkg/pkginfo build/config_vars.sh include/ap_config_auto.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@SHELL@%$SHELL%g
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@FFLAGS@%$FFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@exp_exec_prefix@%$exp_exec_prefix%g
s%@rel_exec_prefix@%$rel_exec_prefix%g
s%@exp_bindir@%$exp_bindir%g
s%@rel_bindir@%$rel_bindir%g
s%@exp_sbindir@%$exp_sbindir%g
s%@rel_sbindir@%$rel_sbindir%g
s%@exp_libdir@%$exp_libdir%g
s%@rel_libdir@%$rel_libdir%g
s%@exp_libexecdir@%$exp_libexecdir%g
s%@rel_libexecdir@%$rel_libexecdir%g
s%@exp_mandir@%$exp_mandir%g
s%@rel_mandir@%$rel_mandir%g
s%@exp_sysconfdir@%$exp_sysconfdir%g
s%@rel_sysconfdir@%$rel_sysconfdir%g
s%@exp_datadir@%$exp_datadir%g
s%@rel_datadir@%$rel_datadir%g
s%@exp_installbuilddir@%$exp_installbuilddir%g
s%@rel_installbuilddir@%$rel_installbuilddir%g
s%@exp_errordir@%$exp_errordir%g
s%@rel_errordir@%$rel_errordir%g
s%@exp_iconsdir@%$exp_iconsdir%g
s%@rel_iconsdir@%$rel_iconsdir%g
s%@exp_htdocsdir@%$exp_htdocsdir%g
s%@rel_htdocsdir@%$rel_htdocsdir%g
s%@exp_manualdir@%$exp_manualdir%g
s%@rel_manualdir@%$rel_manualdir%g
s%@exp_cgidir@%$exp_cgidir%g
s%@rel_cgidir@%$rel_cgidir%g
s%@exp_includedir@%$exp_includedir%g
s%@rel_includedir@%$rel_includedir%g
s%@exp_localstatedir@%$exp_localstatedir%g
s%@rel_localstatedir@%$rel_localstatedir%g
s%@exp_runtimedir@%$exp_runtimedir%g
s%@rel_runtimedir@%$rel_runtimedir%g
s%@exp_logfiledir@%$exp_logfiledir%g
s%@rel_logfiledir@%$rel_logfiledir%g
s%@exp_proxycachedir@%$exp_proxycachedir%g
s%@rel_proxycachedir@%$rel_proxycachedir%g
s%@host@%$host%g
s%@host_alias@%$host_alias%g
s%@host_cpu@%$host_cpu%g
s%@host_vendor@%$host_vendor%g
s%@host_os@%$host_os%g
s%@target@%$target%g
s%@target_alias@%$target_alias%g
s%@target_cpu@%$target_cpu%g
s%@target_vendor@%$target_vendor%g
s%@target_os@%$target_os%g
s%@build@%$build%g
s%@build_alias@%$build_alias%g
s%@build_cpu@%$build_cpu%g
s%@build_vendor@%$build_vendor%g
s%@build_os@%$build_os%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@PCRE_CONFIG@%$PCRE_CONFIG%g
s%@SHLTCFLAGS@%$SHLTCFLAGS%g
s%@LTCFLAGS@%$LTCFLAGS%g
s%@RM@%$RM%g
s%@PKGCONFIG@%$PKGCONFIG%g
s%@RSYNC@%$RSYNC%g
s%@AWK@%$AWK%g
s%@LN_S@%$LN_S%g
s%@RANLIB@%$RANLIB%g
s%@LYNX_PATH@%$LYNX_PATH%g
s%@MKINSTALLDIRS@%$MKINSTALLDIRS%g
s%@INSTALL@%$INSTALL%g
s%@MKDEP@%$MKDEP%g
s%@PICFLAGS@%$PICFLAGS%g
s%@PILDFLAGS@%$PILDFLAGS%g
s%@MOD_AUTHN_FILE_LDADD@%$MOD_AUTHN_FILE_LDADD%g
s%@MOD_AUTHN_DBM_LDADD@%$MOD_AUTHN_DBM_LDADD%g
s%@MOD_AUTHN_ANON_LDADD@%$MOD_AUTHN_ANON_LDADD%g
s%@MOD_AUTHN_DBD_LDADD@%$MOD_AUTHN_DBD_LDADD%g
s%@MOD_AUTHN_DEFAULT_LDADD@%$MOD_AUTHN_DEFAULT_LDADD%g
s%@MOD_AUTHN_ALIAS_LDADD@%$MOD_AUTHN_ALIAS_LDADD%g
s%@MOD_AUTHZ_HOST_LDADD@%$MOD_AUTHZ_HOST_LDADD%g
s%@MOD_AUTHZ_GROUPFILE_LDADD@%$MOD_AUTHZ_GROUPFILE_LDADD%g
s%@MOD_AUTHZ_USER_LDADD@%$MOD_AUTHZ_USER_LDADD%g
s%@MOD_AUTHZ_DBM_LDADD@%$MOD_AUTHZ_DBM_LDADD%g
s%@MOD_AUTHZ_OWNER_LDADD@%$MOD_AUTHZ_OWNER_LDADD%g
s%@MOD_AUTHNZ_LDAP_LDADD@%$MOD_AUTHNZ_LDAP_LDADD%g
s%@MOD_AUTHZ_DEFAULT_LDADD@%$MOD_AUTHZ_DEFAULT_LDADD%g
s%@MOD_AUTH_BASIC_LDADD@%$MOD_AUTH_BASIC_LDADD%g
s%@MOD_AUTH_DIGEST_LDADD@%$MOD_AUTH_DIGEST_LDADD%g
s%@MOD_ISAPI_LDADD@%$MOD_ISAPI_LDADD%g
s%@MOD_FILE_CACHE_LDADD@%$MOD_FILE_CACHE_LDADD%g
s%@MOD_CACHE_LDADD@%$MOD_CACHE_LDADD%g
s%@MOD_DISK_CACHE_LDADD@%$MOD_DISK_CACHE_LDADD%g
s%@MOD_MEM_CACHE_LDADD@%$MOD_MEM_CACHE_LDADD%g
s%@MOD_DBD_LDADD@%$MOD_DBD_LDADD%g
s%@MOD_BUCKETEER_LDADD@%$MOD_BUCKETEER_LDADD%g
s%@MOD_DUMPIO_LDADD@%$MOD_DUMPIO_LDADD%g
s%@MOD_ECHO_LDADD@%$MOD_ECHO_LDADD%g
s%@MOD_EXAMPLE_LDADD@%$MOD_EXAMPLE_LDADD%g
s%@MOD_CASE_FILTER_LDADD@%$MOD_CASE_FILTER_LDADD%g
s%@MOD_CASE_FILTER_IN_LDADD@%$MOD_CASE_FILTER_IN_LDADD%g
s%@MOD_EXT_FILTER_LDADD@%$MOD_EXT_FILTER_LDADD%g
s%@MOD_INCLUDE_LDADD@%$MOD_INCLUDE_LDADD%g
s%@MOD_FILTER_LDADD@%$MOD_FILTER_LDADD%g
s%@MOD_SUBSTITUTE_LDADD@%$MOD_SUBSTITUTE_LDADD%g
s%@MOD_CHARSET_LITE_LDADD@%$MOD_CHARSET_LITE_LDADD%g
s%@MOD_DEFLATE_LDADD@%$MOD_DEFLATE_LDADD%g
s%@MOD_LDAP_LDADD@%$MOD_LDAP_LDADD%g
s%@MOD_LOG_CONFIG_LDADD@%$MOD_LOG_CONFIG_LDADD%g
s%@MOD_LOG_FORENSIC_LDADD@%$MOD_LOG_FORENSIC_LDADD%g
s%@MOD_LOGIO_LDADD@%$MOD_LOGIO_LDADD%g
s%@MOD_ENV_LDADD@%$MOD_ENV_LDADD%g
s%@MOD_MIME_MAGIC_LDADD@%$MOD_MIME_MAGIC_LDADD%g
s%@MOD_CERN_META_LDADD@%$MOD_CERN_META_LDADD%g
s%@MOD_EXPIRES_LDADD@%$MOD_EXPIRES_LDADD%g
s%@MOD_HEADERS_LDADD@%$MOD_HEADERS_LDADD%g
s%@MOD_IDENT_LDADD@%$MOD_IDENT_LDADD%g
s%@MOD_USERTRACK_LDADD@%$MOD_USERTRACK_LDADD%g
s%@MOD_UNIQUE_ID_LDADD@%$MOD_UNIQUE_ID_LDADD%g
s%@MOD_SETENVIF_LDADD@%$MOD_SETENVIF_LDADD%g
s%@MOD_VERSION_LDADD@%$MOD_VERSION_LDADD%g
s%@MOD_PROXY_LDADD@%$MOD_PROXY_LDADD%g
s%@MOD_PROXY_CONNECT_LDADD@%$MOD_PROXY_CONNECT_LDADD%g
s%@MOD_PROXY_FTP_LDADD@%$MOD_PROXY_FTP_LDADD%g
s%@MOD_PROXY_HTTP_LDADD@%$MOD_PROXY_HTTP_LDADD%g
s%@MOD_PROXY_AJP_LDADD@%$MOD_PROXY_AJP_LDADD%g
s%@MOD_PROXY_BALANCER_LDADD@%$MOD_PROXY_BALANCER_LDADD%g
s%@SSL_LIBS@%$SSL_LIBS%g
s%@MOD_SSL_LDADD@%$MOD_SSL_LDADD%g
s%@MOD_OPTIONAL_HOOK_EXPORT_LDADD@%$MOD_OPTIONAL_HOOK_EXPORT_LDADD%g
s%@MOD_OPTIONAL_HOOK_IMPORT_LDADD@%$MOD_OPTIONAL_HOOK_IMPORT_LDADD%g
s%@MOD_OPTIONAL_FN_IMPORT_LDADD@%$MOD_OPTIONAL_FN_IMPORT_LDADD%g
s%@MOD_OPTIONAL_FN_EXPORT_LDADD@%$MOD_OPTIONAL_FN_EXPORT_LDADD%g
s%@MPM_NAME@%$MPM_NAME%g
s%@MPM_SUBDIR_NAME@%$MPM_SUBDIR_NAME%g
s%@htpasswd_LTFLAGS@%$htpasswd_LTFLAGS%g
s%@htdigest_LTFLAGS@%$htdigest_LTFLAGS%g
s%@rotatelogs_LTFLAGS@%$rotatelogs_LTFLAGS%g
s%@logresolve_LTFLAGS@%$logresolve_LTFLAGS%g
s%@htdbm_LTFLAGS@%$htdbm_LTFLAGS%g
s%@ab_LTFLAGS@%$ab_LTFLAGS%g
s%@checkgid_LTFLAGS@%$checkgid_LTFLAGS%g
s%@htcacheclean_LTFLAGS@%$htcacheclean_LTFLAGS%g
s%@httxt2dbm_LTFLAGS@%$httxt2dbm_LTFLAGS%g
s%@APACHECTL_ULIMIT@%$APACHECTL_ULIMIT%g
s%@MOD_HTTP_LDADD@%$MOD_HTTP_LDADD%g
s%@MOD_MIME_LDADD@%$MOD_MIME_LDADD%g
s%@MOD_DAV_LDADD@%$MOD_DAV_LDADD%g
s%@MOD_STATUS_LDADD@%$MOD_STATUS_LDADD%g
s%@MOD_AUTOINDEX_LDADD@%$MOD_AUTOINDEX_LDADD%g
s%@MOD_ASIS_LDADD@%$MOD_ASIS_LDADD%g
s%@MOD_INFO_LDADD@%$MOD_INFO_LDADD%g
s%@MOD_SUEXEC_LDADD@%$MOD_SUEXEC_LDADD%g
s%@MOD_CGID_LDADD@%$MOD_CGID_LDADD%g
s%@MOD_CGI_LDADD@%$MOD_CGI_LDADD%g
s%@MOD_DAV_FS_LDADD@%$MOD_DAV_FS_LDADD%g
s%@MOD_DAV_LOCK_LDADD@%$MOD_DAV_LOCK_LDADD%g
s%@MOD_VHOST_ALIAS_LDADD@%$MOD_VHOST_ALIAS_LDADD%g
s%@MOD_NEGOTIATION_LDADD@%$MOD_NEGOTIATION_LDADD%g
s%@MOD_DIR_LDADD@%$MOD_DIR_LDADD%g
s%@MOD_IMAGEMAP_LDADD@%$MOD_IMAGEMAP_LDADD%g
s%@MOD_ACTIONS_LDADD@%$MOD_ACTIONS_LDADD%g
s%@MOD_SPELING_LDADD@%$MOD_SPELING_LDADD%g
s%@MOD_USERDIR_LDADD@%$MOD_USERDIR_LDADD%g
s%@MOD_ALIAS_LDADD@%$MOD_ALIAS_LDADD%g
s%@MOD_REWRITE_LDADD@%$MOD_REWRITE_LDADD%g
s%@INSTALL_DSO@%$INSTALL_DSO%g
s%@MOD_SO_LDADD@%$MOD_SO_LDADD%g
s%@progname@%$progname%g
s%@MPM_LIB@%$MPM_LIB%g
s%@OS@%$OS%g
s%@OS_DIR@%$OS_DIR%g
s%@BUILTIN_LIBS@%$BUILTIN_LIBS%g
s%@SHLIBPATH_VAR@%$SHLIBPATH_VAR%g
s%@OS_SPECIFIC_VARS@%$OS_SPECIFIC_VARS%g
s%@PRE_SHARED_CMDS@%$PRE_SHARED_CMDS%g
s%@POST_SHARED_CMDS@%$POST_SHARED_CMDS%g
s%@shared_build@%$shared_build%g
s%@AP_LIBS@%$AP_LIBS%g
s%@AP_BUILD_SRCLIB_DIRS@%$AP_BUILD_SRCLIB_DIRS%g
s%@AP_CLEAN_SRCLIB_DIRS@%$AP_CLEAN_SRCLIB_DIRS%g
s%@EXTRA_CPPFLAGS@%$EXTRA_CPPFLAGS%g
s%@EXTRA_CFLAGS@%$EXTRA_CFLAGS%g
s%@EXTRA_CXXFLAGS@%$EXTRA_CXXFLAGS%g
s%@EXTRA_LDFLAGS@%$EXTRA_LDFLAGS%g
s%@EXTRA_LIBS@%$EXTRA_LIBS%g
s%@EXTRA_INCLUDES@%$EXTRA_INCLUDES%g
s%@abs_srcdir@%$abs_srcdir%g
s%@cgidir@%$cgidir%g
s%@logfiledir@%$logfiledir%g
s%@htdocsdir@%$htdocsdir%g
s%@manualdir@%$manualdir%g
s%@errordir@%$errordir%g
s%@iconsdir@%$iconsdir%g
s%@installbuilddir@%$installbuilddir%g
s%@runtimedir@%$runtimedir%g
s%@proxycachedir@%$proxycachedir%g
s%@other_targets@%$other_targets%g
s%@CXX@%$CXX%g
s%@LTFLAGS@%$LTFLAGS%g
s%@LT_LDFLAGS@%$LT_LDFLAGS%g
s%@SH_LDFLAGS@%$SH_LDFLAGS%g
s%@HTTPD_LDFLAGS@%$HTTPD_LDFLAGS%g
s%@UTIL_LDFLAGS@%$UTIL_LDFLAGS%g
s%@INCLUDES@%$INCLUDES%g
s%@NOTEST_CPPFLAGS@%$NOTEST_CPPFLAGS%g
s%@NOTEST_CFLAGS@%$NOTEST_CFLAGS%g
s%@NOTEST_CXXFLAGS@%$NOTEST_CXXFLAGS%g
s%@NOTEST_LDFLAGS@%$NOTEST_LDFLAGS%g
s%@NOTEST_LIBS@%$NOTEST_LIBS%g
s%@LIBTOOL@%$LIBTOOL%g
s%@MODULE_DIRS@%$MODULE_DIRS%g
s%@MODULE_CLEANDIRS@%$MODULE_CLEANDIRS%g
s%@PORT@%$PORT%g
s%@SSLPORT@%$SSLPORT%g
s%@nonssl_listen_stmt_1@%$nonssl_listen_stmt_1%g
s%@nonssl_listen_stmt_2@%$nonssl_listen_stmt_2%g
s%@CORE_IMPLIB_FILE@%$CORE_IMPLIB_FILE%g
s%@CORE_IMPLIB@%$CORE_IMPLIB%g
s%@SH_LIBS@%$SH_LIBS%g
s%@SH_LIBTOOL@%$SH_LIBTOOL%g
s%@MK_IMPLIB@%$MK_IMPLIB%g
s%@INSTALL_PROG_FLAGS@%$INSTALL_PROG_FLAGS%g
s%@DSO_MODULES@%$DSO_MODULES%g
s%@APR_BINDIR@%$APR_BINDIR%g
s%@APR_INCLUDEDIR@%$APR_INCLUDEDIR%g
s%@APR_VERSION@%$APR_VERSION%g
s%@APR_CONFIG@%$APR_CONFIG%g
s%@APU_BINDIR@%$APU_BINDIR%g
s%@APU_INCLUDEDIR@%$APU_INCLUDEDIR%g
s%@APU_VERSION@%$APU_VERSION%g
s%@APU_CONFIG@%$APU_CONFIG%g
s%@perlbin@%$perlbin%g
s%@ap_make_include@%$ap_make_include%g
s%@ap_make_delimiter@%$ap_make_delimiter%g
s%@HTTPD_VERSION@%$HTTPD_VERSION%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$APACHE_OUTPUT_FILES docs/conf/httpd.conf docs/conf/extra/httpd-autoindex.conf docs/conf/extra/httpd-dav.conf docs/conf/extra/httpd-default.conf docs/conf/extra/httpd-info.conf docs/conf/extra/httpd-languages.conf docs/conf/extra/httpd-manual.conf docs/conf/extra/httpd-mpm.conf docs/conf/extra/httpd-multilang-errordoc.conf docs/conf/extra/httpd-ssl.conf docs/conf/extra/httpd-userdir.conf docs/conf/extra/httpd-vhosts.conf include/ap_config_layout.h support/apxs support/apachectl support/dbmmanage support/envvars-std support/log_server_status support/logresolve.pl support/phf_abuse_log.cgi support/split-logfile build/rules.mk build/pkg/pkginfo build/config_vars.sh"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac


  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="include/ap_config_auto.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF

  
  $SHELL $srcdir/build/fastgen.sh $srcdir $ac_cv_mkdir_p $BSD_MAKEFILE $APACHE_FAST_OUTPUT_FILES


EOF
cat >> $CONFIG_STATUS <<\EOF
true
exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1


case $MPM_SUBDIR_NAME in
*experimental*)
    echo ""
    echo ""
    echo "============================================================"
    echo "    WARNING: THE '${APACHE_MPM}' MPM IS EXPERIMENTAL"
    echo "============================================================"
    echo " The selected MPM might not be fully functional!"
    echo ""
    echo " Development of this MPM is not complete. Do not use this"
    echo " MPM unless you are a programmer willing to help fix it."
    echo ""
    echo " If you are looking for a stable server, you should not use"
    echo " the '${APACHE_MPM}' MPM until it is moved out of experimental."
    echo "============================================================"
    echo ""
    echo ""
    ;;
esac
